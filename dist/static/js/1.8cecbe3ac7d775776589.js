webpackJsonp([1],{"4OKQ":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("FrmM"),r=i("HBrH"),s=i.n(r),o={props:{caseObj:{type:Object,required:!0},initData:{type:Array,required:!0}},data:function(){return{}},name:"",computed:{},components:{},methods:{showActionDesc:function(t){return t?"激活":"忽略"},setIgnore:function(t){var e=this;Object(n.t)({caseNumber:this.caseObj.caseNumber,type:t.type,ignore:!t.ignore,hinge:t.hinge}).then(function(t){"200"===t.data.code?e.ee.emit("updateRiskList"):e.$message.error(t.data.msg)})},switchPdfByOcrfileId:function(t){var e=void 0;t&&(t.length>0&&(e=t[0]),this.ee.emit("switchPdfByOcrfileIdEvent",e))},update:function(){}},mounted:function(){window.eventEmitter?this.ee=window.eventEmitter:this.ee=window.eventEmitter=new s.a}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"risk-list-wrap"},[t._l(t.initData,function(e){return n("dl",{key:e.index},[n("dt",[t._v(t._s(e.title))]),t._v(" "),n("dd",t._l(e.block,function(e){return n("span",{key:e.index},[n("i",{staticClass:"iconfont",domProps:{innerHTML:t._s(e.icon)}}),t._v(t._s(e.label)+"："+t._s(e.descr))])})),t._v(" "),n("dd",{staticClass:"btns-wrap"},[n("span",[e.source?n("el-button",{attrs:{type:"text"},on:{click:function(i){t.switchPdfByOcrfileId(e.source)}}},[t._v("查看卷宗")]):t._e(),t._v(" "),n("el-button",{class:{isIgnore:e.ignore,notIgnore:!e.ignore},attrs:{type:"text"},on:{click:function(i){t.setIgnore({type:e.type,hinge:e.hinge,ignore:e.ignore})}}},[t._v(t._s(t.showActionDesc(e.ignore)))])],1)])])}),t._v(" "),0==t.initData.length?n("div",{staticClass:"no-result"},[n("img",{attrs:{src:i("1yPc"),alt:""}}),t._v(" "),n("p",{staticStyle:{"text-align":"center"}},[t._v("该列表暂无数据！")])]):t._e()],2)},staticRenderFns:[]};var h=i("C7Lr")(o,a,!1,function(t){i("O4Mj")},"data-v-7427dc2f",null).exports,l=i("psq8"),_=i.n(l),u=void 0,c=[],d={props:{caseObj:{type:Object,required:!0}},name:"improperEvidenceList",data:function(){return{selectedType:"",typeList:[],evidenceList:[]}},computed:{},components:{},methods:{switchPdfByOcrfileId:function(t){t&&""!==t||this.$message.error("该条记录的原始文档ocrfileId为空"),this.ee.emit("switchPdfByOcrfileIdEvent",t)},getImproperEvidenceList:function(t){var e=this;Object(n.l)({caseNumber:this.caseObj.caseNumber}).then(function(i){"200"===i.data.code&&(i.data.data?(c=i.data.data.caseMgtImproperEvidenceVoList,e.doFilterList(t)):e.evidenceList=[])})},updataList:function(){this.getImproperEvidenceList(this.selectedType)},deleteImproperEvidence:function(t){var e=this;this.$confirm("您确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.c)({evidenceAnalysisImproperId:t}).then(function(i){"200"===i.data.code&&(c=_.a.filter(c,function(e){return e.evidenceAnalysisImproperId!==t}),e.updataList(),e.$message({type:"success",message:"删除成功!"}))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},editImproperEvidence:function(t){this.ee.emit("doEditAsync",t)},doFilterList:function(t){this.evidenceList=_.a.filter(c,function(e){return e.improperEvidenceName===t})}},mounted:function(){var t=this;this.$watch("selectedType",function(e){t.doFilterList(e)},{immediate:!0}),this.$nextTick(function(){window.eventEmitter?t.ee=window.eventEmitter:t.ee=window.eventEmitter=new s.a,u=function(e){var i=_.a.filter(t.typeList,function(t){return t.eName===e});i.length>0&&(t.selectedType=i[0].cName),t.updataList()},t.ee.addListener("ImproperEvidenceAdded",u)}),Object(n.m)({code:"improper",classify:"evidence"}).then(function(e){"200"===e.data.code&&(t.typeList=e.data.data,t.selectedType=t.typeList[0].cName,t.getImproperEvidenceList(t.selectedType))})},destroyed:function(){this.ee.removeListener("ImproperEvidenceAdded",u)}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"improper-evidence-list-wrap"},[n("div",{staticClass:"list-header"},[n("el-radio-group",{attrs:{size:"medium"},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}},t._l(t.typeList,function(e){return n("el-radio-button",{key:e.id,staticClass:"custom-radio-button",attrs:{label:e.cName}},[t._v(t._s(e.cName))])}))],1),t._v(" "),n("div",{staticClass:"list-body"},[t._l(t.evidenceList,function(e){return n("dl",{key:e.evidenceAnalysisImproperId,staticClass:"improper-evidence-item"},[n("dt",[n("span",{staticClass:"title"},[t._v("证据内容")]),t._v(" "),n("span",{staticClass:"op-btns-wrap"},[n("el-button",{attrs:{type:"text"},on:{click:function(i){t.switchPdfByOcrfileId(e.ocrFileId)}}},[t._v("查看")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(i){t.editImproperEvidence(e)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(i){t.deleteImproperEvidence(e.evidenceAnalysisImproperId)}}},[t._v("删除")])],1)]),t._v(" "),n("dd",{staticClass:"text"},[t._v(t._s(e.improperEvidenceContent))]),t._v(" "),n("dt",[n("span",{staticClass:"title"},[t._v(t._s(e.improperEvidenceName)+"描述")])]),t._v(" "),t._l(e.caseMgtImproperEvidenceCheckboxVoList,function(e){return n("dd",{key:e.$index,staticClass:"desc-item"},[n("i"),t._v(t._s(e.improperEvidenceCheckboxName))])})],2)}),t._v(" "),0==t.evidenceList.length?n("div",{staticClass:"no-result"},[n("img",{attrs:{src:i("1yPc"),alt:""}}),t._v(" "),n("p",{staticStyle:{"text-align":"center"}},[t._v("该列表暂无数据！")])]):t._e()],2)])},staticRenderFns:[]};var g=i("C7Lr")(d,f,!1,function(t){i("6q+h"),i("F1/+")},"data-v-ad01aba8",null).exports,v=i("rVsN"),E=i.n(v),p=i("nf7S"),y=i("LSS8"),T=null,m=[];function O(t,e,i,n,r){var s=null;if(n&&t&&""!==t&&(t=t.split("").join("\n")),r){s=T.createText("",e,i);var o={html:t,evidenceSourceLength:r.evidenceSourceArrLength};m.push(function(t,e){var i=_.a.truncate(t.html,{length:700}),n=12*Math.ceil(i.length/40)+115+12*t.evidenceSourceLength,r=1*t.evidenceSourceLength==0?15:18*t.evidenceSourceLength;return new E.a(function(t,s){var o='<svg xmlns="http://www.w3.org/2000/svg" width="500" height="'+n+'">\n      <foreignObject width="100%" height="100%">\n      <p xmlns="http://www.w3.org/1999/xhtml" style="font-size:12px;color:#999;padding:15px;text-align:justify;margin:0;padding-bottom:'+r+'px">\n      <![CDATA[\n        '+i+"\n      ]]>\n      </p>\n      </foreignObject>\n      </svg>",a=window.URL||window.webkitURL||window,h=new Image,l=new Blob([o],{type:"image/svg+xml"}),_=a.createObjectURL(l);h.onload=function(i){e(i.target,t),a.revokeObjectURL(_)},h.src=_})}(o,function(t,e){s.image={cacheable:!1,image:t,width:t.width,height:t.height,draw:function(t){t.drawImage(this.image,0,0),e()}},s.setStyle(y.Styles.BORDER,1),s.setStyle(y.Styles.BORDER_COLOR,"#efefef"),s.setStyle(y.Styles.BORDER_RADIUS,0)}))}else s=n?T.createText(t,e,i):T.createText(t.replace(/[\r\n]/g,""),e,i);return s.movable=!1,s.setStyle(y.Styles.LABEL_FONT_SIZE,16),s.setStyle(y.Styles.LABEL_COLOR,"#999999"),s.setStyle(y.Styles.LABEL_BACKGROUND_COLOR,"#ffffff"),s.setStyle(y.Styles.LABEL_BORDER,1),s.setStyle(y.Styles.LABEL_BORDER_STYLE,"#e7e7e7"),s.setStyle(y.Styles.LABEL_RADIUS,0),s.setStyle(y.Styles.LABEL_PADDING,new y.Insets(15,15)),s}function w(t,e){var i=T.createEdge(t,e);return i.setStyle(y.Styles.ARROW_TO,!1),i.edgeType=y.Consts.EDGE_TYPE_ORTHOGONAL_HORIZONTAL,i.setStyle(y.Styles.EDGE_COLOR,"#e7e7e7"),i.setStyle(y.Styles.EDGE_CORNER_RADIUS,0),i}var b={props:{caseObj:{type:Object,required:!0}},name:"",data:function(){return{loading:!1,noEvidenceChainsData:!1,step3SharedStore:p.a}},computed:{},components:{},methods:{initMindMap:function(t){var e=this;this.loading=!0;var i=(T=new y.Graph("topoCanvas")).styles={};i[y.Styles.SELECTION_TYPE]=y.Consts.SELECTION_TYPE_BORDER_RECT,i[y.Styles.SELECTION_COLOR]="#54a7f7",i[y.Styles.SELECTION_BORDER]=0,i[y.Styles.SELECTION_PADDING]=new y.Insets(12,16),T.enableTooltip=!1,T.editable=!1,T.isResizable=function(){return!1},T.isRotatable=function(){return!1},T.addCustomInteraction({onmousemove:function(t){var e=T.getElementByMouseEvent(t);if(e&&e.get("hasSource")&&e instanceof y.Node){var i=T.hitTest(t);i instanceof y.LabelUI?"#54a7f7"===i.color&&(T.cursor="pointer"):T.cursor=null}},onclick:function(t){var i=T.getElementByMouseEvent(t);if(i&&i.get("hasSource")&&i instanceof y.Node){var n=T.hitTest(t);if(n instanceof y.LabelUI){if("#999999"===n.color)return;var r=i.get("factConfirmId"),s=i.get("evidenceFixedClassifyId"),o=i.get("factConfirmEvidenceId"),a=n.ocrFileId;e.$router.push({name:"step3",params:{factConfirmId:r,evidenceFixedClassifyId:s,factConfirmEvidenceId:o,ocrFileId:a}})}}}});var n=O(this.caseObj.caseName,0,0,!0);_.a.forEach(t.caseMgtFactConfirmVoList,function(t){var e=O(t.factFindingTitle,0,0);w(n,e),t.caseMgtEvidenceClassifyVoList&&t.caseMgtEvidenceClassifyVoList.length>0&&_.a.forEach(t.caseMgtEvidenceClassifyVoList,function(t){if(n=t.caseMgtFactConfirmEvidenceVoList,r=[],0!==n.length&&(_.a.forEach(n,function(t){""===t.evidenceApproveContent&&""===t.evidenceExtractContent&&""===t.evidenceExtractTitle||r.push(t)}),0!==r.length)){var i=O(t.evidenceFixedClassifyName,0,0);w(e,i),t.caseMgtFactConfirmEvidenceVoList&&t.caseMgtFactConfirmEvidenceVoList.length>0&&_.a.forEach(t.caseMgtFactConfirmEvidenceVoList,function(t){var e=void 0,n=void 0,r=void 0;if(t.evidenceExtractTitle||t.evidenceExtractContent||t.evidenceApproveContent){var s=O("",0,0);w(i,s),t.evidenceExtractTitle&&((e=O(t.evidenceExtractTitle,0,0)).set("hasSource",!1),w(s,e)),t.evidenceExtractContent&&((r=O(t.evidenceExtractContent,0,0,!1,{evidenceExtractContent:t.evidenceExtractContent,evidenceSourceArrLength:t.caseMgtFactConfirmEvidenceSourceVoList.length})).set("factConfirmId",t.factConfirmId),r.set("evidenceFixedClassifyId",t.evidenceFixedClassifyId),r.set("factConfirmEvidenceId",t.factConfirmEvidenceId),r.set("hasSource",!1),t.caseMgtFactConfirmEvidenceSourceVoList.length&&r.setStyle(y.Styles.LABEL_ALIGN_POSITION,y.Position.LEFT_TOP),r.setStyle(y.Styles.LABEL_SIZE,{width:16*t.evidenceExtractContent.length+30,height:16+16*t.caseMgtFactConfirmEvidenceSourceVoList.length}),w(s,r)),t.evidenceApproveContent&&((n=O(t.evidenceApproveContent,0,0,!1,{evidenceExtractContent:t.evidenceApproveContent,evidenceSourceArrLength:0})).set("hasSource",!1),n.setStyle(y.Styles.LABEL_SIZE,{width:16*t.evidenceApproveContent.length+30,height:16+16*t.caseMgtFactConfirmEvidenceSourceVoList.length}),w(s,n)),t.caseMgtFactConfirmEvidenceSourceVoList&&t.caseMgtFactConfirmEvidenceSourceVoList.length>0&&(r.set("hasSource",!0),_.a.forEach(t.caseMgtFactConfirmEvidenceSourceVoList,function(t,e){var i,n,s,o,a;(i=r,n=t.ocrFileName,s=-1*e*20-15,o=-15,(a=new y.LabelUI(n)).position=y.Position.RIGHT_BOTTOM,a.anchorPosition=y.Position.RIGHT_BOTTOM,a.color="#54a7f7",s&&(a.offsetY=s),o&&(a.offsetX=o),i.addUI(a),a).ocrFileId=t.ocrFileId}))}})}var n,r})}),E.a.all(m).then(function(){var t=new y.TreeLayouter(T);t.parentChildrenDirection=y.Consts.DIRECTION_RIGHT,t.layoutType=y.Consts.LAYOUT_TYPE_EVEN_VERTICAL,t.doLayout({callback:function(){e.loading=!1,T.zoomToOverview(),m=[]}})})},getMindMapDataAsync:function(){var t=this;this.loading=!0;var e=this.step3SharedStore.step3AllDatas;return new E.a(function(i,n){_.a.isEmpty(e)?(t.loading=!1,t.noEvidenceChainsData=!0,n(new Error("没有缓存数据可用"))):(t.noEvidenceChainsData=!1,t.loading=!1,i({caseMgtFactConfirmVoList:e}))})},getMindMapData:function(){var t=this;return this.loading=!0,new E.a(function(e,i){Object(n.j)({caseNumber:t.caseObj.caseNumber}).then(function(n){"200"===n.data.code?n.data.data.caseMgtFactConfirmVoList.length>0?(t.noEvidenceChainsData=!1,t.loading=!1,e(n.data.data)):(t.loading=!1,t.noEvidenceChainsData=!0):(t.loading=!1,i(n.data.msg))})})}},destroyed:function(){T.destroy()},mounted:function(){var t=this;HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,i){var n=this;setTimeout(function(){for(var r=atob(n.toDataURL(e,i).split(",")[1]),s=r.length,o=new Uint8Array(s),a=0;a<s;a++)o[a]=r.charCodeAt(a);t(new Blob([o],{type:e||"image/png"}))})}}),this.getMindMapDataAsync().then(function(e){t.initMindMap(e)}).catch(function(e){console.log("失败了:"+e),t.getMindMapData().then(function(e){t.initMindMap(e)}).catch(function(t){console.log("失败了:"+t)})})}},L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.noEvidenceChainsData?n("div",{staticClass:"no-result"},[n("img",{attrs:{src:i("1yPc"),alt:""}}),t._v(" "),n("p",{staticStyle:{"text-align":"center"}},[t._v("证据链暂无数据！")])]):t._e(),t._v(" "),t.noEvidenceChainsData?t._e():n("div",{staticStyle:{position:"absolute",top:"0",left:"0",display:"block",width:"100%",height:"100%"},attrs:{id:"topoCanvas"}}),t._v(" "),n("div",{staticStyle:{"text-align":"justify","z-index":"-9999",position:"absolute"},attrs:{id:"temp-html2canvas-div"}}),t._v(" "),t.loading?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{position:"absolute",top:"0",left:"0",display:"block",width:"100%",height:"100%"}}):t._e()])},staticRenderFns:[]};var A=i("C7Lr")(b,L,!1,function(t){i("mvd+")},null,null).exports,S=void 0,I={name:"step4",props:{caseObj:{type:Object,required:!0}},components:{RiskWarningList:h,ImproperEvidenceList:g,EvidenceChains:A},data:function(){return{msg:"step4",tabIndex:1,closable:!1,currentTabName:"1",labelPosition:"top",riskDataTotal:0,riskDataList:[],editableTabsList:[{title:"证据链",name:"1",contentForm:{basicInfo:""}},{title:"风险提示",name:"2",contentForm:{basicInfo:""}},{title:"瑕疵或非法证据",name:"3",contentForm:{basicInfo:""}}]}},methods:{next:function(){this.$router.push({name:"step5"})},prev:function(){this.$router.push({name:"step3"})},update:function(){var t=this;Object(n.o)({caseNumber:this.caseObj.caseNumber}).then(function(e){"200"===e.data.code&&(t.riskDataList=e.data.data.rules,t.riskDataTotal=e.data.data.total)})}},mounted:function(){var t=this;window.eventEmitter?this.ee=window.eventEmitter:this.ee=window.eventEmitter=new s.a,this.update(),S=function(e){t.update()},this.ee.addListener("updateRiskList",S)},destroyed:function(){this.ee.removeListener("updateRiskList",S)}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"step-wrap",attrs:{id:"step4"}},[i("el-tabs",{staticClass:"custom-tabs-wrap",model:{value:t.currentTabName,callback:function(e){t.currentTabName=e},expression:"currentTabName"}},[i("el-tab-pane",{attrs:{label:t.editableTabsList[0].title,name:t.editableTabsList[0].name}},[i("div",{staticClass:"step-body-wrap"},[i("keep-alive",[i("evidence-chains",{attrs:{caseObj:t.caseObj}})],1)],1)]),t._v(" "),i("el-tab-pane",{attrs:{label:t.editableTabsList[1].title,name:t.editableTabsList[1].name}},[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.editableTabsList[1].title)),t.riskDataTotal?i("el-badge",{staticClass:"item",attrs:{value:t.riskDataTotal,max:10}}):t._e()],1),t._v(" "),i("div",{staticClass:"step-body-wrap"},[i("keep-alive",[i("risk-warning-list",{attrs:{caseObj:t.caseObj,initData:t.riskDataList}})],1)],1)]),t._v(" "),i("el-tab-pane",{attrs:{label:t.editableTabsList[2].title,name:t.editableTabsList[2].name}},[i("div",{staticClass:"step-body-wrap"},[i("keep-alive",[i("improper-evidence-list",{attrs:{caseObj:t.caseObj}})],1)],1)])],1),t._v(" "),i("div",{staticClass:"step-footer-wrap"},[i("el-button",{attrs:{size:"small"},on:{click:t.prev}},[t._v("上一步")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.next}},[t._v("下一步")])],1)],1)},staticRenderFns:[]};var C=i("C7Lr")(I,x,!1,function(t){i("t9kj")},null,null);e.default=C.exports},"6q+h":function(t,e){},"F1/+":function(t,e){},LSS8:function(t,e,i){let n=i("Ut12");t.exports=n},O4Mj:function(t,e){},Ut12:function(t,e){t.exports=function(t,e,i){"use strict";function n(t,e,i){if(t.hasChildren()){var r=t._er||t.getChildren();if(r){for(var s=0,o=(r=r._ig||r).length;o>s;s++)if(!1===e.call(i,r[s])||!1===n(r[s],e,i))return!1;return!0}}}function r(t){if(!t.hasChildren())return t instanceof ds?t:null;for(var e,i=t._er._ig,n=i.length-1;n>=0;){if(e=r(e=i[n]))return e;n--}return null}function s(t,e,i,n){return n?function t(e,i,n){e=e._ig||e;for(var r,s=0,o=e.length;o>s;s++)if(r=e[s],r.hasChildren()&&!t(r.children,i,n)||!1===i.call(n,r))return!1;return!0}(t,e,i):function t(e,i,n){e=e._ig||e;for(var r,s=0,o=e.length;o>s;s++)if(r=e[s],!1===i.call(n,r)||r.hasChildren()&&!t(r.children,i,n))return!1;return!0}(t,e,i)}function o(t,e,i,n){return n?function t(e,i,n){e=e._ig||e;for(var r,s=e.length,o=s-1;o>=0;o--)if(r=e[o],r.hasChildren()&&!t(r.children,i,n)||!1===i.call(n,r))return!1;return!0}(t,e,i):function t(e,i,n){e=e._ig||e;for(var r,s=e.length,o=s-1;o>=0;o--)if(r=e[o],!1===i.call(n,r)||r.hasChildren()&&!t(r.children,i,n))return!1;return!0}(t,e,i)}function a(t,e,i){for(var n,r=(t._ig||t).slice(0);r.length;){if(n=r[0],r=r.splice(1),!1===e.call(i,n))return!1;if(n.hasChildren()){var s=n.children;s=s._ig||s,r=r.concat(s)}}return!0}function l(t,e){function i(t,i){for(var n=t.length,r=i.length,s=n+r,o=new Array(s),a=0,h=0,l=0;s>l;)o[l++]=a===n?i[h++]:h===r||e(t[a],i[h])<=0?t[a++]:i[h++];return o}return function t(e){var n=e.length,r=Math.ceil(n/2);return 1>=n?e:i(t(e.slice(0,r)),t(e.slice(r)))}(t)}function _(t,e,i,n){t instanceof Qi&&(t=t._ig);for(var r=0,s=(t._ig||t).length;s>r;r++){if(!1===e.call(i,t[r],r,n))return!1}return!0}function u(t,e,i){for(var n=t instanceof Qi,r=t._ig||t,s=0,o=r.length;o>s;s++){var a=r[s];e.call(i,a)&&(n?t.remove(a):t.splice(s,1),s--,o--)}}function c(t,e,i,n){t instanceof Qi&&(t=t._ig);for(var r=(t._ig||t).length-1;r>=0;r--){if(!1===e.call(i,t[r],r,n))return!1}return!0}function d(t){if(t.clone instanceof Function)return t.clone(!0);var e,i=[];return _(t,function(t){e=t&&t.clone instanceof Function?t.clone():t,i.push(e)},this),i}function f(t,e,n){n===i||0>n?t.push(e):t.splice(n,0,e)}function g(t,e){var i=t.indexOf(e);return!(0>i||i>=t.length)&&t.splice(i,1)}function v(t,e){var i=!1;return _(t,function(t){return e==t?(i=!0,!1):void 0}),i}function E(t,e){var i=t;for(var n in e)if(e.__lookupGetter__){var r=e.__lookupGetter__(n),s=e.__lookupSetter__(n);r||s?(r&&i.__defineGetter__(n,r),s&&i.__defineSetter__(n,s)):i[n]=e[n]}else i[n]=e[n];return i}function p(t,e,i){if(!(t instanceof Function))throw new Error("subclass must be type of Function");var n=null;"object"==typeof e&&(n=e,e=t,t=function(){e.apply(this,arguments)});var r=t.prototype,s=function(){};return s.prototype=e.prototype,t.prototype=new s,t.superclass=e.prototype,t.superclass.constructor=e,E(t.prototype,r),n&&E(t.prototype,n),i&&E(t.prototype,i),t.prototype.class=t,t}function y(t,e,i){return T(t,e,"constructor",i)}function T(t,e,i,n){var r=e.superclass;if(r){var s=r[i];return s?s.apply(t,n):void 0}}function m(t,e,i,n){if("constructor"==i)return O(t,e,n);if(e.super_ instanceof Function){var r=e.super_.prototype[i];return r instanceof Function?r.apply(t,n):void 0}}function O(t,e,i){return e.super_ instanceof Function?e.super_.apply(t,i):void 0}function b(t,e,i){var n;if(!(t instanceof Function)&&t instanceof Object)return e=t.super,t.hasOwnProperty("constructor")?(n=t.constructor,delete t.constructor):n=e?function(){e.apply(this,arguments)}:function(){},b(n,e,t);if(e&&!(e instanceof Function)&&e instanceof Object)return b(t,e.super,e);if(e&&function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{super_:{value:e,enumerable:!1},constructor:{value:t,enumerable:!1}})}(t,e),i){var r=t.prototype;for(var s in i)r[s]=i[s]}return t}function L(t,e,n,r,s){if(r)Object.defineProperty(t,e,{value:n,enumerable:!0});else{var o={configurable:!0,enumerable:!0},a="$"+e;n!==i&&(t[a]=n),o.get=function(){return this[a]},o.set=function(t){var i=this[a];if(i==t)return!1;var n=new pn(this,e,t,i);return!!this.beforeEvent(n)&&(this[a]=t,s&&s.call(this,t,i),this.onEvent(n),!0)},Object.defineProperty(t,e,o)}}function A(t,e){for(var i=0,n=e.length;n>i;i++){var r=e[i];L(t,r.name||r,r.defaultValue||r.value,r.readOnly,r.onSetting)}}function S(t,e){return t.className=e,t}function I(t,e){if(!t.hasOwnProperty("classList")){var i=t.getAttribute("class");if(!i)return S(t,e);for(var n=i.split(" "),r=0,s=n.length;s>r;r++)if(n[r]==e)return;return S(t,i+=" "+e)}t.classList.add(e)}function x(t,e){if(!t.hasOwnProperty("classList")){var i=t.getAttribute("class");if(!i||!i.indexOf(e))return;for(var n="",r=i.split(" "),s=0,o=r.length;o>s;s++)r[s]!=e&&(n+=r[s]+" ");return S(t,n)}t.classList.remove(e)}function C(t){return!isNaN(t)&&t instanceof Number||"number"==typeof t}function R(t){return t!==i&&(t instanceof String||"string"==typeof t)}function D(t){return Array.isArray(t)}function P(e){e||(e=t.event),e.preventDefault?e.preventDefault():e.returnValue=!1}function N(e){e||(e=t.event),e.stopPropagation?e.stopPropagation():e.cancelBubble||(e.cancelBubble=!0)}function M(t){P(t),N(t)}function B(t){return Math.floor(Math.random()*t)}function k(t){return t>0?Math.floor(t):Math.ceil(t)}function G(t){return t>0?Math.ceil(t):Math.floor(t)}function F(t){return 16777216>t?"#"+("000000"+t.toString(16)).slice(-6):"rgba("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+","+((t>>24&255)/255).toFixed(2)+")"}function $(t,e,i){"object"!=typeof i||i.hasOwnProperty("enumerable")||(i.enumerable=!0),Object.defineProperty(t,e,i)}function j(t,e){for(var i in e)if("_"!=i[0]){var n=e[i];"object"!=typeof n||n.hasOwnProperty("enumerable")||(n.enumerable=!0)}Object.defineProperties(t,e)}function z(e,i){i||(i=t);for(var n=e.split("."),r=0,s=n.length;s>r;r++){i=i[n[r]]}return i}function Y(t){return t instanceof MouseEvent||t instanceof Object&&t.touches!==i}function H(e){t.console&&console.log(e)}function U(e){t.console&&console.error(e)}function W(t,e,i){var n,r,s;0==t._lg?(n=-1,s=0,r=e):0==t._lc?(n=0,s=1,r=i):(n=-1/t._lg,r=(t._lg-n)*e+t._le,s=1);var o=new rn;return o._lg=n,o._le=r,o._lc=s,o._l6=e,o._la=i,o._ju=Math.atan2(n,s),o._lcos=Math.cos(o._ju),o._sin=Math.sin(o._ju),o}function V(t,e,i,n,r){var s,o,a,h;if(e>n?s=-1:n>e&&(s=1),i>r?o=-1:r>i&&(o=1),!s)return{x:e,y:h=0>o?t.y:t.bottom};if(!o)return{x:a=0>s?t.x:t.right,y:i};var l=(i-r)/(e-n),_=i-l*e,u=0>s?e-t.x:e-t.right,c=0>o?i-t.y:i-t.bottom;return Math.abs(l)>=Math.abs(c/u)?a=((h=0>o?t.y:t.bottom)-_)/l:h=l*(a=0>s?t.x:t.right)+_,{x:a,y:h}}function X(t,e,i,n,r,s,o,a){return!(0>=o||0>=a||0>=i||0>=n)&&(a+=s,i+=t,n+=e,(r>(o+=r)||o>t)&&(s>a||a>e)&&(t>i||i>r)&&(e>n||n>s))}function q(t,e,i,n,r,s){return r>=t&&t+i>=r&&s>=e&&e+n>=s}function K(t,e,i,n,r,s,o,a,h){return h&&(t-=h,e-=h,i+=h+h,n+=h+h),r>=t&&s>=e&&t+i>=r+o&&e+n>=s+a}function Z(t,e,n){if(R(t)&&(t=hn.fromString(t)),!t)return{x:0,y:0};if(t.x!==i)return{x:t.x,y:t.y};var r,s,o=t.horizontalPosition,a=t.verticalPosition;switch(o){case ln:r=0;break;case un:r=e;break;default:r=e/2}switch(a){case cn:s=0;break;case fn:s=n;break;default:s=n/2}return{x:r,y:s}}function J(t){return t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()})}function Q(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function tt(t,e){var i,n,r=t.style;if(!r)return!1;for(i in e)e.hasOwnProperty(i)&&(n=Pn(i))&&(r[n]=e[i]);return t}function et(t,e,i){(e=Pn(e))&&(t.style[e]=i)}function it(t,e){return!!Rn&&(e&&!R(e)&&(e=function(t){var e,i,n="";for(e in t)t.hasOwnProperty(e)&&(i=Pn(e))&&(n+=Q(i)+":"+t[e]+";");return n?n.substring(0,n.length-1):n}(e)),Rn.insertRule?void Rn.insertRule(t+"{"+e+"}",0):void(Rn.addRule&&Rn.addRule(t,e,0)))}function nt(e,i){e.touches&&(e=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e.touches[0]);var n=i.getBoundingClientRect(),r=e.clientX||0,s=e.clientY||0;return Ki&&Ui&&(t.pageXOffset&&r==e.pageX&&(r-=t.pageXOffset),t.pageYOffset&&s==e.pageY&&(s-=t.pageYOffset)),{x:r-n.left,y:s-n.top}}function rt(t,e,i){this._ko=t,this._scope=i,this._handler=e,this._dragPoints=new ot,this._install()}function st(t){return Wi&&t.metaKey||!Wi&&t.ctrlKey}function ot(){this.points=[]}function at(t,e,i,n,r){(!1===i||!1===n)&&(r=!1);try{var s=new XMLHttpRequest,o=encodeURI(t);if(!1!==r)o+=(o.indexOf("?")>0?"&":"?")+"__time="+Date.now();s.open("GET",o),s.onreadystatechange=function(){return 4==s.readyState?s.status&&200!=s.status?void(i||nr)("'"+t+"' load error"):void(e&&e(s)):void 0},s.send(n)}catch(e){(i||nr)("'"+t+"' load error",e)}}function X(t,e,i,n,r,s,o,a){return!(0>=o||0>=a||0>=i||0>=n)&&(a+=s,i+=t,n+=e,(r>(o+=r)||o>t)&&(s>a||a>e)&&(t>i||i>r)&&(e>n||n>s))}function K(t,e,i,n,r,s,o,a){return r>=t&&s>=e&&t+i>=r+o&&e+n>=s+a}function ht(t,e,i){return t instanceof Object&&t.x?_t(t,e,0,0):lt(t,e,i,0,0)}function lt(t,e,i,n,r){var s=Math.sin(i),o=Math.cos(i),a=t-n,h=e-r;return new en(t=a*o-h*s+n,e=a*s+h*o+r,i)}function _t(t,e,i,n){i=i||0,n=n||0;var r=Math.sin(e),s=Math.cos(e),o=t.x-i,a=t.y-n;return t.x=o*s-a*r+i,t.y=o*r+a*s+n,t}function ut(t,e,i){return ct(t,e,i,0,0)}function ct(t,e,i,n,r){var s=lt(t.x,t.y,e,n,r),o=lt(t.x+t.width,t.y,e,n,r),a=lt(t.x+t.width,t.y+t.height,e,n,r),h=lt(t.x,t.y+t.height,e,n,r);return i?i.clear():i=new on,i.addPoint(s),i.addPoint(o),i.addPoint(a),i.addPoint(h),i}function dt(t,e){var i=this.ratio||1;this.style.width=t+"px",this.style.height=e+"px",this.width=t*i,this.height=e*i}function ft(t,i,n){var r=e.createElement("canvas");if(r.g=r.getContext("2d"),!0!==t&&!n)return t&&i&&(r.width=t,r.height=i),r;var s=r.g;return s.ratio=r.ratio=function(t){var e=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return ar/e}(s),r.setSize=dt,s._jw=function(){this.canvas.width=this.canvas.width},t&&i&&r.setSize(t,i),r}function gt(t,e){return or||(or=ft()),t&&e&&(or.width=t,or.height=e),or.g}function vt(t,e,i){return(i||Ji.FONT_STYLE)+" "+(e||Ji.FONT_SIZE)+"px "+(t||Ji.FONT_FAMILY)}function Et(t,e,i,n,r){var s;if(Gi)try{s=t.getImageData(e,i,n,r)}catch(t){}else s=t.getImageData(e,i,n,r);return s}function pt(t,e){var i=1/(e=e||t(1)),n=.5*i,r=Math.min(1,e/100);return function(s){if(0>=s)return 0;if(s>=e)return 1;for(var o=s*i,a=0;a++<10;){var h=s-t(o);if(Math.abs(h)<=r)return o;o+=h*n}return o}}function yt(t,e,i){var n=1-t,r=n*n*e[0]+2*n*t*e[2]+t*t*e[4],s=n*n*e[1]+2*n*t*e[3]+t*t*e[5];if(i){var o=(e[0]+e[4]-2*e[2])*t+e[2]-e[0],a=(e[1]+e[5]-2*e[3])*t+e[3]-e[1];return{x:r,y:s,rotate:Math.atan2(a,o)}}return{t:t,x:r,y:s}}function Tt(t,e,i){var n=t-2*e+i;return 0!=n?(t-e)/n:-1}function mt(t,e){return Math.abs(t-e)<1e-7}function Ot(t,e){return mt(t[0],e[0])&&mt(t[1],e[1])}function wt(t){if(Ot([t[0],t[1]],[t[2],t[3]])){var e=t[0],i=t[1],n=t[4],r=t[5],s=Math.sqrt(_r(e,i,n,r));return function(t){return s*t}}if(Ot([t[0],t[1]],[t[4],t[5]])||Ot([t[2],t[3]],[t[4],t[5]])){e=t[0],i=t[1],n=t[2],r=t[3],s=Math.sqrt(_r(e,i,n,r));return function(t){return s*t}}var o=t[0],a=t[2],h=t[4],l=o-2*a+h,_=2*a-2*o,u=(o=t[1])-2*(a=t[3])+(h=t[5]),c=2*a-2*o,d=4*(l*l+u*u),f=4*(l*_+u*c),g=_*_+c*c,v=1/(s=4*d*g-f*f),E=.125*Math.pow(d,-1.5),p=2*Math.sqrt(d),y=(s*function(t){return Math.log(t+Math.sqrt(t*t+1))}(f/Math.sqrt(s))+2*Math.sqrt(d)*f*Math.sqrt(g))*E;return function(t){var e=f+2*t*d,i=e/Math.sqrt(s),n=e*e*v;return(s*Math.log(i+Math.sqrt(n+1))+p*e*Math.sqrt(g+t*f+t*t*d))*E-y}}function bt(t,e,i){var n=1-t,r=e[0],s=e[2],o=e[4],a=e[6],h=r*n*n*n+3*s*t*n*n+3*o*t*t*n+a*t*t*t;if(i)var l=3*t*t*a+(6*t-9*t*t)*o+(9*t*t-12*t+3)*s+(-3*t*t+6*t-3)*r;var _=(r=e[1])*n*n*n+3*(s=e[3])*t*n*n+3*(o=e[5])*t*t*n+(a=e[7])*t*t*t;if(i){var u=3*t*t*a+(6*t-9*t*t)*o+(9*t*t-12*t+3)*s+(-3*t*t+6*t-3)*r;return{x:h,y:_,rotate:Math.atan2(u,l)}}return{x:h,y:_}}function Lt(t,e,i,n){var r=3*e-t-3*i+n;if(0==r)return[(t-e)/(2*i-4*e+2*t)];var s=2*t-4*e+2*i,o=s*s-4*r*(e-t);return 0>o?void 0:0==o?[-s/(2*r)]:[((o=Math.sqrt(o))-s)/(2*r),(-o-s)/(2*r)]}function At(t,e,i){return _r(e,i,t.cx,t.cy)<=t._squareR+ur}function St(t,e,i,n){return i=i||function(t,e){return nn(t.x,t.y,e.x,e.y)}(t,e),new It((t.x+e.x)/2,(t.y+e.y)/2,i/2,t,e,null,n)}function It(t,e,i,n,r,s,o){this.cx=t,this.cy=e,this.r=i,this._squareR=i*i,this.p1=n,this.p2=r,this.p3=s,this._otherPoint=o}function xt(t,e,i,n){this.cx=t,this.cy=e,this.width=i,this.height=n}function Ct(t){var e=t[0],i=t[1],n=t[2];return function t(e,i,n,r,s){for(var o,a,h=e.length,l=s._squareR,_=0;h>_;_++)if(o=e[_],o!=i&&o!=n&&o!=r){var u=_r(s.cx,s.cy,o.x,o.y);u-ur>l&&(l=u,a=o)}if(!a)return s;var c,d=It._lcreateCircle(a,i,n),f=It._lcreateCircle(a,i,r),g=It._lcreateCircle(a,r,n);return At(d,r.x,r.y)&&(c=d),At(f,n.x,n.y)&&(!c||c.r>f.r)&&(c=f),At(g,i.x,i.y)&&(!c||c.r>g.r)&&(c=g),i=c.p1,n=c.p2,r=c.p3||c._otherPoint,t(e,i,n,r,c)}(t,e,i,n,It._lcreateCircle(e,i,n))}function Rt(t,e){for(var i,n=(e=e||function(t){for(var e,i=t.length,n=new on,r=0;i>r;r++)e=t[r],n.add(e.x,e.y);return n}(t)).width/e.height,r=[],s=t.length,o=0;s>o;o++)i=t[o],r.push({x:i.x,y:i.y*n});var a=Ct(r);return a?new xt(a.cx,a.cy/n,2*a.r,2*a.r/n):void 0}function Dt(t,e,i){if(!this._i8)return null;var n=this._ep;if(n.length<2)return null;!1===i&&(t+=this._i8);var r=n[0];if(0>=t)return Ue(r.points[0],r.points[1],n[1].points[0],n[1].points[1],t,e);if(t>=this._i8){var s,o,a=(r=n[n.length-1]).points,h=a[(d=a.length)-2],l=a[d-1];if(d>=4)s=a[d-4],o=a[d-3];else s=(g=(r=n[n.length-2]).lastPoint).x,o=g.y;return Ue(h,l,h+h-s,l+l-o,t-this._i8,e)}for(var _,u=0,c=1,d=n.length;d>c;c++)if((_=n[c])._i8){if(!(u+_._i8<t)){var f,g=r.lastPoint;if(_.type==Mr){var v=_.points;f=Pt(t-u,_,g.x,g.y,v[0],v[1],v[2],v[3],_._r)}else{if(!_._lf)return Ue(g.x,g.y,_.points[0],_.points[1],t-u,e);var E=pt(_._lf,_._i8)(t-u);v=_.points;f=_.type==Nr&&6==v.length?bt(E,[g.x,g.y].concat(v),!0):yt(E,[g.x,g.y].concat(v),!0)}return e&&(f.x-=e*Math.sin(f.rotate||0),f.y+=e*Math.cos(f.rotate||0)),f}u+=_._i8,r=_}else r=_}function Pt(t,e,i,n,r,s,o,a){if(t<=e._l1)return Ue(i,n,r,s,t,t);if(t>=e._i8)return t-=e._i8,Ue(e._p2x,e._p2y,o,a,t,t);if(t-=e._l1,e._o){var h=t/e._r;e._CCW&&(h=-h);var l=lt(e._p1x,e._p1y,h,e._o.x,e._o.y);return l.rotate+=e._lg1||0,l.rotate+=Math.PI,l}return Ue(e._p1x,e._p1y,e._p2x,e._p2y,t,t)}function W(t,e,i){var n,r,s;0==t._lg?(n=-1,s=0,r=e):0==t._lc?(n=0,s=1,r=i):(n=-1/t._lg,r=(t._lg-n)*e+t._le,s=1);var o=new rn;return o._lg=n,o._le=r,o._lc=s,o._l6=e,o._la=i,o}function Nt(t){return 0>(t%=2*Math.PI)&&(t+=2*Math.PI),t}function Mt(t,e,i,n){return Math.atan2(n-e,i-t)}function Bt(t){if(!t)return null;if(t instanceof Fr)return Tr;if(t.draw instanceof Function)return yr;if(R(t)){var e=function(t){var e=dr.exec(t);if(e)return e[1];var i=t.lastIndexOf(".");return i>=0&&i<t.length-1?t.substring(i+1):void 0}(t);if(e){if(!Gi&&fr.test(e))return pr;if(gr.test(e))return Er}return vr}}function kt(t,e,i){if(this._k6=Bt(t),!this._k6)throw new Error("the image format is not supported",t);this._k7=t,this._lgu=e,this._8p=i,this.width=e||Ji.IMAGE_WIDTH,this.height=i||Ji.IMAGE_HEIGHT,this._ii={}}function Gt(t,e,i,n){return e?(mr[t]=new kt(e,i,n),t):void delete mr[t]}function Ft(t){if(t._jl)return t._jl;if(!R(t)&&!t.name)return t._jl=new kt(t);var e=t.name||t;return e in mr?mr[e]:mr[e]=new kt(t)}function $t(t){return t in mr}function jt(t,e,i){i=i||{};var n=t.getBounds(i.lineWidth);if(!n.width||!n.height)return!1;var r=e.getContext("2d"),s=e.ratio||1,o=i.scaleMode||"full.uniform",a=/full/i.test(o),h=/uniform/i.test(o),l=1,_=1;if(a){var u,c,d,f,g=e.width,v=e.height,E=i.padding,p=0,y=0;if(E)C(E)?u=c=d=f=E:(u=E.top||0,c=E.bottom||0,d=E.left||0,f=E.right||0),g-=d+f,v-=u+c,p+=d,y+=u;l=g/n.width,_=v/n.height,h&&(l>_?(p+=(g-_*n.width)/2,l=_):_>l&&(y+=(v-l*n.height)/2,_=l)),(p||y)&&r.translate(p,y)}r.translate(-n.x*l,-n.y*_),t.draw(r,s,i,l,_,!0)}function zt(t,e,n,r){var s=t.length;if(s&&!(0>s)){r=r||1;for(var o,a,h,l=[],_=0;_++<s;)if((o=t.getLocation(_,0))&&nn(e,n,o.x,o.y)<=r){a=_,h=o.rotate;break}if(a!==i){for(var u,c,d=0,f=(_=0,t._ep.length);f>_;_++){if(o=t._ep[_],!u&&(d+=o._i8||0)>a)if(u=!0,o.type==Dr||o.type==Br)l.push(new kr(Dr,[e,n]));else{var g=Math.max(10,o._i8/6),v=g*Math.sin(h),E=g*Math.cos(h);if(o.type==Nr){var p=o.points[0],y=o.points[1];if(c)(T=new rn(e,n,e+E,n+v)._3j(new rn(c.lastPoint.x,c.lastPoint.y,o.points[0],o.points[1]))).x!==i&&(p=T.x,y=T.y);l.push(new kr(Nr,[p,y,e-E,n-v,e,n]))}else l.push(new kr(Pr,[e-E,n-v,e,n]));if(o.points)if(o.type==Nr){o.points[0]=e+E,o.points[1]=n+v,(T=new rn(e,n,e+E,n+v)._3j(new rn(o.points[2],o.points[3],o.points[4],o.points[5]))).x!==i&&(o.points[2]=T.x,o.points[3]=T.y)}else if(o.type==Pr){var T;o.type=Nr,o.points=[e+E,n+v].concat(o.points),(T=new rn(e,n,e+E,n+v)._3j(new rn(o.points[2],o.points[3],o.points[4],o.points[5]))).x!==i&&(o.points[2]=T.x,o.points[3]=T.y)}else o.type==Dr&&(o.type=Pr,o.points=[e+E,n+v].concat(o.points),_==f-1&&(o.invalidTerminal=!0))}l.push(o),c=o}return l}}}function Yt(t,e,i){this._15(t,e,i)}function Ht(t,e,i){return new Yt(t,e,i)}function Ut(t,e,i){return i||(i=Ji.BLEND_MODE),i==sr.BLEND_MODE_MULTIPLY?t*e:i==sr.BLEND_MODE_DARKEN?Math.min(t,e):i==sr.BLEND_MODE_COLOR_BURN?1-(1-e)/t:i==sr.BLEND_MODE_LINEAR_BURN?t+e-1:i==sr.BLEND_MODE_LIGHTEN?Math.max(t,e):i==sr.BLEND_MODE_SCREEN?t+e-t*e:e}function Wt(t,e,i,n){return 1>i&&(i=1),function(t,e,i,n,r){i=Math.round(i)||1,n=Math.round(n)||1;var s=gt(i,n);s.setTransform(1,0,0,1,-t,-e),r.draw(s);var o=Et(s,0,0,i,n);if(!o)return!1;for(var a=(o=o.data).length/4;a-- >0;)if(o[4*a-1]>Gr)return!0;return!1}(t-i,e-i,2*i,2*i,n)}function Vt(t,e,i,n,r,s,o,a,h){if(q(t,e,i,n,a,h))return null;var l,_,u=new kr(Dr,[t+i-r,e]),c=new kr(Pr,[t+i,e,t+i,e+s]),d=new kr(Dr,[t+i,e+n-s]),f=new kr(Pr,[t+i,e+n,t+i-r,e+n]),g=new kr(Dr,[t+r,e+n]),v=new kr(Pr,[t,e+n,t,e+n-s]),E=new kr(Dr,[t,e+s]),p=new kr(Pr,[t,e,t+r,e]),y=(new kr(Br),[u,c,d,f,g,v,E,p]),T=new on(t+r,e+s,i-r-r,n-s-s);t>a?(l=ln,_=5):a>t+i?(l=un,_=1):(l=_n,_=0),e>h?(cn,l==ln&&(_=7)):h>e+n?(fn,l==un?_=3:l==_n&&(_=4)):(dn,l==ln?_=6:l==un&&(_=2));var m=function(t,e,i,n,r,s,o,a,h,l,_){var u=a/2;switch(s=s||1e-4,o=o||1e-4,t){case 7:var c=[e,i+o,e,i,e+s,i],d=e+s,f=i+o;return Xt(t,c,d,f,e,i,n,r,s,o,a,h,l,_);case 5:return Xt(t,c=[e+s,i+r,e,i+r,e,i+r-o],d=e+s,f=i+r-o,e,i,n,r,s,o,a,h,l,_);case 3:return Xt(t,c=[e+n,i+r-o,e+n,i+r,e+n-s,i+r],d=e+n-s,f=i+r-o,e,i,n,r,s,o,a,h,l,_);case 1:return Xt(t,c=[e+n-s,i,e+n,i,e+n,i+o],d=e+n-s,f=i+o,e,i,n,r,s,o,a,h,l,_);case 0:return function(t,e,i,n,r,s,o,a,h,l){var _,u;if(h-a>=e+s)(_={y:i,x:h-a})._knNO=0;else{_={y:i+o,x:Math.max(e,h-a)};var c=[e,i+o,e,i,e+s,i],d=new rn(h,l,_.x,_.y);if(_=d._$d(c)){D(_)&&(_=_[0].t>_[1].t?_[0]:_[1]);var f=qt(c,[_]);(f=f[0])&&(_._kn=new kr(Pr,f.slice(2))),_._knNO=7}else(_={y:i,x:e+s})._knNO=0}if(e+n-s>=h+a)(u={y:i,x:h+a})._knNO=0;else{u={y:i+o,x:Math.min(e+n,h+a)};var g=[e+n-s,i,e+n,i,e+n,i+o],d=new rn(h,l,u.x,u.y);if(u=d._$d(g)){D(u)&&(u=u[0].t<u[1].t?u[0]:u[1]);var f=qt(g,[u]);f&&f[f.length-1]&&(u._kn=new kr(Pr,f[f.length-1].slice(2))),u._knNO=1}else(u={y:i,x:e+n-s})._knNO=0}return[_,u]}(0,e,i,n,0,s,o,u,h,l);case 2:return function(t,e,i,n,r,s,o,a,h,l){var _,u;if(l-a>=i+o)(_={x:e+n,y:l-a})._knNO=2;else{_={x:e+n-s,y:Math.max(i,l-a)};var c=[e+n-s,i,e+n,i,e+n,i+o],d=new rn(h,l,_.x,_.y);if(_=d._$d(c)){D(_)&&(_=_[0].t>_[1].t?_[0]:_[1]);var f=qt(c,[_]);(f=f[0])&&(_._kn=new kr(Pr,f.slice(2))),_._knNO=1}else(_={x:e+n,y:i+o})._knNO=2}if(i+r-o>=l+a)(u={x:e+n,y:l+a})._knNO=2;else{u={x:e+n-s,y:Math.min(i+r,l+a)};var g=[e+n,i+r-o,e+n,i+r,e+n-s,i+r],d=new rn(h,l,u.x,u.y);if(u=d._$d(g)){D(u)&&(u=u[0].t<u[1].t?u[0]:u[1]);var f=qt(g,[u]);f[1]&&(u._kn=new kr(Pr,f[1].slice(2))),u._knNO=3}else(u={x:e+n,y:i+r-o})._knNO=2}return[_,u]}(0,e,i,n,r,s,o,u,h,l);case 4:return function(t,e,i,n,r,s,o,a,h,l){var _,u;if(h-a>=e+s)(u={y:i+r,x:h-a})._knNO=4;else{u={y:i+r-o,x:Math.max(e,h-a)};var c=[e+s,i+r,e,i+r,e,i+r-o],d=new rn(h,l,u.x,u.y);if(u=d._$d(c)){D(u)&&(u=u[0].t<u[1].t?u[0]:u[1]);var f=qt(c,[u]);(f=f[f.length-1])&&(u._kn=new kr(Pr,f.slice(2))),u._knNO=5}else(u={y:i+r,x:e+s})._knNO=4}if(e+n-s>=h+a)(_={y:i+r,x:h+a})._knNO=4;else{_={y:i+r-o,x:Math.min(e+n,h+a)};var g=[e+n,i+r-o,e+n,i+r,e+n-s,i+r],d=new rn(h,l,_.x,_.y);if(_=d._$d(g)){D(_)&&(_=_[0].t>_[1].t?_[0]:_[1]);var f=qt(g,[_]);f[0]&&(_._kn=new kr(Pr,f[0].slice(2))),_._knNO=3}else(_={y:i+r,x:e+n-s})._knNO=4}return[_,u]}(0,e,i,n,r,s,o,u,h,l);case 6:return function(t,e,i,n,r,s,o,a,h,l){var _,u;if(l-a>=i+o)(u={x:e,y:l-a})._knNO=6;else{u={x:e+s,y:Math.max(i,l-a)};var c=[e,i+o,e,i,e+s,i],d=new rn(h,l,u.x,u.y);if(u=d._$d(c)){D(u)&&(u=u[0].t<u[1].t?u[0]:u[1]);var f=qt(c,[u]);(f=f[f.length-1])&&(u._kn=new kr(Pr,f.slice(2)))}else u={x:e,y:i+o};u._knNO=7}if(i+r-o>=l+a)(_={x:e,y:l+a})._knNO=6;else{_={x:e+s,y:Math.min(i+r,l+a)};var g=[e+s,i+r,e,i+r,e,i+r-o],d=new rn(h,l,_.x,_.y);if(_=d._$d(g)){D(_)&&(_=_[0].t>_[1].t?_[0]:_[1]);var f=qt(g,[_]);f[0]&&(_._kn=new kr(Pr,f[0].slice(2))),_._knNO=5}else(_={x:e,y:i+r-o})._knNO=6}return[_,u]}(0,e,i,0,r,s,o,u,h,l)}}(_,t,e,i,n,r,s,o,a,h,T),O=m[0],w=m[1],b=new Fr,L=b._ep;L.push(new kr(Rr,[O.x,O.y])),L.push(new kr(Dr,[a,h])),L.push(new kr(Dr,[w.x,w.y])),w._kn&&(L.push(w._kn),w._knNO++);for(var A=w._knNO%8,S=O._knNO;L.push(y[A]),++A,(A%=8)!=S;);return O._kn&&L.push(O._kn),b.closePath(),b}function Xt(t,e,n,r,s,o,a,h,l,_,u,c,d,f){var g=new rn(c,d,n,r),v=new rn(e[0],e[1],e[4],e[5])._3j(g,u),E=v[0],p=v[1];if(E._rest!==i){E._knNO=(t-1)%8,p._knNO=(t+1)%8;var y=E._rest;7==t?(E.y=o+_+Math.min(f.height,y),p.x=s+l+Math.min(f.width,y)):5==t?(E.x=s+l+Math.min(f.width,y),p.y=o+h-_-Math.min(f.height,y)):3==t?(E.y=o+h-_-Math.min(f.height,y),p.x=s+a-l-Math.min(f.width,y)):1==t&&(E.x=s+a-l-Math.min(f.width,y),p.y=o+_+Math.min(f.height,y))}else{g._l2(g._l6,g._la,E.x,E.y),E=g._$d(e),g._l2(g._l6,g._la,p.x,p.y);var T=qt(e,[E,p=g._$d(e)]),m=T[0],O=T[2];E._knNO=t,p._knNO=t,E._kn=new kr(Pr,m.slice(2)),p._kn=new kr(Pr,O.slice(2))}return[E,p]}function qt(t,e){for(var n,r,s,o,a,h,l=t[0],_=t[1],u=t[2],c=t[3],d=t[4],f=t[5],g=[],v=0;v<e.length;v++)0!=(h=(a=e[v]).t)&&1!=h?(n=l+(u-l)*h,r=_+(c-_)*h,s=u+(d-u)*h,o=c+(f-c)*h,g.push([l,_,n,r,a.x,a.y]),l=a.x,_=a.y,u=s,c=o):g.push(null);return s!==i&&g.push([a.x,a.y,s,o,d,f]),g}function Kt(t){return this.$layoutByAnchorPoint&&this._9y&&(t.x-=this._9y.x,t.y-=this._9y.y),this.$rotate&&_t(t,this.$rotate),t.x+=this.$offsetX||0,t.y+=this.$offsetY||0,this.$rotatable&&this.$_hostRotate?_t(t,this.$_hostRotate):t}function Zt(t){return this.$rotatable&&this.$_hostRotate&&_t(t,-this.$_hostRotate),t.x-=this.$offsetX||0,t.y-=this.$offsetY||0,this.$rotate&&_t(t,-this.$rotate),this.$layoutByAnchorPoint&&this._9y&&(t.x+=this._9y.x,t.y+=this._9y.y),t}function Jt(){var t=this.$invalidateSize;this.$invalidateSize&&(this.$invalidateSize=!1,this.$invalidateAnchorPoint=!0,this._7d.setByRect(this._ij),this.$padding&&this._7d.grow(this.$padding),this.$border&&this._7d.grow(this.$border));var e=this._$o();if(e)var i=this.showPointer&&this.$pointerWidth;return this.$invalidateAnchorPoint&&this.$layoutByAnchorPoint&&(this.$invalidateAnchorPoint=!1,i&&(t=!0),this._9y=Z(this.$anchorPosition,this._7d.width,this._7d.height),this._9y.x+=this._7d.x,this._9y.y+=this._7d.y),e?(t&&(this._leackgroundGradientInvalidateFlag=!0,function(t){var e=this._7d.x+this.$border/2,i=this._7d.y+this.$border/2,n=this._7d.width-this.$border,r=this._7d.height-this.$border,s=0,o=0;if(this.$borderRadius&&(C(this.$borderRadius)?s=o=this.$borderRadius:(s=this.$borderRadius.x||0,o=this.$borderRadius.y||0),s=Math.min(s,n/2),o=Math.min(o,r/2)),t&&(this._pointerX=this._9y.x-this.$offsetX+this.$pointerX,this._pointerY=this._9y.y-this.$offsetY+this.$pointerY,!this._7d.intersectsPoint(this._pointerX,this._pointerY))){var a=new jr(e,i,n,r,s,o,this.$pointerWidth,this._pointerX,this._pointerY);return this._kbShape=a._kn,this._kbShape.bounds.set(e,i,n,r),void(this.__kuPointer=!0)}this._kbShape&&this._kbShape.clear(),this._kbShape=gs.getRect(e,i,n,r,s,o,this._kbShape),this._kbShape.bounds.set(e,i,n,r)}.call(this,i)),this._leackgroundGradientInvalidateFlag&&(this._leackgroundGradientInvalidateFlag=!1,this._leackgroundGradient=this.backgroundGradient&&this._kbShape&&this._kbShape.bounds?Or.prototype.generatorGradient.call(this.backgroundGradient,this._kbShape.bounds):null),t):(this.__kuPointer=!1,t)}function Qt(t,e,i,n){return n&&(t.width<0||t.height<0)?(t.x=e,t.y=i,void(t.width=t.height=0)):(e<t.x?(t.width+=t.x-e,t.x=e):e>t.x+t.width&&(t.width=e-t.x),void(i<t.y?(t.height+=t.y-i,t.y=i):i>t.y+t.height&&(t.height=i-t.y)))}function te(t,e,n){var r,s=t.position,o=t.layoutByPath===i?this.layoutByPath:t.layoutByPath;return this.$data instanceof Fr&&o?((r=cr._le1(s,this.$data,this.lineWidth,e,n)).x*=this._ia,r.y*=this._ic):((r=Z(s,this._7d.width,this._7d.height)).x+=this._7d.x,r.y+=this._7d.y),Kt.call(this,r)}function ee(t,e){if(e)if(e._7d.isEmpty())t.$x=e.$x,t.$y=e.$y;else{var i=te.call(e,t);t.$x=i.x,t.$y=i.y,t._hostRotate=i.rotate}else t.$x=0,t.$y=0;t.$invalidateRotate&&Hr.call(t)}function ie(t){if(t.lineDash===i){var e,n;if(t.setLineDash)e=t.getLineDash,n=t.setLineDash;else{var r;if(t.mozDash!==i)r="mozDash";else{if(t.webkitLineDash===i)return!1;r="webkitLineDash"}n=function(t){this[r]=t},e=function(){return this[r]}}$(t,"lineDash",{get:function(){return e.call(this)},set:function(t){n.call(this,t)}})}if(t.lineDashOffset===i){var s;if(t.mozDashOffset!==i)s="mozDashOffset";else{if(t.webkitLineDashOffset===i)return;s="webkitLineDashOffset"}$(t,"lineDashOffset",{get:function(){return this[s]},set:function(t){this[s]=t}})}}function ne(t,e,i,n,r){var s,o,a,h,l,_,u,c,d=function(t){return function(e){t(e)}},f=function(){if(_){var t=_.getImageData(0,0,s.width,s.height),i={data:t,_pixels:Ht(t.data,s.width,s.height),delay:a};r.call(e,i)}},g=function(){},v={hdr:d(function(t){s=t,u||(u=ft()),u.width=s.width,u.height=s.height,e.width=s.width,e.height=s.height}),gce:d(function(t){f(),o=null,a=null,h=l,l=null,_=null,o=t.transparencyGiven?t.transparencyIndex:null,a=10*t.delayTime,l=t.disposalMethod}),com:d(g),app:{NETSCAPE:d(g)},img:d(function(t){_||(_=u.getContext("2d"));var e=t.lctFlag?t.lct:s.gct,i=_.getImageData(t.leftPos,t.topPos,t.width,t.height);t.pixels.forEach(function(t,n){o!==t?(i.data[4*n+0]=e[t][0],i.data[4*n+1]=e[t][1],i.data[4*n+2]=e[t][2],i.data[4*n+3]=255):(2===h||3===h)&&(i.data[4*n+3]=0)}),_.putImageData(i,t.leftPos,t.topPos)}),eof:function(){f(),i.call(e)}},E=new XMLHttpRequest;Gi||E.overrideMimeType("text/plain; charset=x-user-defined"),E.onload=function(){c=new Xr(E.responseText);try{qr(c,v)}catch(t){n.call(e,"parse")}},E.onerror=function(){n.call(e,"xhr")},E.open("GET",t,!0),E.send()}function l(t,e){function i(t,i){for(var n=t.length,r=i.length,s=n+r,o=new Array(s),a=0,h=0,l=0;s>l;)o[l++]=a===n?i[h++]:h===r||e(t[a],i[h])<=0?t[a++]:i[h++];return o}return function t(e){var n=e.length,r=Math.ceil(n/2);return 1>=n?e:i(t(e.slice(0,r)),t(e.slice(r)))}(t)}function re(t){es||(es="imageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"imageSmoothingEnabled":"mozImageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"mozImageSmoothingEnabled":"msImageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"msImageSmoothingEnabled":"webkitImageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"webkitImageSmoothingEnabled":"imageSmoothingEnabled"),t[es]=!1}function se(t,e,i,n,r){n=G(e+n)-(e=k(e)),r=G(i+r)-(i=k(i)),t.clearRect(e,i,n,r),t.rect(e,i,n,r)}function k(t){return Math.floor(t)}function G(t){return Math.ceil(t)}function oe(t){var e=[];return t.forEach(function(t){e.push(-t)}),e}function ae(t){return 0>(t%=ss)&&(t+=ss),t}function he(t,e,i,n,r,s,o,a){var h=((t*n-e*i)*(r-o)-(t-i)*(r*a-s*o))/((t-i)*(s-a)-(e-n)*(r-o)),l=((t*n-e*i)*(s-a)-(e-n)*(r*a-s*o))/((t-i)*(s-a)-(e-n)*(r-o));if(isNaN(h)||isNaN(l))return!1;if(t>=i){if(!(h>=i&&t>=h))return!1}else if(!(h>=t&&i>=h))return!1;if(e>=n){if(!(l>=n&&e>=l))return!1}else if(!(l>=e&&n>=l))return!1;if(r>=o){if(!(h>=o&&r>=h))return!1}else if(!(h>=r&&o>=h))return!1;if(s>=a){if(!(l>=a&&s>=l))return!1}else if(!(l>=s&&a>=l))return!1;return!0}function le(t,e,i,n){return[t*n-e*i,t*i+e*n]}function _e(t,e,i){if((i=i||e.toAgent)==t)return!1;var n=t.getEdgeBundle(i);return n||(n=new Eo(t,i),t._linkedNodes[i.id]=n),n._hb(e,t)}function ue(t,e,i){if((i=i||e.toAgent)==t)return!1;var n=t.getEdgeBundle(i);return n?n._ler(e,t):void 0}function ce(t,e,n){return n===i&&(n=e.toAgent),n!=t?(t._7h||(t._7h=new Qi),!1!==t._7h.add(e)&&void t._8m++):void 0}function de(t,e,i){return!(!t._7h||!1===t._7h.remove(e))&&(t._8m--,void ue(t,e,i))}function fe(t,e){return e.fromAgent!=t?(t._99||(t._99=new Qi),!1!==t._99.add(e)&&void t._9w++):void 0}function ge(t,e){return!(!t._99||!1===t._99.remove(e))&&(t._9w--,void ue(e.fromAgent,e,t))}function ve(t,e){if(e===i&&(e=t instanceof cs),e){if(t.isInvalid())return null;var n=ve(t.from,!1);if(t.isLooped())return n;for(var r=ve(t.to,!1);null!=n&&null!=r;){if(n==r)return n;if(n.isDescendantOf(r))return r;if(r.isDescendantOf(n))return n;n=ve(n,!1),r=ve(r,!1)}return null}for(var s=t.parent;null!=s;){if(s._gy())return s;s=s.parent}return null}function Ee(t,e){e.parent?e.parent.setChildIndex(e,e.parent.childrenCount-1):t.roots.setIndex(e,t.roots.length-1)}function pe(t,e){e.parent?e.parent.setChildIndex(e,0):t.roots.setIndex(e,0)}function ye(t,e){if(e instanceof cs)e.isInvalid()||function(t,e){var i=e.fromAgent;if(e.isLooped())Ee(t,i);else{var n=e.toAgent;Ee(t,i),Ee(t,n)}}(t,e);else for(Ee(t,e);e=e.parent;)Ee(t,e)}function Te(t,e){if(e instanceof cs)e.isInvalid()||function(t,e){var i=e.fromAgent;if(e.isLooped())pe(t,i);else{var n=e.toAgent;pe(t,i),pe(t,n)}}(t,e);else for(pe(t,e);e=e.parent;)pe(t,e)}function me(t,e){return e=e||new Qi,t.forEachEdge(function(t){e.add({id:t.id,edge:t,fromAgent:t.$from._d4,toAgent:t.$to._d4})}),t.forEachChild(function(t){t instanceof ds&&me(t,e)}),e}function Oe(t,e,i){if(t._fp)for(var n=t._fp;n;){if(!1===e.call(i,n))return!1;n=n._hr}}function we(t,e,i){if(t._h1)for(var n=t._h1;n;){if(!1===e.call(i,n))return!1;n=n._j2}}function be(t,e,n,r,s,o,a){return o||a?(o=o||0,a=a===i?o:a||0,o=Math.min(o,r/2),a=Math.min(a,s/2),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadTo(e+r,n,e+r,n+a),t.lineTo(e+r,n+s-a),t.quadTo(e+r,n+s,e+r-o,n+s),t.lineTo(e+o,n+s),t.quadTo(e,n+s,e,n+s-a),t.lineTo(e,n+a),t.quadTo(e,n,e+o,n),t.closePath(),t):(t.moveTo(e,n),t.lineTo(e+r,n),t.lineTo(e+r,n+s),t.lineTo(e,n+s),t.closePath(),t)}function Le(t,e,i,n,r){e instanceof xt&&(n=e.width,r=e.height,i=e.cy-r/2,e=e.cx-n/2);var s=.5522848,o=n/2*s,a=r/2*s,h=e+n,l=i+r,_=e+n/2,u=i+r/2;return t.moveTo(e,u),t.curveTo(e,u-a,_-o,i,_,i),t.curveTo(_+o,i,h,u-a,h,u),t.curveTo(h,u+a,_+o,l,_,l),t.curveTo(_-o,l,e,u+a,e,u),t}function Ae(t,e,i,n,r,s){return t.moveTo(e,i),t.lineTo(e+n,i+r/2),t.lineTo(e,i+r),s||(t.lineTo(e+.25*n,i+r/2),t.closePath()),t}function Se(t,e,i,n,r){if(!t||3>t)throw new Error("edge number must greater than 2");t|=0,n=n||50,r=r||0,e=e||0,i=i||0;for(var s,o,a=0,h=2*Math.PI/t,l=new Fr;t>a;)s=e+n*Math.cos(r),o=i+n*Math.sin(r),a?l.lineTo(s,o):l.moveTo(s,o),++a,r+=h;return l.closePath(),l}function Ie(){y(this,Ie,arguments),this.busLayout=!0}function xe(){y(this,xe),this._$r=new bn}function Ce(){y(this,Ce,arguments),this.$image=null}function Re(t,e,i,n){return t[e]=i,n?{get:function(){return this[e]},set:function(t){if(t!==this[e]){this[e]=t,this._lg0,this._1c=!0;for(var i=n.length;--i>=0;)this[n[i]]=!0}}}:{get:function(){return this[e]},set:function(t){t!==this[e]&&(this[e]=t)}}}function De(t,e){var i={},n={};for(var r in e){var s=e[r];s.validateFlags&&s.validateFlags.forEach(function(t,e,i){i[e]="$invalidate"+t,n[t]=!0}),i[r]=Re(t,"$"+r,s.value,s.validateFlags)}for(var o in n)t["$invalidate"+o]=!0;Object.defineProperties(t,i)}function Pe(){ps.forEach(function(t){this[t]={}},this)}function Ne(t,e,i,n){return n==sr.PROPERTY_TYPE_ACCESSOR?void(t[i]=e):n==sr.PROPERTY_TYPE_CLIENT?void t.set(i,e):n==sr.PROPERTY_TYPE_STYLE&&void t.setStyle(i,e)}function Me(){y(this,Me,arguments)}function Be(){y(this,Be,arguments)}function ke(t,e,i,n){var r=function(t,e,i){if(null!=t){if(t==sr.EDGE_TYPE_ELBOW_HORIZONTAL||t==sr.EDGE_TYPE_ORTHOGONAL_HORIZONTAL||t==sr.EDGE_TYPE_HORIZONTAL_VERTICAL||t==sr.EDGE_TYPE_EXTEND_LEFT||t==sr.EDGE_TYPE_EXTEND_RIGHT)return!0;if(t==sr.EDGE_TYPE_ELBOW_VERTICAL||t==sr.EDGE_TYPE_ORTHOGONAL_VERTICAL||t==sr.EDGE_TYPE_VERTICAL_HORIZONTAL||t==sr.EDGE_TYPE_EXTEND_TOP||t==sr.EDGE_TYPE_EXTEND_BOTTOM)return!1}var n=function(t,e){return Math.max(t.x+t.width,e.x+e.width)-Math.min(t.x,e.x)-t.width-e.width}(e,i),r=function(t,e){return Math.max(t.y+t.height,e.y+e.height)-Math.min(t.y,e.y)-t.height-e.height}(e,i);return n>=r}(t,e,i),s=[];(function(t){return t&&(t==sr.EDGE_TYPE_ELBOW||t==sr.EDGE_TYPE_ELBOW_HORIZONTAL||t==sr.EDGE_TYPE_ELBOW_VERTICAL)})(t)?function(t,e,i,n,r){t?function(t,e,i,n){var r=e.x+e.width<t.x,s=t.x+t.width<e.x,o=r?t.x:t.x+t.width,a=t.y+t.height/2,h=s?e.x:e.x+e.width,l=e.y+e.height/2,_=n,u=r?-_:_,c=new en(o+u,a),d=new en(h+(u=s?-_:_),l);if(r==s){var f=r?Math.min(o,h)-n:Math.max(o,h)+n;i.push(new en(f,a)),i.push(new en(f,l))}else if(c.x<d.x==r){var g=a+(l-a)/2;i.push(c),i.push(new en(c.x,g)),i.push(new en(d.x,g)),i.push(d)}else i.push(c),i.push(d)}(e,i,n,r):function(t,e,i,n){var r=e.y+e.height<t.y,s=t.y+t.height<e.y,o=t.x+t.width/2,a=r?t.y:t.y+t.height,h=e.x+e.width/2,l=s?e.y:e.y+e.height,_=n,u=r?-_:_,c=new en(o,a+u),d=new en(h,l+(u=s?-_:_));if(r==s){var f=r?Math.min(a,l)-n:Math.max(a,l)+n;i.push(new en(o,f)),i.push(new en(h,f))}else if(c.y<d.y==r){var g=o+(h-o)/2;i.push(c),i.push(new en(g,c.y)),i.push(new en(g,d.y)),i.push(d)}else i.push(c),i.push(d)}(e,i,n,r)}(r,e,i,s,n.getStyle(ys.EDGE_EXTEND)):(!function(t,e,i,n,r,s){var o=s.getStyle(ys.EDGE_CONTROL_POINT),a=null==o;if(null!=o){var h=(new on).union(e).union(i);h.intersects(o)||(r=function(t,e,i,n,r,s){return!(i>e&&i-e>n-t&&i-e>t-s||e>r&&e-r>n-t&&e-r>t-s)}(o.x,o.y,h.y,h.x,h.bottom,h.right))}else o=function(t,e,i,n,r){if(t==sr.EDGE_TYPE_HORIZONTAL_VERTICAL||t==sr.EDGE_TYPE_VERTICAL_HORIZONTAL)return new en(n.x+n.width/2,n.y+n.height/2);var s;if(function(t){return null!=t&&(t==sr.EDGE_TYPE_EXTEND_TOP||t==sr.EDGE_TYPE_EXTEND_LEFT||t==sr.EDGE_TYPE_EXTEND_BOTTOM||t==sr.EDGE_TYPE_EXTEND_RIGHT)}(t)){var o=Math.min(i.y,n.y),a=Math.min(i.x,n.x),h=Math.max(i.bottom,n.bottom),l=Math.max(i.right,n.right);if(s=r.getStyle(ys.EDGE_EXTEND),t==sr.EDGE_TYPE_EXTEND_TOP)return new en((a+l)/2,o-s);if(t==sr.EDGE_TYPE_EXTEND_LEFT)return new en(a-s,(o+h)/2);if(t==sr.EDGE_TYPE_EXTEND_BOTTOM)return new en((a+l)/2,h+s);if(t==sr.EDGE_TYPE_EXTEND_RIGHT)return new en(l+s,(o+h)/2)}var _=Ge(t,r);if((s=_?Fe(t,e,i,n,r.getStyle(ys.EDGE_SPLIT_PERCENT)):r.getStyle(ys.EDGE_SPLIT_VALUE))==Number.NEGATIVE_INFINITY||s==Number.POSITIVE_INFINITY)return new en(n.x+n.width/2,n.y+n.height/2);if(0==s)return new en(i.x+i.width/2,i.y+i.height/2);if(e){var u=i.x+i.right<n.x+n.right;return new en(je(u,s,i.x,i.width),i.y+i.height/2)}var c=i.y+i.bottom<n.y+n.bottom;return new en(i.x+i.width/2,je(c,s,i.y,i.height))}(t,r,e,i,s);r?function(t,e,i,n,r){var s=Math.max(t.x,e.x),o=Math.min(t.x+t.width,e.x+e.width),a=null!=i?i.x:o+(s-o)/2,h=t.y+t.height/2,l=e.y+e.height/2;if(0==r&&null!=i&&(i.y>=t.y&&i.y<=t.y+t.height&&(h=i.y),i.y>=e.y&&i.y<=e.y+e.height&&(l=i.y)),ze(e,a,h)||ze(t,a,h)||n.push(new en(a,h)),ze(e,a,l)||ze(t,a,l)||n.push(new en(a,l)),0==n.length)if(null!=i)ze(e,a,i.y)||ze(t,a,i.y)||n.push(new en(a,i.y));else{var _=Math.max(t.y,e.y),u=Math.min(t.y+t.height,e.y+e.height);n.push(new en(a,_+(u-_)/2))}}(e,i,o,n,a):function(t,e,i,n,r){var s=Math.max(t.y,e.y),o=Math.min(t.y+t.height,e.y+e.height),a=null!=i?i.y:o+(s-o)/2,h=t.x+t.width/2,l=e.x+e.width/2;if(0==r&&null!=i&&(i.x>=t.x&&i.x<=t.x+t.width&&(h=i.x),i.x>=e.x&&i.x<=e.x+e.width&&(l=i.x)),ze(e,h,a)||ze(t,h,a)||n.push(new en(h,a)),ze(e,l,a)||ze(t,l,a)||n.push(new en(l,a)),0==n.length)if(null!=i)ze(e,i.x,a)||ze(t,i.x,a)||n.push(new en(i.x,a));else{var _=Math.max(t.x,e.x),u=Math.min(t.x+t.width,e.x+e.width);n.push(new en(_+(u-_)/2,a))}}(e,i,o,n,a)}(t,e,i,s,r,n),0==(Ge(t,n)?Fe(t,r,e,i,n.getStyle(ys.EDGE_SPLIT_PERCENT)):n.getStyle(ys.EDGE_SPLIT_VALUE))&&(r=!r));return s}function Ge(t,e){return e.getStyle(ys.EDGE_SPLIT_BY_PERCENT)}function Fe(t,e,i,n,r){return function(t,e,i,n){return e?$e(t,i.x,i.right,n.x,n.right):$e(t,i.y,i.bottom,n.y,n.bottom)}(r,e,i,n)*r}function $e(t,e,i,n,r){var s=function(t,e,i,n){return Math.max(e,n)-Math.min(t,i)-(e-t+n-i)}(e,i,n,r),o=n+r>e+i;if(s>0){if(1==t)return s+(r-n)/2;if(t>=0&&1>t)return s;if(0>t)return o?n-e:i-r}return Math.abs(o&&t>0||!o&&0>t?i-r:e-n)}function je(t,e,i,n){return t==e>0?i+n+Math.abs(e):i-Math.abs(e)}function ze(t,e,i){return e>=t.x&&e<=t.right&&i>=t.y&&i<=t.bottom}function Ye(t,e){var i,n;e&&e.width&&e.height?(i=e.width,n=e.height):i=n=isNaN(e)?Ji.ARROW_SIZE:e;var r=gs.getShape(t,-i,-n/2,i,n);return r||((r=new Fr).moveTo(-i,-n/2),r.lineTo(0,0),r.lineTo(-i,n/2)),r}function He(t,e){var i=Math.sin(e),n=Math.cos(e),r=t.x,s=t.y;return t.x=r*n-s*i,t.y=r*i+s*n,t}function Ue(t,e,i,n,r,s){var o=Math.atan2(n-e,i-t),a=new en(r,s);return a.rotate=o,He(a,o),a.x+=t,a.y+=e,a}function We(t,e,n,r,s){e=V(r,e.x,e.y,n.x,n.y),n=V(s,n.x,n.y,e.x,e.y);var o=Math.PI/2+Math.atan2(n.y-e.y,n.x-e.x),a=t*Math.cos(o),h=t*Math.sin(o),l=n.x-e.x,_=n.y-e.y,u=e.x+.25*l,c=e.y+.25*_,d=e.x+.75*l,f=e.y+.75*_;return[new kr(Nr,[u+a,c+h,d+a,f+h,i,i])]}function Ve(t,e,n){if(f(t,new kr(Rr,[e.x,e.y]),0),n){if(t.length>1){var r=t[t.length-1];if(Pr==r.type&&(r.invalidTerminal||r.points[2]===i||null===r.points[2]))return r.points[2]=n.x,r.points[3]=n.y,void(r.invalidTerminal=!0);if(Nr==r.type&&(r.invalidTerminal||r.points[4]===i||null===r.points[4]))return r.points[4]=n.x,r.points[5]=n.y,void(r.invalidTerminal=!0)}t.push(new kr(Dr,[n.x,n.y]))}}function Xe(t,e,n,r,s,o,a,h){var l=a.center,_=h.center,u=t.fromAtEdge,c=t.toAtEdge;if(u||c){var d=n._ep;if(d.length){if(u)qe(r,a,d[0].firstPoint,l,i,i);if(c){var f,g=d[d.length-1],v=g.lastPoint,E=g.points.length,p=v.x===i||v.y===i;E>=4&&(p||h.contains(v.x,v.y))&&(p||(_=v),f=!0,v={x:g.points[E-4],y:g.points[E-3]},h.contains(v.x,v.y)&&(_=v,E>=6?(v={x:g.points[E-6],y:g.points[E-5]},g.points=g.points.slice(0,4),g.type=Pr):1==d.length?(v={x:l.x,y:l.y},g.points=g.points.slice(0,2),g.type=Dr):v=(g=d[d.length-2]).lastPoint)),qe(s,h,v,_,i,i),f&&(E=g.points.length,g.points[E-2]=_.x,g.points[E-1]=_.y,_=null)}}else{var y=Math.atan2(_.y-l.y,_.x-l.x),T=Math.cos(y),m=Math.sin(y);u&&qe(r,a,_,l,T,m),c&&qe(s,h,l,_,-T,-m)}Ve(n._ep,l,_)}else Ve(n._ep,l,_)}function qe(t,e,n,r,s,o){if(s===i){var a=Math.atan2(n.y-r.y,n.x-r.x);s=Math.cos(a),o=Math.sin(a)}for(n={x:n.x,y:n.y},e.contains(n.x,n.y)||(n=V(e,r.x,r.y,n.x,n.y));;){if(!e.contains(n.x,n.y))return r;if(t.hitTest(n.x-s,n.y-o,Ji.LOOKING_EDGE_ENDPOINT_TOLERANCE)){r.x=n.x-s/2,r.y=n.y-o/2;break}n.x-=s,n.y-=o}return r}function Ke(t,e,i,n,r,s,o,a){if(e.hasPathSegments())return e._9c;var h=e.edgeType;if(function(t){return t==sr.EDGE_TYPE_ORTHOGONAL||t==sr.EDGE_TYPE_ORTHOGONAL_HORIZONTAL||t==sr.EDGE_TYPE_HORIZONTAL_VERTICAL||t==sr.EDGE_TYPE_ORTHOGONAL_VERTICAL||t==sr.EDGE_TYPE_VERTICAL_HORIZONTAL||t==sr.EDGE_TYPE_EXTEND_TOP||t==sr.EDGE_TYPE_EXTEND_LEFT||t==sr.EDGE_TYPE_EXTEND_BOTTOM||t==sr.EDGE_TYPE_EXTEND_RIGHT||t==sr.EDGE_TYPE_ELBOW||t==sr.EDGE_TYPE_ELBOW_HORIZONTAL||t==sr.EDGE_TYPE_ELBOW_VERTICAL}(h)){var l=ke(h,i,n,t);if(!l||!l.length)return null;f(l,o,0),l.push(a),h!=sr.EDGE_TYPE_ELBOW&&function(t,e){var i=t.length;if(!(3>i)){var n=e.getStyle(ys.EDGE_CORNER);if(n!=sr.EDGE_CORNER_NONE){var r=e.getStyle(ys.EDGE_CORNER_RADIUS),s=0,o=0;r&&(C(r)?s=o=r:(s=r.x||0,o=r.y||0));for(var a,h,l,_,u=t[0],c=t[1],d=2;i>d;d++){var v=t[d],E=c.x-u.x,p=c.y-u.y,y=v.x-c.x,T=v.y-c.y,m=!p||p>-ur&&ur>p;((!E||E>-ur&&ur>E)&&(!T||T>-ur&&ur>T)||m&&(!y||y>-ur&&ur>y))&&(m?(a=Math.min(2==d?Math.abs(E):Math.abs(E)/2,s),h=Math.min(d==i-1?Math.abs(T):Math.abs(T)/2,o),l=new en(c.x-(E>0?a:-a),c.y),_=new en(c.x,c.y+(T>0?h:-h))):(a=Math.min(d==i-1?Math.abs(y):Math.abs(y)/2,s),h=Math.min(2==d?Math.abs(p):Math.abs(p)/2,o),l=new en(c.x,c.y-(p>0?h:-h)),_=new en(c.x+(y>0?a:-a),c.y)),g(t,c),d--,i--,(l.x!=u.x||l.y!=u.y)&&(f(t,l,d),d++,i++),n==sr.EDGE_CORNER_BEVEL?(f(t,_,d),d++,i++):n==sr.EDGE_CORNER_ROUND&&(f(t,[c,_],d),d++,i++)),u=c,c=v}}}}(l,t);for(var _=[],u=l.length,c=1;u-1>c;c++){var d=l[c];_.push(D(d)?new kr(Pr,[d[0].x,d[0].y,d[1].x,d[1].y]):new kr(Dr,[d.x,d.y]))}return _}if(e.$bundleEnabled){var v=t._25();if(!v)return;return We(v,o,a,i,n)}}function Ze(t,e,i){var n=t.getStyle(ys.EDGE_LOOPED_EXTAND),r=t._25(),s=n+.2*r,o=e.x+e.width-s,a=e.y,h=e.x+e.width,l=e.y+s;n+=r;var _={x:o,y:a},u={x:e.x+e.width+.707*n,y:e.y+-.707*n},c={x:h,y:l},d=_.x,f=u.x,g=c.x,v=_.y,E=u.y,p=c.y,y=((p-v)*(E*E-v*v+f*f-d*d)+(E-v)*(v*v-p*p+d*d-g*g))/(2*(f-d)*(p-v)-2*(g-d)*(E-v)),T=((g-d)*(f*f-d*d+E*E-v*v)+(f-d)*(d*d-g*g+v*v-p*p))/(2*(E-v)*(g-d)-2*(p-v)*(f-d)),m=(s=Math.sqrt((d-y)*(d-y)+(v-T)*(v-T)),Math.atan2(_.y-T,_.x-y)),O=Math.atan2(c.y-T,c.x-y)-m;return 0>O&&(O+=2*Math.PI),function(t,e,i,n,r,s,o,a){var h,l,_,u,c,d,f,g,v,E;if(Math.abs(n)>2*Math.PI&&(n=2*Math.PI),u=Math.ceil(Math.abs(n)/(Math.PI/4)),h=n/u,l=i,u>0){c=t+Math.cos(l)*r,d=e+Math.sin(l)*s,moveTo?a.moveTo(c,d):a.lineTo(c,d);for(var p=0;u>p;p++)_=(l+=h)-h/2,f=t+Math.cos(l)*r,g=e+Math.sin(l)*s,v=t+Math.cos(_)*(r/Math.cos(h/2)),E=e+Math.sin(_)*(s/Math.cos(h/2)),a.quadTo(v,E,f,g)}}(y,T,m,O,s,s,0,i)}function Je(t,e,n,r,s,o){var a=s.cx,h=s.cy,l=a<t.x,_=a>t.right,u=h<t.y,c=h>t.bottom,d=t.cx,f=t.cy,g=l||_,v=u||c;(o===i||null===o)&&(o=Math.atan2(h-f,a-d),g||v||(o+=Math.PI));var E=Math.cos(o),p=Math.sin(o),y=Qe(e,t,{x:a,y:h},-E,-p);y||(o=Math.atan2(h-f,a-d),g||v||(o+=Math.PI),y=Qe(e,t,{x:a,y:h},-(E=Math.cos(o)),-(p=Math.sin(o)))||{x:d,y:f});var T=Qe(r,s,{x:y.x,y:y.y},-y.perX||E,-y.perY||p,!1)||{x:a,y:h};return n?[y,T]:[T,y]}function Qe(t,e,i,n,r,s){if(!e.contains(i.x,i.y)){if(!(i=function t(e,i,n,r,s,o){var a,h,l=i<e.x,_=i>e.right,u=n<e.y,c=n>e.bottom;if(l&&r>0&&(a=n+(e.x-i)*s/r)>=e.y&&a<=e.bottom)return{x:e.x,y:a,perX:r,perY:s};if(_&&0>r&&(a=n+(e.right-i)*s/r)>=e.y&&a<=e.bottom)return{x:e.right,y:a,perX:r,perY:s};if(u&&s>0&&(h=i+(e.y-n)*r/s)>=e.x&&h<=e.right)return{x:h,y:e.y,perX:r,perY:s};if(c&&0>s&&(h=i+(e.bottom-n)*r/s)>=e.x&&h<=e.right)return{x:h,y:e.bottom,perX:r,perY:s};return!1!==o?t(e,i,n,-r,-s,!1):void 0}(e,i.x,i.y,n,r,s)))return;return ti(t,e,i,i.perX,i.perY)}return!1===s?ti(t,e,i,n,r):ti(t,e,{x:i.x,y:i.y,perX:n,perY:r},n,r)||ti(t,e,i,-n,-r)}function ti(t,e,i,n,r){for(;;){if(!e.contains(i.x,i.y))return;if(t.hitTest(i.x+n,i.y+r))break;i.x+=n,i.y+=r}return i}function ei(t){return $t(t)?t:t.match(/.(gif|jpg|jpeg|png)$/gi)||/^data:image\/(\w+\+?\w+);base64,/i.test(t)?t:(t=z(t))instanceof Object&&t.draw?t:void 0}function ii(t){for(var e=t.parent;e;){if(e.enableSubNetwork)return e;e=e.parent}return null}function ni(){y(this,ni,arguments)}function ri(t,i,n,r,s,o,a){var h=e.createElement("div");h.className="Q-Graph-Nav-Button",tt(h,Ms),i&&tt(h,i);var l=e.createElement("img");return o&&(Ki&&(l.ontouchstart=o),jn||(l.onclick=o)),l.name=a,l.src=n,tt(l,Bs),s&&tt(l,s),r&&et(l,"transform","rotate(180deg)"),h._img=l,h.appendChild(l),t.appendChild(h),h}function si(t,i){this._navPane=e.createElement("div"),this._navPane.className="Q-Graph-Nav",tt(this._navPane,{"background-color":"rgba(0, 0, 0, 0)",overflow:"hidden","user-select":"none",position:"relative"}),this._top=ri(this._navPane,{width:"100%"},Ji.NAVIGATION_IMAGE_TOP,!1,null,i,"top"),this._left=ri(this._navPane,{height:"100%"},Ji.NAVIGATION_IMAGE_LEFT,!1,ks,i,"left"),this._right=ri(this._navPane,{height:"100%",right:"0px"},Ji.NAVIGATION_IMAGE_LEFT,!0,ks,i,"right"),this._leottom=ri(this._navPane,{width:"100%",bottom:"0px"},Ji.NAVIGATION_IMAGE_TOP,!0,null,i,"bottom"),t.appendChild(this._navPane)}function oi(t,e){if(!Ji.NAVIGATION_IMAGE_LEFT){var i=ft(20,40),n=i.g;n.scale(n.ratio,n.ratio),n.moveTo(16,4),n.lineTo(4,20),n.lineTo(16,36),n.lineWidth=3,n.lineCap="round",n.lineJoin="round",n.strokeStyle="#FFF",n.shadowColor="#888",n.shadowBlur=5,n.stroke(),Ji.NAVIGATION_IMAGE_LEFT=i.toDataURL();var r=ft(i.height,i.width,!1);r.g.translate(r.width,0),r.g.rotate(Math.PI/2),r.g.drawImage(i,0,0),Ji.NAVIGATION_IMAGE_TOP=r.toDataURL()}this._leaseCanvas=t;si.call(this,e,function(e){M(e);var i,n,r=e.target,s=r.name;if("left"==s)i=1;else if("right"==s)i=-1;else if("top"==s)n=1;else{if("bottom"!=s)return;n=-1}Ki&&(r.className="hover",setTimeout(function(){r.className=""},100)),M(e),t._jc._9h(i,n)}),this._31(e.clientWidth,e.clientHeight)}function ai(t,e){this._leaseCanvas=t,this.init(e,t)}function hi(){y(this,hi,arguments)}function li(t,e){this._leaseCanvas=t,this._ih=function(t){var e=ft(!0);return ie(e.g),e.onselectstart=function(){return!1},t.appendChild(e),e.className=Zr,e}(e),this.g=this._ih.g,this._9o=new Qi}function _i(t){this.graph=t,this.topCanvas=t.topCanvas}function ui(t,e){this.interactions=t,this.defaultCursor=e||"default"}function ci(){y(this,ci,arguments)}function di(){y(this,di,arguments)}function fi(){y(this,fi,arguments)}function gi(){y(this,gi,arguments)}function vi(){y(this,vi,arguments)}function Ei(e,i,n){e+=t.pageXOffset,i+=t.pageYOffset;var r=n.getBoundingClientRect();return{x:e+r.left,y:i+r.top}}function pi(t,e,i){var n=t.offsetWidth,r=t.offsetHeight;t.style.left=e-n/2+"px",t.style.top=i-r/2+"px"}function yi(t){var i=e.createElement("canvas").getContext("2d"),n=getComputedStyle(t,null),r=n.font;r||(r=n.fontStyle+" "+n.fontSize+" "+n.fontFamily),i.font=r;var s=t.value.split("\n"),o=parseInt(n.fontSize),a=0,h=0;return rr.forEach(s,function(t){var e=i.measureText(t).width;e>a&&(a=e),h+=1.2*o}),{width:a,height:h}}function Ti(t,i){if("number"==typeof t.selectionStart&&"number"==typeof t.selectionEnd){var n=t.value,r=t.selectionStart;t.value=n.slice(0,r)+i+n.slice(t.selectionEnd),t.selectionEnd=t.selectionStart=r+i.length}else if(void 0!==e.selection){var s=e.selection.createRange();s.text=i,s.collapse(!1),s.select()}}function mi(e){if(Gi){var i=t.scrollX||t.pageXOffset,n=t.scrollY||t.pageYOffset;return e.select(),void t.scrollTo(i,n)}e.select()}function Oi(){}function wi(t){this.graph=t,this.topCanvas=t.topCanvas,this.handlerSize=Ki?8:5}function bi(t){return t.type==Pr||t.type==Nr}function Li(t){this.graph=t,this.topCanvas=t.topCanvas,this.handlerSize=Ki?8:4,this._rotateHandleLength=Ki?30:20}function Ai(t,e){var i=new on;return i.addPoint(Kt.call(t,{x:e.x,y:e.y})),i.addPoint(Kt.call(t,{x:e.x+e.width,y:e.y})),i.addPoint(Kt.call(t,{x:e.x+e.width,y:e.y+e.height})),i.addPoint(Kt.call(t,{x:e.x,y:e.y+e.height})),i}function Si(){}function Ii(i,n,r){var s=e.documentElement,o=new on(t.pageXOffset,t.pageYOffset,s.clientWidth-2,s.clientHeight-2),a=i.offsetWidth,h=i.offsetHeight;n+a>o.x+o.width&&(n=o.x+o.width-a),r+h>o.y+o.height&&(r=o.y+o.height-h),n<o.x&&(n=o.x),r<o.y&&(r=o.y),i.style.left=n+"px",i.style.top=r+"px"}function xi(t,e,i,n,r){this.source=t,this.type="interaction",this.kind=e,this.event=i,this.data=n,this.datas=r}function Ci(t){this._48={},this._jc=t,this._jc._1e.addListener(this._8f,this),this.currentMode=sr.INTERACTION_MODE_DEFAULT}function Ri(t){return t>=100&&200>t}function Di(t){this.graph=t,this.currentMovingNodes={}}function Pi(){y(this,Pi,arguments)}function Ni(t,e,i,n,r){n?t.forEachEdge(function(n){var s=n.otherNode(t);s!=i&&s._marker!=r&&e(s,t)},this,!0):t.forEachOutEdge(function(n){var s=n.toAgent;s!=i&&s._marker!=r&&e(s,t)})}var Mi=0;if(t.navigator){var Bi=navigator.userAgent,ki=/opera/i.test(Bi),Gi=!ki&&/msie/i.test(Bi),Fi=/rv:11.0/i.test(Bi),$i=/MSIE 10./i.test(Bi);if(Fi&&(Gi=!0),/msie\s[6,7,8]/i.test(Bi))throw new Error("your browser is not supported");var ji=/webkit|khtml/i.test(Bi),zi=!ji&&/gecko/i.test(Bi),Yi=/firefox\//i.test(Bi),Hi=/Chrome\//i.test(Bi),Ui=!Hi&&/Safari\//i.test(Bi),Wi=/Macintosh;/i.test(Bi),Vi=/(iPad|iPhone|iPod)/g.test(Bi),Xi=/Android/g.test(Bi),qi=/Windows Phone/g.test(Bi),Ki=(Vi||Xi||qi)&&"ontouchstart"in t,Zi=Bi.match(/AppleWebKit\/([0-9\.]*)/);if(Zi&&Zi.length>1)parseFloat(Zi[1]);Xi&&parseFloat(Bi.match(/Android\s([0-9\.]*)/)[1])}t.requestAnimationFrame||(t.requestAnimationFrame=t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){return t.setTimeout(function(){e()},1e3/60)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||function(e){return t.clearTimeout(e)});var Ji={SELECTION_TOLERANCE:Ki?5:2,LABEL_COLOR:"#333"};j(Ji,{FONT_STYLE:{get:function(){return this._fontStyle||(this._fontStyle="normal")},set:function(t){this._fontStyle!=t&&(this._fontStyle=t,this._fontChanged=!0)}},FONT_SIZE:{get:function(){return this._fontSize||(this._fontSize=12)},set:function(t){this._fontSize!=t&&(this._fontSize=t,this._fontChanged=!0)}},FONT_FAMILY:{get:function(){return this._fontFamily||(this._fontFamily="Verdana,helvetica,arial,sans-serif")},set:function(t){this._fontFamily!=t&&(this._fontFamily=t,this._fontChanged=!0)}},FONT:{get:function(){return(this._fontChanged||this._fontChanged===i)&&(this._fontChanged=!1,this._font=this.FONT_STYLE+" "+this.FONT_SIZE+"px "+this.FONT_FAMILY),this._font}}});var Qi=function(t){this._ig=[],this._kh={},t&&this.add(t)};Qi.prototype={_ig:null,_kh:null,get:function(t){return this.getByIndex(t)},getById:function(t){return this._kh[t]},getByIndex:function(t){return this._ig[t]},forEach:function(t,e,i){return _(this._ig,t,e,i)},forEachReverse:function(t,e,i){return c(this._ig,t,e,i)},size:function(){return this._ig.length},contains:function(t){return this.containsById(t.id)},containsById:function(t){return this._kh.hasOwnProperty(t)},setIndex:function(t,e){var i=this._ig.indexOf(t);if(0>i)throw new Error("'"+t.id+"' not exist");return i!=e&&(this._ig.splice(i,1),this._ig.splice(e,0,t),!0)},setIndexAfter:function(t,e){var i=this._ig.indexOf(t);if(0>i)throw new Error("'"+t.id+"' not exist");return i==e?e:i==e+1?e+1:(i>e&&(e+=1),this._ig.splice(i,1),this._ig.splice(e,0,t),e)},setIndexBefore:function(t,e){var i=this._ig.indexOf(t);if(0>i)throw new Error("'"+t.id+"' not exist");return i==e?e:i==e-1?e-1:(e>i&&(e-=1),this._ig.splice(i,1),this._ig.splice(e,0,t),e)},indexOf:function(t){return this._ig.indexOf(t)},getIndexById:function(t){var e=this.getById(t);return e?this._ig.indexOf(e):-1},add:function(t,e){return D(t)?this._ek(t,e):this._jn(t,e)},addFirst:function(t){return this.add(t,0)},_ek:function(t,e){if(0==t.length)return!1;for(var n=!1,r=e>=0,s=0,o=(t=t._ig||t).length;o>s;s++){var a=t[s];null!==a&&a!==i&&this._jn(a,e,!0)&&(n=!0,r&&e++)}return n},_jn:function(t,e){var n=t.id;return n!==i&&!this.containsById(n)&&(f(this._ig,t,e),this._kh[n]=t,t)},remove:function(t){return D(t)?this._9u(t):t.id?this._ft(t.id,t):this.removeById(t)},_9u:function(t){if(0==t.length)return!1;for(var e=!1,n=0,r=(t=t._ig||t).length;r>n;n++){var s=t[n];if(null!==s&&s!==i){s.id===i&&(s=this._kh[s]);var o=s.id;this._ft(o,s,!0)&&(e=!0)}}return e},_ft:function(t,e){return!(t===i||!this.containsById(t))&&((null===e||e===i)&&(e=this.getById(t)),delete this._kh[t],g(this._ig,e),!0)},removeById:function(t){var e=this._kh[t];return!!e&&this._ft(t,e)},set:function(t){if(t&&0!=t){if(this.isEmpty()||!D(t))return this.clear(),this.add(t);var e=[],i={},n=0;if(_(t,function(t){this._kh[t.id]?(i[t.id]=t,n++):e.push(t)},this),n!=this.length){var r=[];this.forEach(function(t){i[t.id]||r.push(t)},this),r.length&&this._9u(r)}return e.length&&this._ek(e),!0}this.clear()},clear:function(){return!this.isEmpty()&&(this._ig.length=0,this._kh={},!0)},toDatas:function(){return this._ig.slice(0)},isEmpty:function(){return 0==this._ig.length},valueOf:function(){return this._ig.length},clone:function(t){var e=new Qi;return e.add(t?d(this._ig):this.toDatas()),e}},j(Qi.prototype,{datas:{get:function(){return this._ig}},random:{get:function(){return this._ig&&this._ig.length?this._ig[B(this._ig.length)]:null}},length:{get:function(){return this._ig?this._ig.length:0}}});var tn=(Math.PI,.5*Math.PI),en=function(t,e,i){t instanceof en&&(e=t.y,i=(t=t.x).rotate),this.set(t,e,i)},nn=function(t,e,i,n){var r=t-i,s=e-n;return Math.sqrt(r*r+s*s)};en.prototype={x:0,y:0,rotate:i,set:function(t,e,i){this.x=t||0,this.y=e||0,this.rotate=i||0},negate:function(){this.x=-this.x,this.y=-this.y},offset:function(t,e){this.x+=t,this.y+=e},equals:function(t){return this.x==t.x&&this.y==t.y},distanceTo:function(t){return nn(this.x,this.y,t.x,t.y)},toString:function(){return"Point("+this.x+", "+this.y+")"},clone:function(){return new en(this.x,this.y)}},Object.defineProperty(en.prototype,"distance",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}});var rn=function(t,e,n,r){t!==i&&this._l2(t,e,n,r)};rn.prototype={_l6:null,_la:null,_l8:null,_l7:null,_lg:null,_le:null,_lc:1,_l2:function(t,e,i,n){this._l6=t,this._la=e,this._l8=i,this._l7=n,t==i?(this._lg=-1,this._lc=0,this._le=t):(this._lg=(e-n)/(t-i),this._le=e-this._lg*t,this._lc=1),this._ju=Math.atan2(this._l7-this._la,this._l8-this._l6),this._lcos=Math.cos(this._ju),this._sin=Math.sin(this._ju)},_leh:function(t){return 0==this._lc?Number.NaN:this._lg*t+this._le},_lc9:function(t){return 0==this._lg?Number.NaN:(t-this._le)/this._lg},_$d:function(t){var e,i,n,r,s,o,a,h=t[0],l=t[2],_=t[4],u=t[1],c=t[3],d=t[5],f=this._lg,g=this._le;if(0==this._lc?(n=Math.sqrt((-f*f*h-f*g)*_+f*f*l*l+2*f*g*l-f*g*h),r=-f*l+f*h,s=f*_-2*f*l+f*h):(n=Math.sqrt((f*h-u+g)*d+c*c+(-2*f*l-2*g)*c+(f*_+g)*u+(-f*f*h-f*g)*_+f*f*l*l+2*f*g*l-f*g*h),r=-c+u+f*l-f*h,s=d-2*c+u-f*_+2*f*l-f*h),0!=s)return i=(-n+r)/s,(e=(n+r)/s)>=0&&1>=e&&(o=yt(e,t)),i>=0&&1>=i&&(a=yt(i,t)),o&&a?[o,a]:o||(a||void 0)},_3j:function(t,e,i){if(this._lg==t._lg||0==this._lc&&0==t._lc)return null;var n,r,s,o,a;if(n=0==this._lc?this._le:0==t._lc?t._le:(t._le-this._le)/(this._lg-t._lg),r=0==this._lg?this._le:0==t._lg?t._le:this._lc?this._lg*n+this._le:t._lg*n+t._le,!e)return{x:n,y:r};if(i)o=-(s=-e/2);else{var h=-(s=-nn(this._l6,this._la,n,r))+(o=nn(this._l8,this._l7,n,r));if(h>e){var l=e/h;s*=l,o*=l}else a=(e-h)/2}var _=this._69(n,r,s),u=this._69(n,r,o);return a&&(_._rest=a,u._rest=a),[_,u]},_69:function(t,e,i){return 0==this._lc?{x:t,y:e+i}:{x:t+i*this._lcos,y:e+i*this._sin}}};var sn=function(t,e){this.width=t,this.height=e};sn.prototype={width:0,height:0,isEmpty:function(){return this.width<=0||this.height<=0},clone:function(){return new sn(this.width,this.height)},toString:function(){return"Size("+this.width+", "+this.height+")"}};var on=function(t,e,n,r){t instanceof Object&&!C(t)&&(e=t.y,n=t.width,r=t.height,t=t.x),n===i&&(n=-1),r===i&&(r=-1),this.x=t||0,this.y=e||0,this.width=n,this.height=r};on.prototype={x:0,y:0,width:-1,height:-1,setByRect:function(t){this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0},set:function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},offset:function(t,e){return this.x+=t,this.y+=e,this},contains:function(t,e){if(1==arguments.length){if("object"==typeof t&&function(t){return"x"in t&&"y"in t}(t))return this.contains(t.x,t.y,t.width,t.height);throw{message:"arguments error"}}return 2==arguments.length?t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height:K(this.x,this.y,this.width,this.height,t,e,w||0,h||0)},intersectsPoint:function(t,e,i){return!(this.width<=0&&this.height<=0)&&(i?this.intersectsRect(t-i,e-i,2*i,2*i):t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height)},intersectsRect:function(t,e,i,n){return X(this.x,this.y,this.width,this.height,t,e,i,n)},intersects:function(t,e){return C(t.width)?this.intersectsRect(t.x,t.y,t.width,t.height):this.intersectsPoint(t,e)},intersection:function(t,e,i,n){var r=this.x,s=this.y,o=r;o+=this.width;var a=s;a+=this.height;var h=t;h+=i;var l=e;return l+=n,t>r&&(r=t),e>s&&(s=e),o>h&&(o=h),a>l&&(a=l),a-=s,0>(o-=r)||0>a?null:new on(r,s,o,a)},addPoint:function(t){this.add(t.x,t.y)},add:function(t,e){if(C(t.width))return this.addRect(t.x,t.y,t.width,t.height);if(C(t.x)&&(e=t.y,t=t.x),this.width<0||this.height<0)return this.x=t,this.y=e,void(this.width=this.height=0);var i=this.x,n=this.y,r=this.width,s=this.height;r+=i,s+=n,i>t&&(i=t),n>e&&(n=e),t>r&&(r=t),e>s&&(s=e),s-=n,(r-=i)>Number.MAX_VALUE&&(r=Number.MAX_VALUE),s>Number.MAX_VALUE&&(s=Number.MAX_VALUE),this.set(i,n,r,s)},addRect:function(t,e,i,n){var r=this.width,s=this.height;(0>r||0>s)&&this.set(t,e,i,n);var o=i,a=n;if(!(0>o||0>a)){var h=this.x,l=this.y;r+=h,s+=l;o+=t,a+=e,h>t&&(h=t),l>e&&(l=e),o>r&&(r=o),a>s&&(s=a),s-=l,(r-=h)>Number.MAX_VALUE&&(r=Number.MAX_VALUE),s>Number.MAX_VALUE&&(s=Number.MAX_VALUE),this.set(h,l,r,s)}},shrink:function(t,e,i,n){return C(t)?1==arguments.length?n=e=i=t||0:2==arguments.length?(i=t||0,n=e||0):(t=t||0,e=e||0,i=i||0,n=n||0):(e=t.left||0,i=t.bottom||0,n=t.right||0,t=t.top||0),this.x+=e,this.y+=t,this.width-=e+n,this.height-=t+i,this},grow:function(t,e,i,n){return C(t)?1==arguments.length?n=e=i=t||0:2==arguments.length?(i=t||0,n=e||0):(t=t||0,e=e||0,i=i||0,n=n||0):(e=t.left||0,i=t.bottom||0,n=t.right||0,t=t.top||0),this.x-=e,this.y-=t,this.width+=e+n,this.height+=t+i,this},scale:function(t){return this.x*=t,this.y*=t,this.width*=t,this.height*=t,this},isEmpty:function(){return this.width<=0&&this.height<=0},toString:function(){return this.x+" , "+this.y+" , "+this.width+" , "+this.height},union:function(t){var e=this.width,i=this.height;if(0>e||0>i)return new on(t.x,t.y,t.width,t.height);var n=t.width,r=t.height;if(0>n||0>r)return new on(this.x,this.y,this.width,this.height);var s=this.x,o=this.y;e+=s,i+=o;var a=t.x,h=t.y;return n+=a,r+=h,s>a&&(s=a),o>h&&(o=h),n>e&&(e=n),r>i&&(i=r),i-=o,(e-=s)>Number.MAX_VALUE&&(e=Number.MAX_VALUE),i>Number.MAX_VALUE&&(i=Number.MAX_VALUE),new on(s,o,e,i)},clear:function(){this.set(0,0,-1,-1)},equals:function(t){return t&&this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},clone:function(t,e){return new on(this.x+(t||0),this.y+(e||0),this.width,this.height)},toArray:function(){return[this.x,this.y,this.width,this.height]},getIntersectionPoint:function(t,e,i,n){return V(this,t,e,i,n)}},p(on,sn),on.equals=function(t,e){return t==e||t&&e&&t.x==e.x&&t.y==e.y&&t.width==e.width&&t.height==e.height},j(on.prototype,{left:{get:function(){return this.x}},top:{get:function(){return this.y}},bottom:{get:function(){return this.y+this.height}},right:{get:function(){return this.x+this.width}},cx:{get:function(){return this.x+this.width/2}},cy:{get:function(){return this.y+this.height/2}},center:{get:function(){return new en(this.cx,this.cy)}}}),on.intersects=X,on.intersection=function(t,e,i,n,r,s,o,a){var h=t;h+=i;var l=e;l+=n;var _=r;_+=o;var u=s;return u+=a,r>t&&(t=r),s>e&&(e=s),h>_&&(h=_),l>u&&(l=u),l-=e,0>(h-=t)||0>l?null:new on(t,e,h,l)},on.intersectsPoint=q;var an=function(t,e,i,n){1==arguments.length?e=i=n=t:2==arguments.length&&(i=t,n=e),this.set(t,e,i,n)};an.prototype={top:0,bottom:0,left:0,right:0,set:function(t,e,i,n){this.top=t||0,this.left=e||0,this.bottom=i||0,this.right=n||0},clone:function(){return new an(this.top,this.left,this.bottom,this.right)},equals:function(t){return t&&this.top==t.top&&this.bottom==t.bottom&&this.left==t.left&&this.right==t.right}};var hn=function(t,e){this.horizontalPosition=t,this.verticalPosition=e};hn.prototype={verticalPosition:!1,horizontalPosition:!1,toString:function(){return(this.horizontalPosition||"")+(this.verticalPosition||"")}},$(hn.prototype,"sortName",{get:function(){return(this.horizontalPosition||"")+(this.verticalPosition||"")}});var ln="l",_n="c",un="r",cn="t",dn="m",fn="b";hn.LEFT_TOP=new hn(ln,cn),hn.LEFT_MIDDLE=new hn(ln,dn),hn.LEFT_BOTTOM=new hn(ln,fn),hn.CENTER_TOP=new hn(_n,cn),hn.CENTER_MIDDLE=new hn(_n,dn),hn.CENTER_BOTTOM=new hn(_n,fn),hn.RIGHT_TOP=new hn(un,cn),hn.RIGHT_MIDDLE=new hn(un,dn),hn.RIGHT_BOTTOM=new hn(un,fn);var gn=[hn.LEFT_TOP,hn.LEFT_MIDDLE,hn.LEFT_BOTTOM,hn.CENTER_TOP,hn.CENTER_MIDDLE,hn.CENTER_BOTTOM,hn.RIGHT_TOP,hn.RIGHT_MIDDLE,hn.RIGHT_BOTTOM];$(hn,"random",{get:function(){return gn[B(gn.length)]}}),hn.fromString=function(t){for(var e in hn){var i=hn[e];if(i&&"random"!=e&&i instanceof hn&&i.toString()==t)return i}};var vn=function(t,e,i,n,r){this.set(t,e,i,n),this.radius=r};vn.prototype={radius:0,classify:function(t,e,i,n){return e>t?0:e+n>t?1:i-n>t?2:i>t?3:4},intersectsRect:function(t,e,i,n){if(!1===T(this,vn,"intersectsRect",arguments))return!1;var r=this.x,s=this.y,o=r+this.width,a=s+this.height,h=2*radius,l=2*radius,_=Math.min(this.width,Math.abs(h))/2,u=Math.min(this.height,Math.abs(l))/2,c=this.classify(t,r,o,_),d=this.classify(t+i,r,o,_),f=this.classify(e,s,a,u),g=this.classify(e+n,s,a,u);return 2==c||2==d||2==f||2==g||(2>c&&d>2||2>f&&g>2||(t=1==d?t=t+i-(r+_):t-=o-_,e=1==g?e=e+n-(s+u):e-=a-u,1>=(t/=_)*t+(e/=u)*e))},intersectsPoint:function(t,e){if(!1===T(this,vn,"intersectsPoint",arguments))return!1;var i=this.x,n=this.y,r=i+this.width,s=n+this.height;if(i>t||n>e||t>=r||e>=s)return!1;var o=2*radius,a=2*radius,h=Math.min(this.width,Math.abs(o))/2,l=Math.min(this.height,Math.abs(a))/2;return t>=(i+=h)&&t<(i=r-h)||(e>=(n+=l)&&e<(n=s-l)||1>=(t=(t-i)/h)*t+(e=(e-n)/l)*e)},clone:function(){return new vn(this.x,this.y,this.width,this.height,this.radius)}},p(vn,on);var En=function(t,e,i,n){this.source=t,this.type=e,this.kind=i,this.value=n};En.prototype={source:null,type:null,kind:null,value:null,toString:function(){return"source: "+this.source+", type: "+this.type+", kind: "+this.kind}};var pn=function(t,e,i,n,r){this.source=t,this.kind=e,this.oldValue=n,this.value=i,this.propertyType=r};pn.prototype={type:"property.change",propertyType:null,toString:function(){return"source: "+this.source+", type: "+this.type+", propertyName: "+this.kind+", oldValue: "+this.oldValue+", value: "+this.value}},p(pn,En),$(pn.prototype,"propertyName",{get:function(){return this.kind},set:function(t){this.kind=t}});var yn=function(t,e,i){this.source=t,this.oldValue=t.parent,this.value=e,this.newIndex=i,this.oldValue&&(this.oldIndex=this.oldValue.getChildIndex(t))};yn.prototype={kind:"parent"},p(yn,pn);var Tn=function(t,e){this.source=t,this.value=e};Tn.prototype.kind="child.add",p(Tn,pn);var mn=function(t,e){this.source=t,this.value=e};mn.prototype.kind="child.remove",p(mn,pn);var On=function(t,e,i,n){this.source=e,this.oldValue=i,this.value=n,this.parent=t,this.child=e,this.oldIndex=i,this.newIndex=n};On.prototype.kind="child.index",p(On,pn);var wn=function(){};wn.prototype={listener:null,beforeEvent:function(t){return null==this.listener||!this.listener.beforeEvent||this.listener.beforeEvent(t)},onEvent:function(t){null!=this.listener&&this.listener.onEvent&&this.listener.onEvent(t)}};var bn=function(){y(this,bn,arguments),this.events={},this.listeners=[]},Ln=function(t,e){this.listener=t,this.scope=e,t instanceof Function?this.onEvent=t:(this.onEvent=t.onEvent,this.beforeEvent=t.beforeEvent),this.equals=function(t){return t&&this.listener==t.listener&&this.scope==t.scope}};Ln.prototype={equals:function(t){return t&&this.listener==t.listener&&this.scope==t.scope},destroy:function(){delete this.scope,delete this.listener}},bn.prototype={listeners:null,_lef:function(){return this.listeners&&this.listeners.length>0},_6g:function(t,e){return t instanceof bn?t:new Ln(t,e)},_9k:function(t,e){if(t instanceof bn)return this.listeners.indexOf(t);for(var i=this.listeners,n=0,r=i.length;r>n;n++){var s=i[n];if(s.listener==t&&s.scope==e)return n}return-1},contains:function(t,e){return this._9k(t,e)>=0},addListener:function(t,e){return!this.contains(t,e)&&void this.listeners.push(this._6g(t,e))},removeListener:function(t,e){var i=this._9k(t,e);i>=0&&this.listeners.splice(i,1)},on:function(t,e){this.addListener(t,e)},un:function(t,e,i){this.removeListener(t,e,i)},onEvent:function(t){return!!this.listeners&&void _(this.listeners,function(e){e.onEvent&&(e.scope?e.onEvent.call(e.scope,t):e.onEvent(t))},this)},beforeEvent:function(t){return!this.listeners||_(this.listeners,function(e){return!e.beforeEvent||(e.scope?e.beforeEvent.call(e.scope,t):e.beforeEvent(t))},this)},_lcu:function(t){return!1!==this.beforeEvent(t)&&(this.onEvent(t),!0)},clear:function(){this.listeners=[]},destroy:function(){this.clear()}},p(bn,wn);var An=function(t,e,i,n,r){this.source=t,this.type="list",this.kind=e,this.data=i,this.index=n,this.oldIndex=r};An.prototype={index:-1,oldIndex:-1,toString:function(){return"source: "+this.source+", type: "+this.type+", kind: "+this.kind+", data: "+this.data+", index: "+this.index+", oldIndex: "+this.oldIndex}},p(An,En),An.KIND_ADD="add",An.KIND_REMOVE="remove",An.KIND_CLEAR="clear",An.KIND_INDEX_CHANGE="index.change";var Sn=function(){this.id=++Mi,this._lei={}};Sn.prototype={_lei:null,id:null,get:function(t){return this._lei[t]},set:function(t,e){var i=this.get(t);if(i===e)return!1;var n=new pn(this,t,e,i);return n.propertyType=sr.PROPERTY_TYPE_CLIENT,this._lga(t,e,n,this._lei)},_lga:function(t,e,n,r){return!1!==this.beforeEvent(n)&&(r||(r=this._lei),e===i?delete r[t]:r[t]=e,this.onEvent(n),!0)},remove:function(t){this.set(t,null)},valueOf:function(){return this.id},toString:function(){return this.id},_lcs:function(t,e){if(e===i&&(e=-1),this==t||t==this._in)return!1;if(t&&this==t._in&&!t._lcs(null))return!1;var n=new yn(this,t,e);if(!this.beforeEvent(n))return!1;var r,s,o=this._in;return!(t&&(r=new Tn(t,this),!t.beforeEvent(r)))&&(!(null!=o&&(s=new mn(o,this),!o.beforeEvent(s)))&&(this._in=t,null!=t&&function(t,e,i){t.children.add(e,i),t.onChildAdd(e,i)}(t,this,e),null!=o&&function(t,e){t._er&&(t._er.remove(e),t.onChildRemove(e))}(o,this),this.onEvent(n),null!=t&&t.onEvent(r),null!=o&&o.onEvent(s),this.onParentChanged(o,t),!0))},addChild:function(t,e){var i=t._lcs(this,e);return i&&this.onChildAdd(t,e),i},removeChild:function(t){if(!this._er||!this._er.contains(t))return!1;var e=t._lcs(null);return this.onChildRemove(t),e},toChildren:function(){return this._er?this._er.toDatas():null},clearChildren:function(){if(this._er&&this._er.length){var t=this.toChildren();_(t,function(t){t._lcs(null)},this),this.onChildrenClear(t)}},forEachChild:function(t,e){return!!this.hasChildren()&&this._er.forEach(t,e)},onChildAdd:function(){},onChildRemove:function(){},onChildrenClear:function(){},onParentChanged:function(){},getChildIndex:function(t){return this._er&&this._er.length?this._er.indexOf(t):-1},setChildIndex:function(t,e){if(!this._er||!this._er.length)return!1;var i=this._er.indexOf(t);if(0>i||i==e)return!1;var n=new On(this,t,i,e);return!1!==this.beforeEvent(n)&&(this._er.remove(t)&&this._er.add(t,e),this.onEvent(n),!0)},hasChildren:function(){return this._er&&this._er.length>0},getChildAt:function(t){return null==this._er?null:this._er._ig[t]},isDescendantOf:function(t){if(!t.hasChildren())return!1;for(var e=this.parent;null!=e;){if(t==e)return!0;e=e.parent}return!1},firePropertyChangeEvent:function(t,e,i,n){this.onEvent(new pn(this,t,e,i,n))}},p(Sn,wn),j(Sn.prototype,{childrenCount:{get:function(){return this._er?this._er.length:0}},children:{get:function(){return this._er||(this._er=new Qi),this._er}},parent:{get:function(){return this._in},set:function(t){this._lcs(t,-1)}},properties:{get:function(){return this._lei},set:function(t){this._lei!=t&&(this._lei=t)}}});var In=function(){this._ig=[],this._kh={},this._1e=new bn};In.prototype={beforeEvent:function(t){return null==this._1e||!this._1e.beforeEvent||this._1e.beforeEvent(t)},onEvent:function(t){return this._1e instanceof Function?void this._1e(t):void(null!=this._1e&&this._1e.onEvent&&this._1e.onEvent(t))},_1e:null,setIndex:function(t,e){if(!this.contains(t))throw new Error("'"+t.getId()+"' not exist");var i=this.indexOf(t);if(i==e)return!1;var n=new An(this,An.KIND_INDEX_CHANGE,t,e,i);return!1!==this.beforeEvent(n)&&(this._ig.remove(t)>=0&&this._ig.add(e,t),this.onEvent(n),!0)},_ek:function(t,e){if(0==t.length)return!1;var n=!1,r=e>=0,s=new An(this,An.KIND_ADD,t,e);if(!1===this.beforeEvent(s))return!1;for(var o=[],a=0,h=(t=t._ig||t).length;h>a;a++){var l=t[a];null!==l&&l!==i&&this._jn(l,e,!0)&&(o.push(l),n=!0,r&&e++)}return s.data=o,this.onEvent(s),n},_jn:function(t,e,i){if(!1===this.accept(t))return!1;if(i)return T(this,In,"_jn",arguments);var n=new An(this,An.KIND_ADD,t,e);return!1!==this.beforeEvent(n)&&(!!T(this,In,"_jn",arguments)&&(this._jm(t,n),t))},_jm:function(t,e){this.onEvent(e)},_9u:function(t){if(0==t.length)return!1;var e=new An(this,An.KIND_REMOVE,t);if(!1===this.beforeEvent(e))return!1;for(var n=[],r=!1,s=0,o=(t=t._ig||t).length;o>s;s++){var a=t[s];if(null!==a&&a!==i){var h=a.id||a;a.id===i&&(a=null),this._ft(h,a,!0)&&(n.push(a),r=!0)}}return e.data=n,this.onEvent(e),r},_ft:function(t,e,i){if(i)return T(this,In,"_ft",arguments);var n=new An(this,An.KIND_REMOVE,e);return!1!==this.beforeEvent(n)&&(!!T(this,In,"_ft",arguments)&&(this.onEvent(n),!0))},clear:function(){if(this.isEmpty())return!1;var t=new An(this,An.KIND_CLEAR,this.toDatas());return!1!==this.beforeEvent(t)&&(!!T(this,In,"clear")&&(this.onEvent(t),!0))},accept:function(t){return!this.filter||!1!==this.filter(t)}},p(In,Qi),$(In.prototype,"listChangeDispatcher",{get:function(){return this._1e}});var xn=function(){y(this,xn,arguments),this.selectionChangeDispatcher=new bn,this._selectionModel=new Cn(this),this._selectionModel._1e=this.selectionChangeDispatcher,this.dataChangeDispatcher=new bn,this.dataChangeDispatcher.addListener({beforeEvent:this.beforeDataPropertyChange,onEvent:this.onDataPropertyChanged},this),this.parentChangeDispatcher=new bn,this.childIndexChangeDispatcher=new bn,this.$roots=new Qi;var t=this;this.$roots.setIndex=function(e,i){if(!t.$roots.contains(e))throw new Error("'"+e.id+"' not exist");var n=t.$roots._ig.indexOf(e);if(n==i)return!1;t.$roots._ig.splice(n,1),t.$roots._ig.splice(i,0,e),t._letIndexFlag=!0;var r=new On(t,e,n,i);return t._1y(r),!0}};xn.prototype={selectionModel:null,selectionChangeDispatcher:null,dataChangeDispatcher:null,parentChangeDispatcher:null,roots:null,_jm:function(t,e){t.listener=this.dataChangeDispatcher,t.parent||this.$roots.add(t),this.onEvent(e)},_ft:function(t,e){if(T(this,xn,"_ft",arguments)){if(e instanceof cs)e.disconnect();else if(e instanceof ds){var i=e.getEdges();this.remove(i)}var n=e.parent;return null==n?this.$roots.remove(e):(n.removeChild(e),n.__5z=!0),e.hasChildren()&&this.remove(e.toChildren()),e.listener=null,!0}return!1},_4m:function(t){var e=t.source;this.contains(e)&&(null==e.parent?this.$roots.add(e):null==t.oldValue&&this.$roots.remove(e),this.parentChangeDispatcher.onEvent(t))},_1y:function(t){this.childIndexChangeDispatcher.onEvent(t)},beforeDataPropertyChange:function(t){return!(t instanceof yn)||this.parentChangeDispatcher.beforeEvent(t)},onDataPropertyChanged:function(t){return t instanceof yn?(this._letIndexFlag=!0,t.source._letIndexFlag=!0,void this._4m(t)):void(t instanceof On&&(this._letIndexFlag=!0,t.source._letIndexFlag=!0,this._1y(t)))},toRoots:function(){return this.$roots.toDatas()},_g2:function(t){var e,i=t._in,n=(e=i?i._er:this.$roots).indexOf(t);if(0>n)throw new Error("data '"+t+"' not exist in the box");return 0==n?i:e.getByIndex(n-1)},_g1:function(t){var e,i=t._in,n=(e=i?i._er:this.$roots).indexOf(t);if(0>n)throw new Error("data '"+t+"' not exist in the box");return n==e.length-1?i?this._g1(i):null:e.getByIndex(n+1)},forEachByDepthFirst:function(t,e,i){return!!this.$roots.length&&s(this.$roots,t,e,i)},forEachByDepthFirstReverse:function(t,e,i){return!!this.$roots.length&&o(this.$roots,t,e,i)},forEachByBreadthFirst:function(t,e){return!!this.$roots.length&&a(this.$roots,t,e)},forEachByBreadthFirstReverse:function(t,e){return!!this.$roots.length&&function(t,e,i){for(var n,r=(t._ig||t).slice(0);r.length;){if(n=r[r.length-1],r=r.splice(0,r.length-1),!1===e.call(i,n))return!1;if(n.hasChildren()){var s=n.children;s=s._ig||s,r=r.concat(s)}}return!0}(this.$roots,t,e)},clear:function(){return!!T(this,xn,"clear")&&(this.$roots.clear(),this.selectionModel.clear(),!0)}},p(xn,In),j(xn.prototype,{selectionModel:{get:function(){return this._selectionModel}},roots:{get:function(){return this.$roots}}});var Cn=function(t){y(this,Cn),this.box=t,this._leoxChangeListener={onEvent:function(t){An.KIND_REMOVE==t.kind?null!=t.data?this.remove(t.data):null!=t.datas&&this.remove(t.datas):An.KIND_CLEAR==t.kind&&this.clear()}},this.box.listChangeDispatcher.addListener(this._leoxChangeListener,this)};Cn.prototype={box:null,isSelected:function(t){return this.containsById(t.id||t)},select:function(t){return this.add(t)},unselect:function(t){return this.remove(t)},reverseSelect:function(t){return this.contains(t)?this.remove(t):this.add(t)},accept:function(t){return this.box.contains(t)}},p(Cn,In);var Rn=null,Dn=null,Pn=function(){if(!e.createElement)return function(t){return t};var t=e.createElement("div").style,n={};return function(e){if(n[e])return n[e];var r=J(e);return t[r]!==i||Dn&&t[r=J(Dn+r)]!==i?(n[e]=r,r):e}}(),Nn={};!function(){if(!e.head)return!1;for(var n=e.head,r="Webkit Moz O ms Khtml".split(" "),s=0;s<r.length;s++)if(n.style[r[s]+"Transform"]!==i){Dn="-"+r[s].toLowerCase()+"-";break}var o,a,h=e.createElement("style");for(var l in t.createPopup||h.appendChild(e.createTextNode("")),h.type="text/css",h.id="qunee-styles",n.appendChild(h),Rn=h.sheet,Nn){var _=Nn[l];for(var u in o=l,a="",_)a+=Pn(u)+":"+_[u]+";\n";it(o,a)}}();var Mn,Bn,kn,Gn=function(t,e,i,n,r){if(r){var s=function(t){s.handle.call(s.scope,t)};return s.scope=r,s.handle=i,t.addEventListener(e,s,n),s}return t.addEventListener(e,i,n),i};if(Ji.DOUBLE_CLICK_INTERVAL_TIME=200,Ji.LONG_PRESS_INTERVAL=800,Ji.DELAY_CLICK=!0,t.navigator&&navigator.userAgent){var Fn,$n="ontouchstart"in t,jn=$n&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent);if(jn)Fn="touchstart,touchmove,touchend,touchcancel";else{var zn="onmousewheel"in t?"mousewheel":"DOMMouseScroll";Fn="contextmenu,mousedown,mouseup,click,dblclick,mousemove,keydown,keyup,"+zn,$n&&(Fn+=",touchstart,touchmove,touchend,touchcancel")}Fn=Fn.split(/[\s,]+/);var Yn=function(e){return t.TouchEvent&&e instanceof t.TouchEvent},Hn=function(){return Ji.DOUBLE_CLICK_INTERVAL_TIME},P=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},N=function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},M=function(t){P(t),N(t)},Un=function(t){qn._lcurrentItem&&qn._lcurrentItem._onWindowMouseMove(t)},Wn=function(t){qn._lcurrentItem&&(qn._lcurrentItem._onWindowMouseUp(t),Vn(null))},Vn=function(t){qn._lcurrentItem!=t&&(qn._lcurrentItem&&(qn._lcurrentItem.__dragging=!1),qn._lcurrentItem=t)},Xn=function(t){return t.touches?{timeStamp:t.timeStamp,x:t.cx,y:t.cy}:{timeStamp:t.timeStamp,x:t.clientX,y:t.clientY}};rt.prototype={_install:function(){var e,i;this.__lgction||(this.__lgction=function(t){this._lgction(t)}.bind(this),e=this._ko,i=this.__lgction,Fn.forEach(function(t){e.addEventListener(t,i,!1)}),Ki||qn._lg0||(qn._lg0=!0,t.addEventListener("mousemove",Un,!0),t.addEventListener("mouseup",Wn,!0)))},_uninstall:function(){var t,e;this.__lgction&&(t=this._ko,e=this.__lgction,Fn.forEach(function(i){t.removeEventListener(i,e,!1)}))},_lgction:function(t){var e=(t=this._toQEvent(t)).type;!1===this._handleEvent(t,e)&&this._onEvent(t,"on"+e)},_lcancelLongPressTimer:function(){this.__longPressTimer&&(clearTimeout(this.__longPressTimer),this.__longPressTimer=null)},__joLongPress:function(t){this.__onLongPressFunction||(this.__onLongPressFunction=function(){this._joEvent&&(this.__lcancelClick=!0,this._joEvent.button?this._onEvent(this._joEvent,"onlongpress2"):this._onEvent(this._joEvent,"onlongpress"))}.bind(this)),this._lcancelLongPressTimer(),this.__longPressTimer=setTimeout(this.__onLongPressFunction,Ji.LONG_PRESS_INTERVAL)},__fixTouchEvent:function(t){for(var e,i,n=0,r=0,s=t.touches.length,o=0;s>o;){var a=t.touches[o++],h=a.clientX,l=a.clientY;if(2==o){var _=i[0]-h,u=i[1]-l;e=Math.sqrt(_*_+u*u)}i=[h,l],n+=h,r+=l}t.cx=n/s,t.cy=r/s,t.center={x:t.cx,y:t.cy,clientX:t.cx,clientY:t.cy},t.distance=e},__touchCountChange:function(t){this._dragPoints.clear(),this._9f=Xn(t)},_handleTouchEvent:function(t,e){switch(e){case"touchstart":N(t),this.__fixTouchEvent(t),this.__touchCountChange(t);var i=t.touches.length;this._joEvent||(this._joEvent=t,this._onstart(t),this.__lcancelClick=!1,this.__joLongPress(t)),1==i&&(this.__joMulTouchEvent=null),i>=2&&!this.__joMulTouchEvent&&(this.__joMulTouchEvent={cx:t.cx,cy:t.cy,distance:t.distance});break;case"touchmove":if(M(t),this.__fixTouchEvent(t),(i=t.touches.length)>=2&&this.__joMulTouchEvent){var n=this.__joMulTouchEvent.distance;t._scale=t.distance/n,t.dScale=this.__joMulTouchEvent.prevScale?t._scale/this.__joMulTouchEvent.prevScale:t._scale,this.__joMulTouchEvent.prevScale=t._scale,this.__pinching||(this.__pinching=!0,this._onEvent(t,"startpinch"))}this.__dragging||(this.__dragging=!0,this._jodrag(t)),this._ondrag(t),this.__pinching&&this._onEvent(t,"onpinch");break;case"touchend":M(t),(i=t.touches.length)&&(this.__fixTouchEvent(t),this.__touchCountChange(t)),1>=i&&(this.__pinching&&(this.__pinching=!1,this._onEvent(t,"endpinch")),this.__joMulTouchEvent=null),0==i&&(this.__dragging?(this._enddrag(t),this.__dragging=!1):t.timeStamp-this._joEvent.timeStamp<.8*Hn()&&this.__onclick(this._joEvent),this._onrelease(t));break;case"touchcancel":this.__dragging=!1,this.__pinching=!1,this.__joMulTouchEvent=null}return!1},_handleEvent:function(t,e){if(Yn(t))return this._handleTouchEvent(t,e);if("mousedown"==e)N(t),Vn(this),this._9f=Xn(t),this._joEvent||(this._joEvent=t,this._onstart(t)),this.__lcancelClick=!1,this.__joLongPress(t);else if("mouseup"==e)Vn(),this._onrelease(t);else if("click"==e){if(this.__lcancelClick)return!0;if(this._isDelayClick())return this.__onclick(t),!0}else if("dblclick"==e){if(this._isDelayClick())return!0}else{if("contextmenu"==e)return this._onEvent(t,"oncontextmenu"),this._joEvent&&function(t){return t.defaultPrevented||!1===t.returnValue}(t)&&Vn(this),!0;if(e==zn){var n=t.wheelDelta;if(n!==i?n/=120:n=-t.detail,!n)return;return t.delta=n,this._onEvent(t,"onmousewheel")}}return!1},_onEvent:function(t,e){if(this._handler){var i=this._handler;if(e=e||t.type,i instanceof Function)return i(t,e);if(!(i.accept instanceof Function&&!1===i.accept(e,t)))return i.onevent instanceof Function&&i.onevent(e,t,this._scope||this._ko),i[e]instanceof Function?i[e].call(i,t,this._scope||this._ko):void 0}},_toQEvent:function(t){return t},_onWindowMouseUp:function(t){this.__dragging&&(M(t),this.__dragging=!1,t=this._toQEvent(t),this._enddrag(t),this._onrelease(t),this._onEvent(t,"onmouseup"))},_joDragDistance:4,_onWindowMouseMove:function(t){if(this._joEvent){if(M(t),!this.__dragging){var e=this._joEvent.screenX-t.screenX,i=this._joEvent.screenY-t.screenY;if(e*e+i*i<this._joDragDistance)return;this.__dragging=!0,this._jodrag(t)}this._ondrag(this._toQEvent(t))}},_isDelayClick:function(){return Ji.DELAY_CLICK},__onclick:function(t){if(!this.__lcancelClick){var e=Hn();this.__lclickTimer?this.__dblclicked||(clearTimeout(this.__lclickTimer),this.__lclickTimer=null,this._onEvent(t,"ondblclick"),this.__dblclicked=!0):(this.__dblclicked=!1,this.__lclickTimer=setTimeout(function(t){this.__lclickTimer=null,this.__dblclicked||this._onEvent(t,"onclick")}.bind(this,t,e),e))}},_onstart:function(t){t.button?this._onEvent(t,"onstart2"):this._onEvent(t,"onstart")},_onrelease:function(t){this._joEvent&&(this._lcancelLongPressTimer(),t.button?this._onEvent(t,"onrelease2"):this._onEvent(t,"onrelease"),this._joEvent=null,this._9f=null)},_lgppendDragInfo:function(t){var e=this._9f;this._9f=Xn(t),this._dragPoints.add(e,this._9f,t)},_jodrag:function(){this.__lcancelClick=!0,this._lcancelLongPressTimer(),this._joEvent.button?this._onEvent(this._joEvent,"startdrag2"):this._onEvent(this._joEvent,"startdrag")},_ondrag:function(t){this._lgppendDragInfo(t),this._joEvent.button?this._onEvent(t,"ondrag2"):this._onEvent(t,"ondrag")},_enddrag:function(t){if(t.timeStamp-this._9f.timeStamp<100){var e=this._dragPoints.getCurrentSpeed();e&&(t.vx=e.x,t.vy=e.y)}this._joEvent.button?this._onEvent(t,"enddrag2"):this._onEvent(t,"enddrag"),this._dragPoints.clear()},_h8:function(){this._jwStatus()},_jwStatus:function(){qn._lcurrentItem==this&&delete qn._lcurrentItem,this._lcancelLongPressTimer(),delete this._9f,this._joEvent&&(delete this._joEvent.getData,delete this._joEvent.getUI,delete this._joEvent)}};var qn=b(function(t){this._jc=t,rt.apply(this,[t.canvasPanel,null,t])},{super:rt,_kwData:function(t){return this._jc.getElementByMouseEvent(t)},_jy:function(t){return this._jc.getUIByMouseEvent(t)},_toQEvent:function(e){return(e instanceof MouseEvent||t.TouchEvent&&e instanceof t.TouchEvent)&&(e.getData=this._kwData.bind(this,e),e.getUI=this._jy.bind(this,e)),e},_onElementRemoved:function(t){this._i5Listeners(function(e){e.onElementRemoved instanceof Function&&e.onElementRemoved(t,this._jc)})},_onElementClear:function(){this._i5Listeners(function(t){t.onClear instanceof Function&&t.onClear(this._jc)})},_h8:function(t){this._26s&&this._h8Interactions(this._26s,t),this._lcustomInteractionListeners&&this._h8Interactions(this._lcustomInteractionListeners,t),this._jwStatus()},_jc:null,_26s:null,_lcustomInteractionListeners:null,_l2Interaction:function(t){return this._26s!=t&&(this._26s&&this._26s.length&&this._h8Interactions(this._26s),void(this._26s=t))},_kyCustomInteractionListener:function(t){this._lcustomInteractionListeners||(this._lcustomInteractionListeners=[]),this._lcustomInteractionListeners.push(t)},_j0CustomInteractionListener:function(t){this._lcustomInteractionListeners&&0!=this._lcustomInteractionListeners.length&&g(this._lcustomInteractionListeners,t)},_onEvent:function(t,e,i){this._jc[e]instanceof Function&&this._jc[e].call(this._jc,t,i),this._26s&&this.__onEvent(t,e,this._26s,i),this._lcustomInteractionListeners&&this.__onEvent(t,e,this._lcustomInteractionListeners,i)},_i5Listeners:function(t){this._26s&&_(this._26s,t,this),this._lcustomInteractionListeners&&_(this._lcustomInteractionListeners,t,this)},__onEvent:function(t,e,i,n){if(D(i))for(var r=0;r<i.length;r++){var s=i[r];this.__handleEvent(t,e,s,n)}else this.__handleEvent(t,e,i,n)},__handleEvent:function(t,e,i,n){if(!(i.accept instanceof Function&&!1===i.accept(e,t,this._jc,n))){i.onevent instanceof Function&&i.onevent(e,t,this._jc,n);var r=i[e];r instanceof Function&&r.call(i,t,this._jc,n)}},_h8Interaction:function(t){t.destroy instanceof Function&&t.destroy.call(t,this._jc)},_h8Interactions:function(t,e){if(D(t))for(var i=0;i<t.length;i++){var n=t[i];n&&this._h8Interaction(n,e)}else this._h8Interaction(t,e)}})}ot.prototype={limitCount:10,points:null,add:function(t,e,i){0==this.points.length&&(this._joX=t.x,this._joY=t.y);var n=e.timeStamp-t.timeStamp||1;i.interval=n;var r=e.x-t.x,s=e.y-t.y;i.dx=r,i.dy=s,i.startX=this._joX,i.startY=this._joY,i.totalDeltaX=e.x-this._joX,i.totalDeltaY=e.y-this._joY,this.points.splice(0,0,{interval:n,dx:r,dy:s}),this.points.length>this.limitCount&&this.points.pop()},getCurrentSpeed:function(){if(!this.points.length)return null;for(var t=0,e=0,i=0,n=0,r=this.points.length;r>n;n++){var s=this.points[n],o=s.interval;if(o>150){t=0;break}if(t+=o,e+=s.dx,i+=s.dy,t>300)break}return 0==t||0==e&&0==i?null:{x:e/t,y:i/t}},clear:function(){this.points=[]}},ji?(Mn="-webkit-zoom-in",Bn="-webkit-zoom-out","-webkit-grab",kn="-webkit-grabbing"):zi?(Mn="-moz-zoom-in",Bn="-moz-zoom-out","-moz-grab",kn="-moz-grabbing"):(Mn="crosshair",Bn="crosshair","default",kn="move");var Kn=Math.PI,Zn=Math.pow,Jn=Math.sin,Qn=1.70158,tr={swing:function(t){return-Math.cos(t*Kn)/2+.5},easeNone:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return(2-t)*t},easeBoth:function(t){return(t*=2)<1?.5*t*t:.5*(1- --t*(t-2))},easeInStrong:function(t){return t*t*t*t},easeOutStrong:function(t){return 1- --t*t*t*t},easeBothStrong:function(t){return(t*=2)<1?.5*t*t*t*t:.5*(2-(t-=2)*t*t*t)},elasticIn:function(t){return 0===t||1===t?t:-Zn(2,10*(t-=1))*Jn(2*(t-.075)*Kn/.3)},elasticOut:function(t){return 0===t||1===t?t:Zn(2,-10*t)*Jn(2*(t-.075)*Kn/.3)+1},elasticBoth:function(t){return 0===t||2==(t*=2)?t:1>t?-.5*Zn(2,10*(t-=1))*Jn(2*(t-.1125)*Kn/.45):Zn(2,-10*(t-=1))*Jn(2*(t-.1125)*Kn/.45)*.5+1},backIn:function(t){return 1===t&&(t-=.001),t*t*((Qn+1)*t-Qn)},backOut:function(t){return(t-=1)*t*((Qn+1)*t+Qn)+1},backBoth:function(t){return(t*=2)<1?.5*t*t*((1+(Qn*=1.525))*t-Qn):.5*((t-=2)*t*((1+(Qn*=1.525))*t+Qn)+2)},bounceIn:function(t){return 1-tr.bounceOut(1-t)},bounceOut:function(t){var e=7.5625;return 1/2.75>t?e*t*t:2/2.75>t?e*(t-=1.5/2.75)*t+.75:2.5/2.75>t?e*(t-=2.25/2.75)*t+.9375:e*(t-=2.625/2.75)*t+.984375},bounceBoth:function(t){return.5>t?.5*tr.bounceIn(2*t):.5*tr.bounceOut(2*t-1)+.5}},er=function(t){this._iz=t};er.prototype={_iz:null,_80:function(){this._lcallback instanceof Function&&(this._lcallback(),this._lcallback=null)},_jo:function(t){var e=Date.now();this._k9(),this._lcallback=t,this._requestID=requestAnimationFrame(function t(){var i=Date.now(),n=i-e;return!n||this._iz&&!1!==this._iz(n)?(e=i,void(this._requestID=requestAnimationFrame(t.bind(this)))):void this._k9()}.bind(this))},_5v:function(){},_k9:function(){return!!this._requestID&&(this._5v(),this._80(),t.cancelAnimationFrame(this._requestID),void delete this._requestID)},_e2:function(){return null!=this._requestID}};var ir=function(t,e,i,n){this._onStep=t,this._scope=e||this,this._3d=n,i&&i>0&&(this._hf=i)};ir.prototype={_hf:1e3,_3d:null,_e4:0,_k9:function(){return this._e4=0,this._lex=0,T(this,ir,"_k9")},_lex:0,_iz:function(t){if(this._e4+=t,this._e4>=this._hf)return this._onStep.call(this._scope,1,(1-this._lex)*this._hf,t,this._hf),!1;var e=this._e4/this._hf;return this._3d&&(e=this._3d(e)),!1!==this._onStep.call(this._scope,e,(e-this._lex)*this._hf,t,this._hf)&&void(this._lex=e)}},p(ir,er);var nr=function(t){U(t)},rr={version:"0.0",extend:p,doSuperConstructor:y,doSuper:T,createFunction:function(t,e){return e.bind(t)},setClass:S,appendClass:I,removeClass:x,forEach:_,forEachReverse:c,isNumber:C,isString:R,isBoolean:function(t){return t!==i&&(t instanceof Boolean||"boolean"==typeof t)},isArray:D,eventPreventDefault:P,eventStopPropagation:N,stopEvent:M,callLater:function(t,e,i){return e instanceof Object?t=t.bind(e):e&&!i&&(i=parseInt(e)),e&&!i&&(i=parseInt(e)),i?setTimeout(t,i):setTimeout(t)},nextFrame:function(e,i){return i&&(e=e.bind(i)),t.requestAnimationFrame(e)},forEachChild:n,forEachByDepthFirst:s,forEachByDepthFirstReverse:o,forEachByBreadthFirst:a,randomInt:B,randomBool:function(){return Math.random()>=.5},randomColor:function(t){if(t&&t>0&&1>t){var e=Math.floor(16777215*Math.random());return"rgba("+(e>>16&255)+","+(e>>8&255)+","+(255&e)+","+t.toFixed(2)+")"}return F(Math.floor(16777215*Math.random()))},addEventListener:Gn,getFirstElementChildByTagName:function(t,e){e=e.toUpperCase();for(var i=Gi?t.firstChild:t.firstElementChild;i&&(1!=i.nodeType||i.tagName&&i.tagName.toUpperCase()!=e);)i=Gi?i.nextSibling:i.nextElementSibling;return i&&1==i.nodeType&&i.tagName&&i.tagName.toUpperCase()==e?i:null}};rr.isTouchSupport=Ki,rr.isIOS=Vi,rr.intersectsPoint=q,rr.containsRect=K,rr.Rect=on,rr.Size=sn,rr.Point=en,rr.Insets=an,rr.Event=En,rr.PropertyChangeEvent=pn,rr.ListEvent=An,rr.Handler=wn,rr.Dispatcher=bn,rr.Position=hn,rr.Data=Sn,rr.SelectionModel=Cn,rr.DataModel=xn,rr.IListener={onEvent:function(){},beforeEvent:function(){}},rr.loadURL=at,rr.loadXML=function(t,e,i,n,r){at(t,function(n){if(e){var r=n.responseXML;if(!r)return void(i||nr)("'"+t+"' XML format error.");e(r)}},i,n,r)},rr.loadJSON=function(t,e,i,n,r){at(t,function(n){if(e){var r,s=n.responseText;if(!s)return(i||nr)("'"+t+"' JSON format error."),r=new Error("'"+t+"' JSON format error."),e(s,r);try{s=JSON.parse(s)}catch(t){(i||nr)(t),r=t}e(s,r)}},i,n,r)},rr.isMetaKey=st,rr.calculateDistance=nn,rr.HashList=Qi,rr.DragSupport=rt,rr.alert=function(t){alert(t)},rr.prompt=function(t,e,i,n){var r=prompt(t,e);return r!=e&&i?i.call(n,r):r},rr.confirm=function(t,e,i){var n=confirm(t);return n&&e?e.call(i):n},rr.addCSSRule=it;var sr={IMAGE_ADJUST_FLIP:"flip",IMAGE_ADJUST_MIRROR:"mirror",SELECTION_TYPE_BORDER_RECT:"border.rect",SELECTION_TYPE_BORDER:"border",SELECTION_TYPE_SHADOW:"shadow",NS_SVG:"http://www.w3.org/2000/svg",PROPERTY_TYPE_ACCESSOR:0,PROPERTY_TYPE_STYLE:1,PROPERTY_TYPE_CLIENT:2,EDGE_TYPE_DEFAULT:null,EDGE_TYPE_ELBOW:"elbow",EDGE_TYPE_ELBOW_HORIZONTAL:"elbow.H",EDGE_TYPE_ELBOW_VERTICAL:"elbow.V",EDGE_TYPE_ORTHOGONAL:"orthogonal",EDGE_TYPE_ORTHOGONAL_HORIZONTAL:"orthogonal.H",EDGE_TYPE_ORTHOGONAL_VERTICAL:"orthogonal.V",EDGE_TYPE_HORIZONTAL_VERTICAL:"orthogonal.H.V",EDGE_TYPE_VERTICAL_HORIZONTAL:"orthogonal.V.H",EDGE_TYPE_EXTEND_TOP:"extend.top",EDGE_TYPE_EXTEND_LEFT:"extend.left",EDGE_TYPE_EXTEND_BOTTOM:"extend.bottom",EDGE_TYPE_EXTEND_RIGHT:"extend.right",EDGE_TYPE_ZIGZAG:"zigzag",EDGE_CORNER_NONE:"none",EDGE_CORNER_ROUND:"round",EDGE_CORNER_BEVEL:"bevel",GROUP_TYPE_RECT:"rect",GROUP_TYPE_CIRCLE:"circle",GROUP_TYPE_ELLIPSE:"ELLIPSE",SHAPE_CIRCLE:"oval",SHAPE_RECT:"rect",SHAPE_ROUNDRECT:"roundrect",SHAPE_STAR:"star",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",SHAPE_PENTAGON:"pentagon",SHAPE_TRAPEZIUM:"trapezium",SHAPE_RHOMBUS:"rhombus",SHAPE_PARALLELOGRAM:"parallelogram",SHAPE_HEART:"heart",SHAPE_DIAMOND:"diamond",SHAPE_CROSS:"cross",SHAPE_ARROW_STANDARD:"arrow.standard",SHAPE_ARROW_1:"arrow.1",SHAPE_ARROW_2:"arrow.2",SHAPE_ARROW_3:"arrow.3",SHAPE_ARROW_4:"arrow.4",SHAPE_ARROW_5:"arrow.5",SHAPE_ARROW_6:"arrow.6",SHAPE_ARROW_7:"arrow.7",SHAPE_ARROW_8:"arrow.8",SHAPE_ARROW_OPEN:"arrow.open",LINE_CAP_TYPE_BUTT:"butt",LINE_CAP_TYPE_ROUND:"round",LINE_CAP_TYPE_SQUARE:"square",LINE_JOIN_TYPE_BEVEL:"bevel",LINE_JOIN_TYPE_ROUND:"round",LINE_JOIN_TYPE_MITER:"miter"};Ji.SELECTION_TYPE=sr.SELECTION_TYPE_SHADOW,Ji.SELECTION_TOLERANCE=jn?8:3,Ji.SELECTION_BORDER=2,Ji.SELECTION_SHADOW_BLUR=7,Ji.SELECTION_COLOR=F(3422561023),Ji.SELECTION_TYPE=sr.SELECTION_TYPE_SHADOW,Ji.BORDER_RADIUS=10,Ji.POINTER_WIDTH=10,Ji.ARROW_SIZE=10,Ji.IMAGE_MAX_SIZE=200,Ji.LINE_HEIGHT=1.2;var or,ar=t.devicePixelRatio||1;1>ar&&(ar=1),rr.createCanvas=ft;var hr=Hi&&!Ki,lr=9,_r=function(t,e,i,n){var r=t-i,s=e-n;return r*r+s*s};It.prototype={equals:function(t){return this.cx==t.cx&&this.cy==t.cy&&this.r==t.r}},It._lcreateCircle=function(t,e,i){if(!i)return St(t,e);var n,r=_r(t.x,t.y,e.x,e.y),s=_r(t.x,t.y,i.x,i.y),o=_r(i.x,i.y,e.x,e.y);if(r+ur>=s+o)return St(t,e,0,i);if(s+ur>=r+o)return St(t,i,0,e);if(o+ur>=r+s)return St(e,i,0,t);Math.abs(i.y-e.y)<1e-4&&(n=t,t=e,e=n),n=i.x*(t.y-e.y)+t.x*(e.y-i.y)+e.x*(-t.y+i.y);var a=(i.x*i.x*(t.y-e.y)+(t.x*t.x+(t.y-e.y)*(t.y-i.y))*(e.y-i.y)+e.x*e.x*(-t.y+i.y))/(2*n),h=(e.y+i.y)/2-(i.x-e.x)/(i.y-e.y)*(a-(e.x+i.x)/2);return new It(a,h,nn(a,h,t.x,t.y),t,e,i)};var ur=.01,cr={_le1:function(t,e,n,r,s){if(R(t)&&(t=hn.fromString(t)),!t)return{x:0,y:0};var o=0,a=0,h=e._i8;if(n=n||0,t.x===i){var l=t.horizontalPosition,_=t.verticalPosition,u=!0;switch(l){case un:u=!1;break;case _n:o+=h/2}switch(_){case cn:a-=n/2;break;case fn:a+=n/2}}else o=t.x,a=t.y,Math.abs(o)>0&&Math.abs(o)<1&&(o*=h);s&&null!=r&&(a+=r.y,o+=Math.abs(r.x)<1?r.x*h:r.x);var c=Dt.call(e,o,a,u);return c?(s||null==r||c.offset(r),c):{x:0,y:0}},_k4:function(t,e){var i=e.type,n=e.points;switch(i){case Mr:t.arcTo(n[0],n[1],n[2],n[3],e._r);break;case Rr:t.moveTo(n[0],n[1]);break;case Dr:t.lineTo(n[0],n[1]);break;case Pr:t.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case Nr:t.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case Br:t.closePath()}},_55:function(t,e,i,n){var r=e.type;if(r!=Rr&&r!=Br){var s=i.lastPoint,o=e.points;switch(i.type==Rr&&t.add(s.x,s.y),r){case Mr:(function(t,e,i,n,r,s,o,a){var h=nn(e,i,n,r),l=nn(n,r,s,o);if(!h||!l)return t._d=0,t._r=0,t._l1=h,t._l2=l,t._i8=0;var _=Mt(n,r,e,i),u=Mt(n,r,s,o);t._lg1=_,t._lg2=u;var c=_-u;(c=Nt(c))>Math.PI&&(c=2*Math.PI-c,t._CCW=!0);var d=Math.PI-c,f=Math.tan(c/2),g=a/f,v=Math.min(h,l);g>v&&(a=f*(g=v));var E,p=n+Math.cos(_)*g,y=r+Math.sin(_)*g,T=n+Math.cos(u)*g,m=r+Math.sin(u)*g,O=new rn(e,i,n,r),w=new rn(n,r,s,o),b=W(O,p,y),L=W(w,T,m),A=b._3j(L),S=Math.atan2(y-A.y,p-A.x),I=Math.atan2(m-A.y,T-A.x);E=t._CCW?I:S;for(var x,C=0;4>C;){var R,D;if(Nt(C*tn-E)<=d&&(x?x++:x=1,0==C?(R=A.x+a,D=A.y):1==C?(R=A.x,D=A.y+a):2==C?(R=A.x-a,D=A.y):(R=A.x,D=A.y-a),t["$boundaryPoint"+x]={x:R,y:D},2==x))break;C++}t._p1x=p,t._p1y=y,t._p2x=T,t._p2y=m,t._o=A,t._d=g,t._r=a,t._l1=h-g,t._l2=l-g,t._i8=t._l1+d*a})(e,s.x,s.y,o[0],o[1],o[2],o[3],o[4]),t.add(o[0],o[1]),t.add(e._p1x,e._p1y),t.add(e._p2x,e._p2y),e.$boundaryPoint1&&t.add(e.$boundaryPoint1.x,e.$boundaryPoint1.y),e.$boundaryPoint2&&t.add(e.$boundaryPoint2.x,e.$boundaryPoint2.y);break;case Dr:t.add(o[0],o[1]);break;case Pr:!function(t,e){e.add(t[4],t[5]);var i=Tt(t[0],t[2],t[4]);if(i>0&&1>i){var n=yt(i,t);e.add(n.x,n.y)}var r=Tt(t[1],t[3],t[5]);r>0&&1>r&&(n=yt(r,t),e.add(n.x,n.y))}([s.x,s.y].concat(o),t);break;case Nr:!function(t,e){e.add(t[6],t[7]);var i=Lt(t[0],t[2],t[4],t[6]);if(i)for(var n=0;n<i.length;n++)if(!(0>=(s=i[n])||s>=1)){var r=bt(s,t);e.add(r.x,r.y)}if(i=Lt(t[1],t[3],t[5],t[7]))for(n=0;n<i.length;n++){var s;0>=(s=i[n])||s>=1||(r=bt(s,t),e.add(r.x,r.y))}}([s.x,s.y].concat(o),t);break;case Br:n&&t.add(n.points[0],n.points[1])}}},_57:function(t,e,i){var n=t.type;if(n==Rr)return 0;var r=e.lastPoint,s=t.points;switch(n==Nr&&4==s.length&&(n=Pr),n){case Dr:return nn(s[0],s[1],r.x,r.y);case Mr:return t._i8;case Pr:var o=wt([r.x,r.y].concat(s));return t._lf=o,o(1);case Nr:o=function(t,e){function i(t,e,i,n){var r=3*e-t-3*i+n,s=2*t-4*e+2*i,o=e-t;return function(t){return 3*(r*t*t+s*t+o)}}function n(t,e){var i=r(t),n=s(t);return Math.sqrt(i*i+n*n)*e}var r=i(t[0],t[2],t[4],t[6]),s=i(t[1],t[3],t[5],t[7]),o=1/(e=e||100);return function(t){if(!t)return 0;for(var e,i=0,r=0;;){if((e=i+o)>=t)return r+n(i,e-i);r+=n(i,o),i=e}}}([r.x,r.y].concat(s));return t._lf=o,o(1)||function(t){var e=t[0]-0,i=t[1]-0,n=t[2]-0,r=t[3]-0,s=t[4]-0,o=t[5]-0,a=3*(3*n-e-3*s+(t[6]-0)),h=6*(e-2*n+s),l=3*(-e+n),_=3*(3*r-i-3*o+(t[7]-0)),u=6*(i-2*r+o),c=3*(-i+r),d=function(t){var e=a*t*t+h*t+l,i=_*t*t+u*t+c;return Math.sqrt(e*e+i*i)};return(d(0)+4*d(.5)+d(1))/6}([r.x,r.y].concat(s));case Br:if(r&&i)return t.points=i.points,nn(i.points[0],i.points[1],r.x,r.y)}return 0}},dr=/^data:image\/(\w+);base64,/i,fr=/^gif/i,gr=/^svg/i,vr=10,Er=11,pr=12,yr=20,Tr=30;Ji.IMAGE_WIDTH=50,Ji.IMAGE_HEIGHT=30,Ji.MAX_CACHE_PIXELS=1e6;kt.prototype={_il:0,_5z:!0,_jl:null,_ih:null,_k7:null,_k6:null,_lgu:i,_8p:i,_6t:function(){return 1==this._il},getBounds:function(t){return this._k6==Tr?this._k7.getBounds(t):(this._5z&&this._em(),this)},validate:function(){this._5z&&this._em()},_em:function(){if(this._5z=!1,this._k6==Tr)return this._k7.validate(),void this.setByRect(this._k7.bounds);if(this._k6!=yr){if(1!=this._il)try{this._lcz()}catch(t){this._il=3,rr.error(t)}}else this._8t()},_5g:function(){this._lcu(),this._dispatcher.clear(),delete this._dispatcher},_hd:function(t){this._jl&&this._jl.parentNode&&this._jl.parentNode.removeChild(this._jl),this._il=3,rr.error("Image load error - "+this._k7),this._pixels=null,this._ih=null,this._jl=null,!1!==t&&this._5g()},_lcz:function(){var t=this._k7;if(this._il=1,this._dispatcher=new bn,this._k6!=pr)this._jl||(this._jl=e.createElement("img"),Gi&&(this._jl.style.visibility="hidden",e.body.appendChild(this._jl))),this._jl.src=t,this._jl.width&&(this.width=this._jl.width,this.height=this._jl.height),this._jl.onload=Gi?function(t){setTimeout(this._7j.bind(this,t),100)}.bind(this):this._7j.bind(this),this._jl.onerror=this._hd.bind(this);else{for(var i in Ur)this[i]=Ur[i];ne(this._k7,this,this._lcg,this._hd,this._ei)}},_7j:function(){this._il=2;var t=this._jl.width,e=this._jl.height;if(this._jl.parentNode&&this._jl.parentNode.removeChild(this._jl),t&&e){this.width=t,this.height=e;var i=this._lcx();i.width=t,i.height=e,i.g.drawImage(this._jl,0,0,t,e),this._pixels=Gi&&this._k6==Er?null:function(t){var e=t.width,i=t.height,n=Et(t.g,0,0,e,i);return n?Ht(n.data,e,i):void 0}(i),this._5g()}else this._hd()},_8t:function(){var t=this._k7;if(t.draw instanceof Function){if(!1===t.cacheable&&t.width&&t.height)return this.width=t.width,void(this.height=t.height);var e=t.width||Ji.IMAGE_MAX_SIZE,i=t.height||Ji.IMAGE_MAX_SIZE,n=this._lcx();n.width=e,n.height=i;var r=n.g;t.draw(r);var s=Et(r,0,0,e,i);if(s){var o=Ht(s.data,e,i);this.x=o._x,this.y=o._y,this.width=o._width,this.height=o._height,n.width=this.width,n.height=this.height,r.putImageData(s,-this.x,-this.y),this._pixels=o}}else this._hd(!1)},_lcx:function(){return this._ih||(this._ih=ft())},_6o:function(t,e,i,n,r,s){e.save(),e.rect(0,0,n,r),e.fillStyle=s||"#CCC",e.fill(),e.clip(),e.textAlign="center",e.textBaseline="middle",e.fillStyle="#888";var o=6*(e.canvas.ratio||1);e.font="normal "+o+"px Verdana,helvetica,arial,sans-serif",e.strokeStyle="#FFF",e.lineWidth=1,e.strokeText(t,n/2+.5,r/2+.5),e.strokeStyle="#000",e.strokeText(t,n/2-.5,r/2-.5),e.fillText(t,n/2,r/2),e.restore()},draw:function(t,e,i,n,r,s){if(this.width&&this.height){e=e||1,n=n||1,r=r||1;var o=this.width*n,a=this.height*r;if(s&&i.shadowColor&&(t.shadowColor=i.shadowColor,t.shadowBlur=(i.shadowBlur||0)*e,t.shadowOffsetX=(i.shadowOffsetX||0)*e,t.shadowOffsetY=(i.shadowOffsetY||0)*e),1==this._il)return this._6o("Loading...",t,e,o,a,i.renderColor);if(3==this._il)return this._6o("Error...",t,e,o,a,i.renderColor);if(this._k6==Tr)return t.scale(n,r),void this._k7.draw(t,e,i);var h=this._f0(e,n,r);return h?((this.x||this.y)&&t.translate(this.x*n,this.y*r),t.scale(n/h.scale,r/h.scale),void h._k4(t,i.renderColor,i.renderColorBlendMode)):void this._i7(t,e,n,r,this.width*n,this.height*r,i)}},_i7:function(t,e,i,n,r,s,o){if(this._k6==yr)return 1!=i&&1!=n&&t.scale(i,n),void this._k7.draw(t,o);if(this._jl){if(!Yi)return void t.drawImage(this._jl,0,0,r,s);i=e*r/this.width,n=e*s/this.height;t.scale(1/i,1/n),t.drawImage(this._jl,0,0,r*i,s*n)}},_ii:null,_f0:function(t,e,i){if(this._k6==yr&&!1===this._k7.cacheable)return null;if(this._k6==vr||(t*=Math.max(e,i))<=1)return this._defaultCache||(this._defaultCache=this._et(this._ih||this._jl,1)),this._defaultCache;var n=this._ii.maxScale||0;if(n>=(t=Math.ceil(t))){for(var r=t,s=this._ii[r];!s&&++r<=n;)s=this._ii[r];if(s)return s}t%2&&t++;var o=this.width*t,a=this.height*t;if(o*a>Ji.MAX_CACHE_PIXELS)return null;var h=ft(o,a);return(this.x||this.y)&&h.g.translate(-this.x*t,-this.y*t),this._i7(h.g,1,t,t,o,a),this._et(h,t)},_et:function(t,e){var i=new $r(t,e);return this._ii[e]=i,this._ii.maxScale=e,i},hitTest:function(t,e,i){return this._k6==Tr?this._k7.hitTest.apply(this._k7,arguments):!(this._pixels||this._jl&&this._jl._pixels)||(this._pixels||this._jl._pixels)._h7(t,e,i)},_lcu:function(){this._dispatcher&&this._dispatcher.onEvent(new En(this,"image","load",this._jl))},_lgk:function(t,e){this._dispatcher&&this._dispatcher.addListener(t,e)},_6e:function(t,e){this._dispatcher&&this._dispatcher.removeListener(t,e)},_lc0:function(t){this._ii={},(t||this.width*this.height>1e5)&&(this._jl=null,this._ih=null)}},p(kt,on);var mr={};rr.drawImage=function(t,e,i){var n=Ft(t);return n?(n.validate(),(n._k6==pr||n._6t())&&n._lgk(function(t){t.source&&(this.width=this.width,jt(t.source,this,i))},e),void jt(n,e,i)):(rr.error("draw image error - "+t),!1)},rr.registerImage=Gt,rr.hasImage=$t,rr.getAllImages=function(){var t=[];for(var e in mr)t.push(e);return t};var Or=function(t,e,i,n,r,s){this.type=t,this.colors=e,this.positions=i,this.angle=n||0,this.tx=r||0,this.ty=s||0};sr.GRADIENT_TYPE_RADIAL="r",sr.GRADIENT_TYPE_LINEAR="l",Or.prototype={type:null,colors:null,positions:null,angle:null,tx:0,ty:0,position:hn.CENTER_MIDDLE,isEmpty:function(){return null==this.colors||0==this.colors.length},_78:function(){var t=this.colors.length;if(1==t)return[0];for(var e=[],i=1/(t-1),n=0;t>n;n++)e.push(i*n);return this.positions||(this.positions=e),e},generatorGradient:function(t){if(null==this.colors||0==this.colors.length)return null;var e,i=gt();if(this.type==sr.GRADIENT_TYPE_LINEAR){var n,r=this.angle;if(r>Math.PI&&(r-=Math.PI),r<=Math.PI/2){var s=Math.atan2(t.height,t.width),o=Math.sqrt(t.width*t.width+t.height*t.height),a=s-r;n=Math.cos(a)*o}else{s=Math.atan2(t.width,t.height),o=Math.sqrt(t.width*t.width+t.height*t.height),a=s-(r-Math.PI/2);n=Math.cos(a)*o}var h=n/2,l=h*Math.cos(r),_=h*Math.sin(r),u=t.x+t.width/2-l,c=t.y+t.height/2-_,d=t.x+t.width/2+l,f=t.y+t.height/2+_;e=i.createLinearGradient(u,c,d,f)}else{if(!(this.type=sr.GRADIENT_TYPE_RADIAL))return null;var g=Z(this.position,t.width,t.height);g.x+=t.x,g.y+=t.y,this.tx&&(g.x+=Math.abs(this.tx)<1?t.width*this.tx:this.tx),this.ty&&(g.y+=Math.abs(this.ty)<1?t.height*this.ty:this.ty);var v=nn(g.x,g.y,t.x,t.y);v=Math.max(v,nn(g.x,g.y,t.x,t.y+t.height)),v=Math.max(v,nn(g.x,g.y,t.x+t.width,t.y+t.height)),v=Math.max(v,nn(g.x,g.y,t.x+t.width,t.y)),e=i.createRadialGradient(g.x,g.y,0,g.x,g.y,v)}var E=this.colors,p=this.positions;p&&p.length==E.length||(p=this._78());for(var y=0,T=E.length;T>y;y++)e.addColorStop(p[y],E[y]);return e}};var wr=new Or(sr.GRADIENT_TYPE_LINEAR,[F(2332033023),F(1154272460),F(1154272460),F(1442840575)],[.1,.3,.7,.9],Math.PI/2),br=new Or(sr.GRADIENT_TYPE_LINEAR,[F(2332033023),F(1154272460),F(1154272460),F(1442840575)],[.1,.3,.7,.9],0),Lr=(new Or(sr.GRADIENT_TYPE_LINEAR,[F(1154272460),F(1442840575)],[.1,.9],0),new Or(sr.GRADIENT_TYPE_RADIAL,[F(2298478591),F(1156509422),F(1720223880),F(1147561574)],[.1,.3,.7,.9],0,-.3,-.3)),Ar=[F(0),F(4294901760),F(4294967040),F(4278255360),F(4278250239),F(4278190992),F(4294901958),F(0)],Sr=[0,.12,.28,.45,.6,.75,.8,1],Ir=new Or(sr.GRADIENT_TYPE_LINEAR,Ar,Sr),xr=new Or(sr.GRADIENT_TYPE_LINEAR,Ar,Sr,Math.PI/2),Cr=new Or(sr.GRADIENT_TYPE_RADIAL,Ar,Sr);Or.LINEAR_GRADIENT_VERTICAL=wr,Or.LINEAR_GRADIENT_HORIZONTAL=br,Or.RADIAL_GRADIENT=Lr,Or.RAINBOW_LINEAR_GRADIENT=Ir,Or.RAINBOW_LINEAR_GRADIENT_VERTICAL=xr,Or.RAINBOW_RADIAL_GRADIENT=Cr;var Rr="m",Dr="l",Pr="q",Nr="c",Mr="a",Br="z";sr.SEGMENT_MOVE_TO=Rr,sr.SEGMENT_LINE_TO=Dr,sr.SEGMENT_QUAD_TO=Pr,sr.SEGMENT_CURVE_TO=Nr,sr.SEGMENT_ARC_TO=Mr,sr.SEGMENT_CLOSE=Br;var kr=function(t,e){this.id=++Mi,D(t)?this.points=t:(this.type=t,this.points=e)};kr.prototype={toJSON:function(){var t={type:this.type,points:this.points};return this.invalidTerminal&&(t.invalidTerminal=!0),t},parseJSON:function(t){this.type=t.type,this.points=t.points,this.invalidTerminal=t.invalidTerminal},points:null,type:Dr,clone:function(){return new kr(this.type,this.points?d(this.points):null)},move:function(t,e){if(this.points)for(var i=0,n=this.points.length;n>i;i++){var r=this.points[i];rr.isNumber(r)&&(this.points[i]+=i%2==0?t:e)}}},j(kr.prototype,{lastPoint:{get:function(){return this.type==Mr?{x:this._p2x,y:this._p2y}:{x:this.points[this.points.length-2],y:this.points[this.points.length-1]}}},firstPoint:{get:function(){return{x:this.points[0],y:this.points[1]}}}}),rr.PathSegment=kr;var Gr=0,Fr=function(t){this.bounds=new on,this._ep=t||[]};Fr.prototype={toJSON:function(){var t=[];return this._ep.forEach(function(e){t.push(e.toJSON())}),t},parseJSON:function(t){var e=this._ep;t.forEach(function(t){e.push(new kr(t.type,t.points))})},clear:function(){this._ep.length=0,this.bounds.clear(),this._i8=0,this._5z=!0},_lcw:!0,_5q:function(t,e){this._lcw&&0===this._ep.length&&t!=Rr&&this._ep.push(new kr(Rr,[0,0])),this._ep.push(new kr(t,e)),this._5z=!0},add:function(t,e){f(this._ep,t,e),this._5z=!0},removePathSegment:function(t){return!(t>=this._ep.length)&&(this._ep.splice(t,1),void(this._5z=!0))},moveTo:function(t,e){this._5q(Rr,[t,e])},lineTo:function(t,e){this._5q(Dr,[t,e])},quadTo:function(t,e,i,n){this._5q(Pr,[t,e,i,n])},curveTo:function(t,e,i,n,r,s){this._5q(Nr,[t,e,i,n,r,s])},arcTo:function(t,e,i,n,r){this._5q(Mr,[t,e,i,n,r])},closePath:function(){this._5q(Br)},_7l:function(t,e,i,n,r){if(n.selectionColor){if(i==sr.SELECTION_TYPE_SHADOW){if(!n.selectionShadowBlur)return;return t.shadowColor=n.selectionColor,t.shadowBlur=n.selectionShadowBlur*e,t.shadowOffsetX=(n.selectionShadowOffsetX||0)*e,void(t.shadowOffsetY=(n.selectionShadowOffsetY||0)*e)}if(i==sr.SELECTION_TYPE_BORDER){if(!n.selectionBorder)return;t.strokeStyle=n.selectionColor;var s=r.lineWidth||0;r.outline&&(s+=2*r.outline),t.lineWidth=n.selectionBorder+s,this._k4(t),t.stroke()}}},_5z:!0,_ep:null,_i8:0,lineCap:"butt",lineJoin:"round",draw:function(t,e,i,n,r){t.lineCap=i.lineCap||this.lineCap,t.lineJoin=i.lineJoin||this.lineJoin,n&&(r||(r=i),this._7l(t,e,r.selectionType,r,i));var s=n&&r.selectionType==sr.SELECTION_TYPE_SHADOW;i.outlineStyle&&(this._k4(t),t.lineWidth=i.lineWidth+2*(i.outline||0),t.strokeStyle=i.outlineStyle,t.stroke(),s&&(s=!1,t.shadowColor="rgba(0,0,0,0)")),t.lineWidth=0,this._k4(t),i.fillColor&&(t.fillStyle=i.renderColor||i.fillColor,t.fill()),i.fillGradient&&(t.fillStyle=i._fillGradient||i.fillGradient,t.fill()),i.lineWidth&&(t.lineWidth=i.lineWidth,i.lineDash&&(i.lineFillColor&&(t.strokeStyle=i.lineFillColor,t.stroke(),s&&(t.shadowColor="rgba(0,0,0,0)")),t.lineCap=i.lineDashCap||t.lineCap,t.lineJoin=i.lineDashJoin||t.lineJoin,t.lineDash=i.lineDash,t.lineDashOffset=i.lineDashOffset),t.strokeStyle=i.renderColor||i.strokeStyle,t.stroke(),t.lineDash=[])},_k4:function(t){t.beginPath();for(var e,i,n=0,r=this._ep.length;r>n;n++)e=this._ep[n],cr._k4(t,e,i),i=e},invalidate:function(){this._5z=!0},validate:function(){if(this._5z=!1,this.bounds.clear(),this._i8=0,0!=this._ep.length)for(var t,e,i=this._ep,n=1,r=i[0],s=r,o=i.length;o>n;n++)(t=i[n]).type==Rr?s=t:(cr._55(this.bounds,t,r,s),e=cr._57(t,r,s),t._i8=e,this._i8+=e),r=t},getBounds:function(t,e){if(this._5z&&this.validate(),e=e||new on,t){var i=t/2;e.set(this.bounds.x-i,this.bounds.y-i,this.bounds.width+t,this.bounds.height+t)}else e.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);return e},hitTest:function(t,e,i,n,r,s){return function(t,e,i,n,r,s){if(r=r||0,i=i||0,!r&&!s)return!1;if(!n&&!this.getBounds(r).intersectsPoint(t,e,i))return!1;var o=Math.round(2*i)||1,a=gt(o,o),h=(a.canvas,-t+i),l=-e+i;if(a.setTransform(1,0,0,1,h,l),!a.isPointInStroke){this._k4(a),r&&a.stroke(),s&&a.fill();var _=Et(a,0,0,o,o);if(!_)return!1;for(var u=(_=_.data).length/4;u>0;){if(_[4*u-1]>Gr)return!0;--u}return!1}return a.lineWidth=(r||0)+2*i,this._k4(a),!(!r||!a.isPointInStroke(i,i))||!!s&&a.isPointInPath(i,i)}.call(this,t,e,i,n,r,s)},toSegments:function(){return[].concat(this._ep)},generator:function(t,e,i,n,r){return function(t,e,i,n,r){this._5z&&this.validate();var s=r?this.getBounds(r):this.bounds,o=i/s.width,a=t-o*s.x,h=n/s.height,l=e-h*s.y,u=[];return _(this._ep,function(t){var e=t.clone(),i=e.points;if(i&&i.length){for(var n=i.length,r=[],s=0;n>s;s++){var _=i[s],c=i[++s];_=o*_+a,c=h*c+l,r.push(_),r.push(c)}e.points=r}u.push(e)},this),new Fr(u)}.call(this,t,e,i,n,r)},getLocation:function(t,e){return Dt.call(this,t,e||0)}},j(Fr.prototype,{segments:{get:function(){return this._ep},set:function(t){this.clear(),this._ep=t}},length:{get:function(){return this._5z&&this.validate(),this._i8}},_empty:{get:function(){return 0==this._ep.length}}}),Yt.prototype={_15:function(t,e){var i,n,r,s,o,a=t.length,h=0,l=0;for(o=0;a>o;o+=4)if(t[o+3]>0){i=(o+4)/e/4|0;break}for(o=a-4;o>=0;o-=4)if(t[o+3]>0){n=(o+4)/e/4|0;break}for(h=0;e>h;h++){for(l=i;n>l;l++)if(t[l*e*4+4*h+3]>0){r=h;break}if(r>=0)break}for(h=e-1;h>=0;h--){for(l=i;n>l;l++)if(t[l*e*4+4*h+3]>0){s=h;break}if(s>=0)break}this._x=r,this._y=i,this._width=s-r+1,this._height=n-i+1,this._ij=new on(r,i,this._width,this._height),this._pixelSize=this._width*this._height,this._originalPixelsWidth=e,this._originalPixels=t},_ea:function(t,e){return this._originalPixels[4*(t+this._x+(this._y+e)*this._originalPixelsWidth)+3]},_h7:function(t,e,i){(!i||1>=i)&&(i=1),i|=0,t=Math.round(t-this._x)-i,e=Math.round(e-this._y)-i,i+=i;for(var n=t,r=e;e+i>r;){for(n=t;t+i>n;){if(this._ea(n,r))return!0;++n}++r}return!1}},sr.BLEND_MODE_DARKEN="darken",sr.BLEND_MODE_MULTIPLY="multiply",sr.BLEND_MODE_COLOR_BURN="color.burn",sr.BLEND_MODE_LINEAR_BURN="linear.burn",sr.BLEND_MODE_LIGHTEN="lighten",sr.BLEND_MODE_SCREEN="screen",sr.BLEND_MODE_GRAY="gray",Ji.BLEND_MODE=sr.BLEND_MODE_LINEAR_BURN;var $r=function(t,e,i){this._ih=t,this.scale=e||1,t instanceof Image&&(i=!1),this._hp=i};$r.prototype={scale:1,_ih:null,_ii:null,_hp:!0,_k4:function(t,e,i){if(e&&(e=function(t){if("#"==t[0]){if(3==(t=t.substring(1)).length)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(6!=t.length)return;return[(t=parseInt(t,16))>>16&255,t>>8&255,255&t]}if(/^rgb/i.test(t)){var e=t.indexOf("("),i=t.indexOf(")");if(0>e||e>i)return;if((t=(t=t.substring(e+1,i)).split(",")).length<3)return;return[parseInt(t[0]),parseInt(t[1]),parseInt(t[2]),3==t.length?255:parseInt(t[3])]}rr.error("color format error, ["+t+"]")}(e)),e&&!1!==this._hp){this._ii||(this._ii={});var n=e+i,r=this._ii[n];if(r||((r=function(t,e,i){var n=Et(t.g,0,0,t.width,t.height);if(n){var r=n.data;if(i instanceof Function)r=i(t,r,e)||r;else{var s=e[0]/255,o=e[1]/255,a=e[2]/255;if(i==sr.BLEND_MODE_GRAY)for(var h=0,l=r.length;l>h;h+=4){var _=77*r[h]+151*r[h+1]+28*r[h+2]>>8;r[h]=_*s|0,r[h+1]=_*o|0,r[h+2]=_*a|0}else for(h=0,l=r.length;l>h;h+=4)r[h]=255*Ut(s,r[h]/255,i)|0,r[h+1]=255*Ut(o,r[h+1]/255,i)|0,r[h+2]=255*Ut(a,r[h+2]/255,i)|0}return(t=ft(t.width,t.height)).g.putImageData(n,0,0),t}}(this._ih,e,i))||(this._hp=!1),this._ii[n]=r||this._ih),r)if(Gi)try{t.drawImage(r,0,0)}catch(t){}else t.drawImage(r,0,0)}else t.drawImage(this._ih,0,0)}};var jr=function(t,e,i,n,r,s,o,a,h){this._kn=Vt(t,e,i,n,r,s,o,a,h)},zr={server:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var e=t.createLinearGradient(6.75,3.9033,30.5914,27.7447);e.addColorStop(.0493,"#1C6B9D"),e.addColorStop(.0689,"#186493"),e.addColorStop(.0939,"#145E8B"),e.addColorStop(.129,"#115B87"),e.addColorStop(.2266,"#115A85"),e.addColorStop(.2556,"#125C89"),e.addColorStop(.2869,"#176291"),e.addColorStop(.3194,"#1D6C9F"),e.addColorStop(.3525,"#2479B0"),e.addColorStop(.3695,"#2881BB"),e.addColorStop(.5025,"#1F6FA2"),e.addColorStop(.9212,"#115A86"),e.addColorStop(1,"#004063"),t.fillStyle=e,t.beginPath(),t.moveTo(25.677,4.113),t.bezierCurveTo(25.361,2.4410000000000007,23.364,2.7940000000000005,22.14,2.7990000000000004),t.bezierCurveTo(19.261,2.813,16.381,2.8260000000000005,13.502,2.8400000000000003),t.bezierCurveTo(12.185,2.846,10.699000000000002,2.652,9.393,2.8790000000000004),t.bezierCurveTo(9.19,2.897,8.977,2.989,8.805,3.094),t.bezierCurveTo(8.084999999999999,3.5109999999999997,7.436999999999999,4.1259999999999994,6.776,4.63),t.bezierCurveTo(5.718999999999999,5.436,4.641,6.22,3.6029999999999998,7.05),t.bezierCurveTo(4.207,6.5889999999999995,21.601999999999997,36.579,21.028,37.307),t.bezierCurveTo(22.019,36.063,23.009999999999998,34.819,24.000999999999998,33.575),t.bezierCurveTo(24.587999999999997,32.84,25.589999999999996,31.995000000000005,25.593999999999998,30.983000000000004),t.bezierCurveTo(25.595999999999997,30.489000000000004,25.598,29.994000000000003,25.601,29.500000000000004),t.bezierCurveTo(25.612,26.950000000000003,25.622,24.400000000000006,25.633,21.85),t.bezierCurveTo(25.657,16.318,25.680999999999997,10.786000000000001,25.704,5.253),t.bezierCurveTo(25.706,4.885,25.749,4.478,25.677,4.113),t.bezierCurveTo(25.67,4.077,25.697,4.217,25.677,4.113),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(19.763,6.645),t.bezierCurveTo(20.002000000000002,6.643999999999999,20.23,6.691999999999999,20.437,6.778),t.bezierCurveTo(20.644000000000002,6.864999999999999,20.830000000000002,6.991,20.985,7.146999999999999),t.bezierCurveTo(21.14,7.302999999999999,21.266,7.488999999999999,21.352999999999998,7.696999999999999),t.bezierCurveTo(21.438999999999997,7.903999999999999,21.487,8.133,21.487,8.372),t.lineTo(21.398,36.253),t.bezierCurveTo(21.397,36.489,21.349,36.713,21.262,36.917),t.bezierCurveTo(21.174,37.121,21.048000000000002,37.305,20.893,37.458),t.bezierCurveTo(20.738,37.611,20.553,37.734,20.348,37.818999999999996),t.bezierCurveTo(20.141,37.903999999999996,19.916,37.95099999999999,19.679,37.949),t.lineTo(4.675,37.877),t.bezierCurveTo(4.4399999999999995,37.876000000000005,4.216,37.827000000000005,4.012,37.741),t.bezierCurveTo(3.8089999999999997,37.653999999999996,3.6249999999999996,37.528999999999996,3.4719999999999995,37.376),t.bezierCurveTo(3.3179999999999996,37.221,3.1939999999999995,37.037,3.1079999999999997,36.833999999999996),t.bezierCurveTo(3.022,36.629999999999995,2.9739999999999998,36.406,2.9739999999999998,36.172),t.lineTo(2.924,8.431),t.bezierCurveTo(2.923,8.192,2.971,7.964,3.057,7.758),t.bezierCurveTo(3.143,7.552,3.267,7.365,3.4219999999999997,7.209),t.bezierCurveTo(3.5769999999999995,7.052999999999999,3.76,6.925,3.965,6.837),t.bezierCurveTo(4.17,6.749,4.396,6.701,4.633,6.7),t.lineTo(19.763,6.645),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.fillStyle="#efefef",t.beginPath(),t.arc(12.208,26.543,2.208,0,6.283185307179586,!0),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.arc(12.208,26.543,1.876,0,6.283185307179586,!0),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#efefef",t.beginPath(),t.moveTo(19.377,17.247),t.bezierCurveTo(19.377,17.724,18.991999999999997,18.108999999999998,18.516,18.108999999999998),t.lineTo(5.882,18.108999999999998),t.bezierCurveTo(5.404999999999999,18.108999999999998,5.02,17.723,5.02,17.247),t.lineTo(5.02,11.144),t.bezierCurveTo(5.02,10.666,5.406,10.281,5.882,10.281),t.lineTo(18.516,10.281),t.bezierCurveTo(18.993,10.281,19.377,10.666,19.377,11.144),t.lineTo(19.377,17.247),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(18.536,13.176),t.bezierCurveTo(18.536,13.518,18.261000000000003,13.794,17.919,13.794),t.lineTo(6.479,13.794),t.bezierCurveTo(6.1370000000000005,13.794,5.861,13.518,5.861,13.176),t.lineTo(5.861,11.84),t.bezierCurveTo(5.861,11.498,6.137,11.221,6.479,11.221),t.lineTo(17.918,11.221),t.bezierCurveTo(18.259999999999998,11.221,18.535,11.497,18.535,11.84),t.lineTo(18.535,13.176),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(18.536,16.551),t.bezierCurveTo(18.536,16.892999999999997,18.261000000000003,17.168999999999997,17.919,17.168999999999997),t.lineTo(6.479,17.168999999999997),t.bezierCurveTo(6.1370000000000005,17.168999999999997,5.861,16.892999999999997,5.861,16.551),t.lineTo(5.861,15.215999999999998),t.bezierCurveTo(5.861,14.872999999999998,6.137,14.596999999999998,6.479,14.596999999999998),t.lineTo(17.918,14.596999999999998),t.bezierCurveTo(18.259999999999998,14.596999999999998,18.535,14.872999999999998,18.535,15.215999999999998),t.lineTo(18.535,16.551),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore()}},exchanger2:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var e=t.createLinearGradient(.4102,24.3613,39.5898,24.3613);e.addColorStop(0,"#1C6B9D"),e.addColorStop(.0788,"#115A85"),e.addColorStop(.2046,"#135D89"),e.addColorStop(.3649,"#186494"),e.addColorStop(.5432,"#1F70A4"),e.addColorStop(.6798,"#257AB2"),e.addColorStop(.7462,"#2377AD"),e.addColorStop(.8508,"#1E6DA0"),e.addColorStop(.98,"#125C89"),e.addColorStop(1,"#105984"),t.fillStyle=e,t.beginPath(),t.moveTo(.41,16.649),t.bezierCurveTo(.633,19.767,.871,20.689,1.094,23.807000000000002),t.bezierCurveTo(1.29,26.548000000000002,3.324,28.415000000000003,5.807,29.711000000000002),t.bezierCurveTo(10.582,32.202000000000005,16.477,32.806000000000004,21.875999999999998,32.523),t.bezierCurveTo(26.929,32.258,32.806,31.197000000000003,36.709999999999994,27.992000000000004),t.bezierCurveTo(38.30499999999999,26.728000000000005,38.83599999999999,25.103000000000005,38.998999999999995,23.161000000000005),t.bezierCurveTo(39.589,16.135000000000005,39.589,16.135000000000005,39.589,16.135000000000005),t.bezierCurveTo(39.589,16.135000000000005,3.26,16.647,.41,16.649),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(16.4,25.185),t.bezierCurveTo(12.807999999999998,24.924999999999997,9.139,24.238,5.857999999999999,22.705),t.bezierCurveTo(3.175999999999999,21.450999999999997,-.32200000000000095,18.971999999999998,.544999999999999,15.533999999999999),t.bezierCurveTo(1.3499999999999992,12.335999999999999,4.987999999999999,10.495999999999999,7.807999999999999,9.428999999999998),t.bezierCurveTo(11.230999999999998,8.133999999999999,14.911999999999999,7.519999999999999,18.558,7.345999999999998),t.bezierCurveTo(22.233,7.169999999999998,25.966,7.437999999999998,29.548000000000002,8.300999999999998),t.bezierCurveTo(32.673,9.052999999999999,36.192,10.296,38.343,12.814999999999998),t.bezierCurveTo(40.86600000000001,15.768999999999998,39.208000000000006,19.066999999999997,36.406000000000006,21.043999999999997),t.bezierCurveTo(33.566,23.046999999999997,30.055000000000007,24.071999999999996,26.670000000000005,24.676999999999996),t.bezierCurveTo(23.289,25.28,19.824,25.436,16.4,25.185),t.bezierCurveTo(13.529,24.977,19.286,25.396,16.4,25.185),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(5.21,21.754),t.lineTo(8.188,17.922),t.lineTo(9.53,18.75),t.lineTo(15.956,16.004),t.lineTo(18.547,17.523),t.lineTo(12.074,20.334),t.lineTo(13.464,21.204),t.lineTo(5.21,21.754),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(17.88,14.61),t.lineTo(9.85,13.522),t.lineTo(11.703,12.757),t.lineTo(7.436,10.285),t.lineTo(10.783,8.942),t.lineTo(15.091,11.357),t.lineTo(16.88,10.614),t.lineTo(17.88,14.61),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(17.88,14.61),t.lineTo(9.85,13.522),t.lineTo(11.703,12.757),t.lineTo(7.436,10.285),t.lineTo(10.783,8.942),t.lineTo(15.091,11.357),t.lineTo(16.88,10.614),t.lineTo(17.88,14.61),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(23.556,15.339),t.lineTo(20.93,13.879),t.lineTo(26.953,11.304),t.lineTo(25.559,10.567),t.lineTo(33.251,9.909),t.lineTo(31.087,13.467),t.lineTo(29.619,12.703),t.lineTo(23.556,15.339),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(30.028,23.383),t.lineTo(24.821,20.366),t.lineTo(22.915,21.227),t.lineTo(21.669,16.762),t.lineTo(30.189,17.942),t.lineTo(28.33,18.782),t.lineTo(33.579,21.725),t.lineTo(30.028,23.383),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(30.028,23.383),t.lineTo(24.821,20.366),t.lineTo(22.915,21.227),t.lineTo(21.669,16.762),t.lineTo(30.189,17.942),t.lineTo(28.33,18.782),t.lineTo(33.579,21.725),t.lineTo(30.028,23.383),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.restore(),t.restore(),t.restore()}},exchanger:{draw:function(t){var e;t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(e=t.createLinearGradient(.2095,20.7588,39.4941,20.7588)).addColorStop(0,"#6A6969"),e.addColorStop(.0788,"#4F4C4B"),e.addColorStop(.352,"#545252"),e.addColorStop(.6967,"#646262"),e.addColorStop(.8916,"#6F6E6F"),e.addColorStop(.9557,"#4C4948"),e.addColorStop(1,"#494645"),t.fillStyle=e,t.beginPath(),t.moveTo(39.449,12.417),t.lineTo(39.384,9.424),t.bezierCurveTo(39.384,9.424,.7980000000000018,22.264,.3710000000000022,23.024),t.bezierCurveTo(-.026999999999997804,23.733,.4240000000000022,24.903000000000002,.5190000000000022,25.647000000000002),t.bezierCurveTo(.7240000000000022,27.244000000000003,.9240000000000023,28.841,1.1350000000000022,30.437),t.bezierCurveTo(1.3220000000000023,31.843,2.7530000000000023,32.094,3.9620000000000024,32.094),t.bezierCurveTo(8.799000000000003,32.092,13.636000000000003,32.091,18.473000000000003,32.089),t.bezierCurveTo(23.515,32.086999999999996,28.556000000000004,32.086,33.598,32.083999999999996),t.bezierCurveTo(34.859,32.083999999999996,36.286,31.979999999999997,37.266,31.081999999999997),t.bezierCurveTo(37.537,30.820999999999998,37.655,30.535999999999998,37.699999999999996,30.229999999999997),t.lineTo(37.711,30.316999999999997),t.lineTo(39.281,16.498999999999995),t.bezierCurveTo(39.281,16.498999999999995,39.467999999999996,15.126999999999995,39.489,14.666999999999994),t.bezierCurveTo(39.515,14.105,39.449,12.417,39.449,12.417),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(e=t.createLinearGradient(19.8052,7.7949,19.8052,24.7632)).addColorStop(0,"#7D7D7D"),e.addColorStop(.1455,"#808080"),e.addColorStop(.2975,"#888888"),e.addColorStop(.4527,"#939293"),e.addColorStop(.6099,"#9E9D9D"),e.addColorStop(.7687,"#A7A5A4"),e.addColorStop(.9268,"#A9A6A5"),e.addColorStop(.9754,"#A7A4A3"),e.addColorStop(1,"#FFFFFF"),t.fillStyle=e,t.beginPath(),t.moveTo(33.591,24.763),t.bezierCurveTo(23.868000000000002,24.754,14.145,24.746000000000002,4.423000000000002,24.738000000000003),t.bezierCurveTo(3.140000000000002,24.737000000000002,-.48799999999999777,24.838000000000005,.3520000000000021,22.837000000000003),t.bezierCurveTo(1.292000000000002,20.594000000000005,2.2330000000000023,18.351000000000003,3.1730000000000023,16.108000000000004),t.bezierCurveTo(4.113000000000002,13.865000000000006,5.054000000000002,11.623000000000005,5.994000000000002,9.380000000000004),t.bezierCurveTo(6.728000000000002,7.629000000000005,9.521000000000003,7.885000000000004,11.156000000000002,7.880000000000004),t.bezierCurveTo(16.974000000000004,7.861000000000004,22.793000000000003,7.843000000000004,28.612000000000002,7.825000000000005),t.bezierCurveTo(30.976000000000003,7.818000000000005,33.341,7.810000000000005,35.707,7.803000000000004),t.bezierCurveTo(36.157000000000004,7.802000000000004,36.609,7.787000000000004,37.06,7.804000000000005),t.bezierCurveTo(37.793,7.833000000000005,39.389,7.875000000000004,39.385000000000005,9.424000000000005),t.bezierCurveTo(39.38400000000001,9.647000000000006,39.31,10.138000000000005,39.27700000000001,10.359000000000005),t.bezierCurveTo(38.81900000000001,13.361000000000004,38.452000000000005,15.764000000000006,37.99400000000001,18.766000000000005),t.bezierCurveTo(37.806000000000004,19.998000000000005,37.61800000000001,21.230000000000004,37.43000000000001,22.462000000000007),t.bezierCurveTo(37.151,24.271,35.264,24.77,33.591,24.763),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(10.427,19.292),t.lineTo(5.735,16.452),t.lineTo(12.58,13.8),t.lineTo(12.045,15.07),t.lineTo(20.482,15.072),t.lineTo(19.667,17.887),t.lineTo(11.029,17.851),t.lineTo(10.427,19.292),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(13.041,13.042),t.lineTo(8.641,10.73),t.lineTo(14.82,8.474),t.lineTo(14.373,9.537),t.lineTo(22.102,9.479),t.lineTo(21.425,11.816),t.lineTo(13.54,11.85),t.lineTo(13.041,13.042),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(29.787,16.049),t.lineTo(29.979,14.704),t.lineTo(21.51,14.706),t.lineTo(22.214,12.147),t.lineTo(30.486,12.116),t.lineTo(30.653,10.926),t.lineTo(36.141,13.4),t.lineTo(29.787,16.049),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(28.775,23.14),t.lineTo(29.011,21.49),t.lineTo(19.668,21.405),t.lineTo(20.523,18.295),t.lineTo(29.613,18.338),t.lineTo(29.815,16.898),t.lineTo(35.832,19.964),t.lineTo(28.775,23.14),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.restore()}},cloud:{draw:function(t){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(90.75,0),t.lineTo(90.75,62.125),t.lineTo(0,62.125),t.closePath(),t.clip(),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save();var e=t.createLinearGradient(44.0054,6.4116,44.0054,51.3674);e.addColorStop(0,"rgba(159, 160, 160, 0.7)"),e.addColorStop(.9726,"#E9EAEA"),t.fillStyle=e,t.beginPath(),t.moveTo(57.07,20.354),t.bezierCurveTo(57.037,20.354,57.006,20.358,56.974000000000004,20.358),t.bezierCurveTo(54.461000000000006,14.308,48.499,10.049000000000001,41.538000000000004,10.049000000000001),t.bezierCurveTo(33.801,10.049000000000001,27.309000000000005,15.316000000000003,25.408000000000005,22.456000000000003),t.bezierCurveTo(18.988000000000007,23.289,14.025000000000006,28.765000000000004,14.025000000000006,35.413000000000004),t.bezierCurveTo(14.025000000000006,42.635000000000005,19.880000000000006,48.49,27.102000000000004,48.49),t.bezierCurveTo(29.321000000000005,48.49,31.407000000000004,47.933,33.237,46.961),t.bezierCurveTo(34.980000000000004,49.327,37.78,50.867999999999995,40.945,50.867999999999995),t.bezierCurveTo(43.197,50.867999999999995,45.261,50.086,46.896,48.785999999999994),t.bezierCurveTo(49.729,50.78699999999999,53.244,51.98799999999999,57.07,51.98799999999999),t.bezierCurveTo(66.412,51.98799999999999,73.986,44.90699999999999,73.986,36.17099999999999),t.bezierCurveTo(73.986,27.436,66.413,20.354,57.07,20.354),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},node:{width:60,height:100,draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(13.948,31.075),t.lineTo(25.914,31.075),t.quadraticCurveTo(25.914,31.075,25.914,31.075),t.lineTo(25.914,34.862),t.quadraticCurveTo(25.914,34.862,25.914,34.862),t.lineTo(13.948,34.862),t.quadraticCurveTo(13.948,34.862,13.948,34.862),t.lineTo(13.948,31.075),t.quadraticCurveTo(13.948,31.075,13.948,31.075),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(29.679,35.972),t.bezierCurveTo(29.679,36.675000000000004,29.110999999999997,37.244,28.407999999999998,37.244),t.lineTo(11.456,37.244),t.bezierCurveTo(10.751999999999999,37.244,10.183,36.675,10.183,35.972),t.lineTo(10.183,36.136),t.bezierCurveTo(10.183,35.431000000000004,10.751999999999999,34.863,11.456,34.863),t.lineTo(28.407,34.863),t.bezierCurveTo(29.11,34.863,29.678,35.431,29.678,36.136),t.lineTo(29.678,35.972),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(.196,29.346),t.bezierCurveTo(.196,30.301,.9690000000000001,31.075,1.925,31.075),t.lineTo(37.936,31.075),t.bezierCurveTo(38.891,31.075,39.665,30.301,39.665,29.346),t.lineTo(39.665,27.174),t.lineTo(.196,27.174),t.lineTo(.196,29.346),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(37.937,3.884),t.lineTo(1.926,3.884),t.bezierCurveTo(.97,3.884,.19699999999999984,4.657,.19699999999999984,5.614),t.lineTo(.19699999999999984,27.12),t.lineTo(39.666000000000004,27.12),t.lineTo(39.666000000000004,5.615),t.bezierCurveTo(39.665,4.657,38.892,3.884,37.937,3.884),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var e=t.createLinearGradient(6.9609,2.9341,32.9008,28.874);e.addColorStop(0,"#B2CBEA"),e.addColorStop(1,"#2E8ECE"),t.fillStyle=e,t.beginPath(),t.moveTo(35.788,6.39),t.lineTo(4.074,6.39),t.bezierCurveTo(3.315,6.39,2.702,7.003,2.702,7.763),t.lineTo(2.702,24.616),t.lineTo(37.159,24.616),t.lineTo(37.159,7.763),t.bezierCurveTo(37.159,7.003,36.546,6.39,35.788,6.39),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},group:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(47.75,0),t.lineTo(47.75,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(10.447,26.005),t.lineTo(18.847,26.005),t.quadraticCurveTo(18.847,26.005,18.847,26.005),t.lineTo(18.847,28.663),t.quadraticCurveTo(18.847,28.663,18.847,28.663),t.lineTo(10.447,28.663),t.quadraticCurveTo(10.447,28.663,10.447,28.663),t.lineTo(10.447,26.005),t.quadraticCurveTo(10.447,26.005,10.447,26.005),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(21.491,29.443),t.bezierCurveTo(21.491,29.935000000000002,21.094,30.338,20.597,30.338),t.lineTo(8.698,30.338),t.bezierCurveTo(8.201,30.338,7.8020000000000005,29.936,7.8020000000000005,29.443),t.lineTo(7.8020000000000005,29.557000000000002),t.bezierCurveTo(7.8020000000000005,29.063000000000002,8.201,28.662000000000003,8.698,28.662000000000003),t.lineTo(20.597,28.662000000000003),t.bezierCurveTo(21.093,28.662000000000003,21.491,29.062,21.491,29.557000000000002),t.lineTo(21.491,29.443),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(.789,24.79),t.bezierCurveTo(.789,25.461,1.334,26.005,2.0060000000000002,26.005),t.lineTo(27.289,26.005),t.bezierCurveTo(27.961000000000002,26.005,28.504,25.461,28.504,24.79),t.lineTo(28.504,23.267),t.lineTo(.789,23.267),t.lineTo(.789,24.79),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(27.289,6.912),t.lineTo(2.006,6.912),t.bezierCurveTo(1.3339999999999996,6.912,.7889999999999997,7.455,.7889999999999997,8.126),t.lineTo(.7889999999999997,23.227),t.lineTo(28.503999999999998,23.227),t.lineTo(28.503999999999998,8.126),t.bezierCurveTo(28.504,7.455,27.961,6.912,27.289,6.912),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var e=t.createLinearGradient(5.54,6.2451,23.7529,24.458);e.addColorStop(0,"#B2CBEA"),e.addColorStop(1,"#2E8ECE"),t.fillStyle=e,t.beginPath(),t.moveTo(25.78,8.671),t.lineTo(3.514,8.671),t.bezierCurveTo(2.9819999999999998,8.671,2.549,9.101999999999999,2.549,9.635),t.lineTo(2.549,21.466),t.lineTo(26.743,21.466),t.lineTo(26.743,9.636),t.bezierCurveTo(26.743,9.102,26.312,8.671,25.78,8.671),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(27.053,33.602),t.lineTo(36.22,33.602),t.quadraticCurveTo(36.22,33.602,36.22,33.602),t.lineTo(36.22,36.501),t.quadraticCurveTo(36.22,36.501,36.22,36.501),t.lineTo(27.053,36.501),t.quadraticCurveTo(27.053,36.501,27.053,36.501),t.lineTo(27.053,33.602),t.quadraticCurveTo(27.053,33.602,27.053,33.602),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(39.104,37.352),t.bezierCurveTo(39.104,37.891,38.67,38.327,38.13,38.327),t.lineTo(25.143,38.327),t.bezierCurveTo(24.602,38.327,24.166,37.891,24.166,37.352),t.lineTo(24.166,37.477999999999994),t.bezierCurveTo(24.166,36.937,24.602,36.501,25.143,36.501),t.lineTo(38.131,36.501),t.bezierCurveTo(38.671,36.501,39.105,36.937,39.105,37.477999999999994),t.lineTo(39.105,37.352),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(16.514,32.275),t.bezierCurveTo(16.514,33.004999999999995,17.107,33.601,17.839,33.601),t.lineTo(45.433,33.601),t.bezierCurveTo(46.166,33.601,46.758,33.005,46.758,32.275),t.lineTo(46.758,30.607999999999997),t.lineTo(16.514,30.607999999999997),t.lineTo(16.514,32.275),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(45.433,12.763),t.lineTo(17.839,12.763),t.bezierCurveTo(17.107,12.763,16.514,13.356,16.514,14.089),t.lineTo(16.514,30.57),t.lineTo(46.757999999999996,30.57),t.lineTo(46.757999999999996,14.088),t.bezierCurveTo(46.758,13.356,46.166,12.763,45.433,12.763),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(e=t.createLinearGradient(21.6973,12.0352,41.5743,31.9122)).addColorStop(0,"#B2CBEA"),e.addColorStop(1,"#2E8ECE"),t.fillStyle=e,t.beginPath(),t.moveTo(43.785,14.683),t.lineTo(19.486,14.683),t.bezierCurveTo(18.903000000000002,14.683,18.433,15.153,18.433,15.735),t.lineTo(18.433,28.649),t.lineTo(44.837,28.649),t.lineTo(44.837,15.734),t.bezierCurveTo(44.838,15.153,44.367,14.683,43.785,14.683),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.globalAlpha=.5,t.beginPath(),t.moveTo(23.709,36.33),t.lineTo(4.232,36.33),t.lineTo(4.232,27.199),t.lineTo(5.304,27.199),t.lineTo(5.304,35.259),t.lineTo(23.709,35.259),t.lineTo(23.709,36.33),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},subnetwork:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(60.75,0),t.lineTo(60.75,42.125),t.lineTo(0,42.125),t.closePath(),t.clip(),t.translate(0,.26859504132231393),t.scale(.6694214876033058,.6694214876033058),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var e=t.createLinearGradient(43.6724,-2.7627,43.6724,59.3806);e.addColorStop(0,"rgba(159, 160, 160, 0.7)"),e.addColorStop(.9726,"#E9EAEA"),t.fillStyle=e,t.beginPath(),t.moveTo(61.732,16.509),t.bezierCurveTo(61.686,16.509,61.644,16.515,61.599,16.515),t.bezierCurveTo(58.126,8.152000000000001,49.884,2.2650000000000006,40.262,2.2650000000000006),t.bezierCurveTo(29.567,2.2650000000000006,20.594,9.545000000000002,17.966,19.415),t.bezierCurveTo(9.09,20.566,2.229,28.136,2.229,37.326),t.bezierCurveTo(2.229,47.309,10.322,55.403000000000006,20.306,55.403000000000006),t.bezierCurveTo(23.374000000000002,55.403000000000006,26.257,54.633,28.787,53.28900000000001),t.bezierCurveTo(31.197,56.56000000000001,35.067,58.69000000000001,39.442,58.69000000000001),t.bezierCurveTo(42.555,58.69000000000001,45.408,57.60900000000001,47.669,55.81200000000001),t.bezierCurveTo(51.586,58.57800000000001,56.443999999999996,60.238000000000014,61.732,60.238000000000014),t.bezierCurveTo(74.64699999999999,60.238000000000014,85.116,50.45000000000002,85.116,38.37400000000001),t.bezierCurveTo(85.116,26.298,74.646,16.509,61.732,16.509),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(34.966,44.287),t.lineTo(45.112,44.287),t.quadraticCurveTo(45.112,44.287,45.112,44.287),t.lineTo(45.112,47.497),t.quadraticCurveTo(45.112,47.497,45.112,47.497),t.lineTo(34.966,47.497),t.quadraticCurveTo(34.966,47.497,34.966,47.497),t.lineTo(34.966,44.287),t.quadraticCurveTo(34.966,44.287,34.966,44.287),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#727171",t.beginPath(),t.moveTo(48.306,48.439),t.bezierCurveTo(48.306,49.034,47.824999999999996,49.52,47.226,49.52),t.lineTo(32.854,49.52),t.bezierCurveTo(32.253,49.52,31.771,49.034000000000006,31.771,48.439),t.lineTo(31.771,48.578),t.bezierCurveTo(31.771,47.981,32.253,47.497,32.854,47.497),t.lineTo(47.226,47.497),t.bezierCurveTo(47.824999999999996,47.497,48.306,47.98,48.306,48.578),t.lineTo(48.306,48.439),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#b5b5b6",t.beginPath(),t.moveTo(23.302,42.82),t.bezierCurveTo(23.302,43.63,23.96,44.287,24.772,44.287),t.lineTo(55.308,44.287),t.bezierCurveTo(56.12,44.287,56.775,43.629999999999995,56.775,42.82),t.lineTo(56.775,40.98),t.lineTo(23.302,40.98),t.lineTo(23.302,42.82),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(55.307,21.229),t.lineTo(24.771,21.229),t.bezierCurveTo(23.959,21.229,23.301000000000002,21.884,23.301000000000002,22.695),t.lineTo(23.301000000000002,40.933),t.lineTo(56.774,40.933),t.lineTo(56.774,22.695),t.bezierCurveTo(56.774,21.884,56.119,21.229,55.307,21.229),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(e=t.createLinearGradient(29.04,20.4219,51.0363,42.4181)).addColorStop(0,"#B2CBEA"),e.addColorStop(1,"#2E8ECE"),t.fillStyle=e,t.beginPath(),t.moveTo(53.485,23.353),t.lineTo(26.592,23.353),t.bezierCurveTo(25.948999999999998,23.353,25.427,23.873,25.427,24.517000000000003),t.lineTo(25.427,38.807),t.lineTo(54.647,38.807),t.lineTo(54.647,24.517000000000003),t.bezierCurveTo(54.648,23.873,54.127,23.353,53.485,23.353),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore()}}};for(var Yr in zr)Gt("Q-"+Yr,zr[Yr]);var Hr=function(){this.$invalidateRotate=!1;var t=this._f3;t.clear();var e=this.$border||0,i=this._7d.x+e/2,n=this._7d.y+e/2,r=this._7d.width-e,s=this._7d.height-e,o=Kt.call(this,{x:i,y:n});Qt(t,o.x,o.y,!0),Qt(t,(o=Kt.call(this,{x:i+r,y:n})).x,o.y),Qt(t,(o=Kt.call(this,{x:i+r,y:n+s})).x,o.y),Qt(t,(o=Kt.call(this,{x:i,y:n+s})).x,o.y),this.__kuPointer&&Qt(t,(o=Kt.call(this,{x:this._pointerX,y:this._pointerY})).x,o.y),e&&t.grow(e/2)},Ur={_g5:!1,_ik:null,_lce:0,_k3:-1,_jp:null,_ei:function(t){this._ik||(this._ik=[],this._il=2),this._ik.push(t),this._e6(),this._jo()},_jo:function(){if(!this._jp){var t=this;this._jp=setTimeout(function e(){return!1!==t._e6()?void(t._jp=setTimeout(e,t._fd())):void delete t._jp},this._fd())}},_fd:function(){return Math.max(20,this._ik[this._k3].delay)},_e6:function(){return this._f1(this._k3+1)},_f1:function(t){if(this._g5)t%=this._lce;else if(t>=this._ik.length)return!1;if(this._k3==t)return!1;this._k3=t;var e=this._ik[this._k3],i=e._lcache;return i||(e._lcache=i=ft(this.width,this.height),i.g.putImageData(e.data,0,0),i._pixels=e._pixels),this._jl=i,this.$invalidateSize=!0,this._lcu()},_lcg:function(){return this._ik?(this._g5=!0,this._lce=this._ik.length,1==this._lce?this._lcu():void this._jo()):void this._hd()},_k9:function(){this._jp&&(clearTimeout(this._jp),delete this._jp)},_lcu:function(){var t=this._dispatcher.listeners;if(!t||!t.length)return!1;for(var e=new En(this,"image","load",this._jl),i=0,n=t.length;n>i;i++){var r=t[i];r.scope._in&&r.scope._in._h8ed?(t.splice(i,1),i--,n--):r.onEvent.call(r.scope,e)}return t.length>0},_lgk:function(t,e){this._dispatcher.addListener(t,e),this._g5&&!this._jp&&this._jo()},_6e:function(t,e){this._dispatcher.removeListener(t,e),this._dispatcher._lef()||this._k9()},_h8:function(){this._k9(),this._dispatcher.clear()},_f0:function(){var t=this._jl._leufferedImage;return t||(this._jl._leufferedImage=t=new $r(this._jl,1)),t}},Wr=function(t){return t.reduce(function(t,e){return 2*t+e},0)},Vr=function(t){for(var e=[],i=7;i>=0;i--)e.push(!!(t&1<<i));return e},Xr=function(t){this.data=t,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return 255&t.charCodeAt(this.pos++)},this.readBytes=function(t){for(var e=[],i=0;t>i;i++)e.push(this.readByte());return e},this.read=function(t){for(var e="",i=0;t>i;i++)e+=String.fromCharCode(this.readByte());return e},this.readUnsigned=function(){var t=this.readBytes(2);return(t[1]<<8)+t[0]}},qr=function(t,e){e||(e={});var i=function(e){for(var i=[],n=0;e>n;n++)i.push(t.readBytes(3));return i},n=function(){var e,i;i="";do{e=t.readByte(),i+=t.read(e)}while(0!==e);return i},r=function(r){r.leftPos=t.readUnsigned(),r.topPos=t.readUnsigned(),r.width=t.readUnsigned(),r.height=t.readUnsigned();var s=r.width*r.height,o=Vr(t.readByte());r.lctFlag=o.shift(),r.interlaced=o.shift(),r.sorted=o.shift(),r.reserved=o.splice(0,2),r.lctSize=Wr(o.splice(0,3)),r.lctFlag&&(r.lct=i(1<<r.lctSize+1)),r.lzwMinCodeSize=t.readByte();var a=n();r.pixels=function(t,e,i){for(var n,r,s=0,o=function(t){for(var i=0,n=0;t>n;n++)e.charCodeAt(s>>3)&1<<(7&s)&&(i|=1<<n),s++;return i},a=[],h=1<<t,l=h+1,_=t+1,u=[],c=function(){u=[],_=t+1;for(var e=0;h>e;e++)u[e]=[e];u[h]=[],u[l]=null},d=0;r=n,n=o(_),!(d++>i);)if(n!==h){if(n===l)break;if(n<u.length)r!==h&&u.push(u[r].concat(u[n][0]));else{if(n!==u.length)throw new Error("Invalid LZW code.");u.push(u[r].concat(u[r][0]))}a.push.apply(a,u[n]),u.length===1<<_&&12>_&&_++}else c();return a}(r.lzwMinCodeSize,a,s),r.interlaced&&(r.pixels=function(t,e){for(var i=new Array(t.length),n=t.length/e,r=function(n,r){var s=t.slice(r*e,(r+1)*e);i.splice.apply(i,[n*e,e].concat(s))},s=[0,4,2,1],o=[8,8,4,2],a=0,h=0;4>h;h++)for(var l=s[h];n>l;l+=o[h])r(l,a),a++;return i}(r.pixels,r.width)),e.img&&e.img(r)},s=function(){var i={};switch(i.sentinel=t.readByte(),String.fromCharCode(i.sentinel)){case"!":i.type="ext",function(i){switch(i.label=t.readByte(),i.label){case 249:i.extType="gce",function(i){var n=(t.readByte(),Vr(t.readByte()));i.reserved=n.splice(0,3),i.disposalMethod=Wr(n.splice(0,3)),i.userInput=n.shift(),i.transparencyGiven=n.shift(),i.delayTime=t.readUnsigned(),i.transparencyIndex=t.readByte(),i.terminator=t.readByte(),e.gce&&e.gce(i)}(i);break;case 254:i.extType="com",function(t){t.comment=n(),e.com&&e.com(t)}(i);break;case 1:i.extType="pte",function(i){t.readByte(),i.ptHeader=t.readBytes(12),i.ptData=n(),e.pte&&e.pte(i)}(i);break;case 255:i.extType="app",function(i){switch(t.readByte(),i.identifier=t.read(8),i.authCode=t.read(3),i.identifier){case"NETSCAPE":!function(i){t.readByte(),i.unknown=t.readByte(),i.iterations=t.readUnsigned(),i.terminator=t.readByte(),e.app&&e.app.NETSCAPE&&e.app.NETSCAPE(i)}(i);break;default:!function(t){t.appData=n(),e.app&&e.app[t.identifier]&&e.app[t.identifier](t)}(i)}}(i);break;default:i.extType="unknown",function(t){t.data=n(),e.unknown&&e.unknown(t)}(i)}}(i);break;case",":i.type="img",r(i);break;case";":i.type="eof",e.eof&&e.eof(i);break;default:throw new Error("Unknown block: 0x"+i.sentinel.toString(16))}"eof"!==i.type&&setTimeout(s,0)};(function(){var n={};if(n.sig=t.read(3),n.ver=t.read(3),"GIF"!==n.sig)throw new Error("Not a GIF file.");n.width=t.readUnsigned(),n.height=t.readUnsigned();var r=Vr(t.readByte());n.gctFlag=r.shift(),n.colorRes=Wr(r.splice(0,3)),n.sorted=r.shift(),n.gctSize=Wr(r.splice(0,3)),n.bgColor=t.readByte(),n.pixelAspectRatio=t.readByte(),n.gctFlag&&(n.gct=i(1<<n.gctSize+1)),e.hdr&&e.hdr(n)})(),setTimeout(s,0)},Kr="";e.addEventListener&&e.addEventListener("keydown",function(t){if(t.ctrlKey&&t.shiftKey&&t.altKey&&73==t.keyCode){var e=rr.name+"\nVersion - "+rr.version+"\nPublish Date - "+rr.publishDate+"\n"+rr.about+"\n"+rr.copyright+Kr;rr.alert(e)}},!1),Kr="\nLicensed to: "+decodeURIComponent("%E9%95%BF%E9%A3%9E%E5%85%89%E7%BA%A4%E5%85%89%E7%BC%86%E8%82%A1%E4%BB%BD%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8-%E4%BA%91%E7%AE%A1%E5%B9%B3%E5%8F%B0%E4%BA%A7%E5%93%81");var Zr="Q-Canvas";it("."+Zr,{position:"absolute",userSelect:"none",outline:"none",transformOrigin:"0 0","-webkit-tap-highlight-color":"rgba(0,0,0,0)"});var Jr="Q-CanvasPanel";it("."+Jr,{width:"100%",height:"100%",position:"relative",overflow:"hidden",textAlign:"left",outline:"none",tapHighlightColor:"rgba(0,0,0,0)",userSelect:"none"});var Qr="Q-Graph";it("."+Qr,{overflow:"hidden","text-align":"left","-webkit-tap-highlight-color":"rgba(0,0,0,0)",outline:"none"});var ts=b(function(t){this._lg3=new is,this._l0=new Qi,this._7s=[],this._lci=[],this._k4ingList=[],this._7w={},this.bounds=new on,this._iw=new as,this._viewport=new hs,this._iw.listener=function(t){this._6b(t)}.bind(this),this._lcl(),this.setParent(t)},{_lge:null,_ih:null,_l0:null,_lci:null,_iw:null,_let:function(t){return t?(this._5zs||(this._5zs={}),!this._5zs[t]&&(this._5zs[t]=!0,void this.invalidate())):this.invalidate()},_8s:function(t){return this._5zs&&this._5zs[t]},isInvalidate:function(){return this._5z},clear:function(){this._l0.clear(),this._lci.length=0,this._7w={},this._lg0=!1,this.invalidate()},_6x:function(){this._let("size"),this._2f()},_2f:function(){this._let("viewport")},invalidate:function(t){(t||!this._5z)&&(this._5z=!0,this._k9||(this._ixingID=requestAnimationFrame(this._em.bind(this))))},_6v:function(t){return this._k9=t,t?void(this._ixingID&&(cancelAnimationFrame(this._ixingID),this._ixingID=null)):void(this._5z&&this.invalidate(!0))},_em:function(){this._ixingID=null,this._5z=!1;var t=this._lg0;this._lg0||(this._lck(),this._lg0=!0),this._lcj(!t),this._34(),this._ix(),this._20()},_lcj:function(t){this._lgc=t||this.fullRefresh,(t||this._5zs.size)&&this._8l(),(t||this._5zs.matrix)&&this._63(),this._lg4(t),this._3x(t),this._5zs={}},_34:function(){this._lci.length=0;var t=this._viewport;if(this._l0.forEach(function(e){if(!1!==e.__h0){var i=this._lg6(e);t.intersects(i.x,i.y,i.width,i.height)&&this._lci.push(e)}},this),this._lci=this._hy(this._lci),!this._lgc){var e=this._lg3;this._k4ingList.length=0,e._lg7(this._viewport),e._i0()||this._lci.forEach(function(t){var i=this._lg6(t);e._eg(i.x,i.y,i.width,i.height)&&this._k4ingList.push(t)},this)}},_hy:function(t){return Hi?t=l(t,this._8v):t.sort(this._8v),t},_8v:function(t,e){return(t=t.zIndex||0)-(e=e.zIndex||0)},_lg6:function(t){return t.boundingBox},_ix:function(){if(this._lgc)return this._dg(),this._6d(!0),void this.render(this._lctx,this._lci);this._6d(this._leuffer);var t=this._lg3,e=this._lctx;e.save(),this._leuffer&&(re(e),e.drawImage(this._leuffer.canvas,this._leuffer.x,this._leuffer.y)),t._j4(e,this._dj.bind(this)),this._dg(),this.render(e,this._k4ingList),e.restore()},_6d:function(t){this._letCanvasSizeFlag?(this._letCanvasSizeFlag=!1,this._ih.setSize(this._width,this._height)):t&&function(t){t.width=t.width}(this._ih)},_8l:function(){var t=this.width,e=this.height;return(this._width!=t||this._height!=e)&&(this._width=t,this._height=e,void(this._letCanvasSizeFlag=!0))},_3x:function(t){if(!t&&!this._5zs.viewport)return!1;var e=this._iw.reverseTransform([0,0]),i=this.scale,n=this._width/i,r=this._height/i,s=this.rotate,o=this._viewport;if(o.x==e[0]&&o.y==e[1]&&o.width==n&&o.height==r&&o.rotate==s)return!1;var a=o.toJSON();return this._viewport.set(e[0],e[1],n,r,s,i),this._31(this._viewport,a,t),!0},_31:function(t,e,i){this._lgc||i||(this._leuffer=this._g0(e,t))},_6b:function(){if(this._lg0){var t;if(this._k9)this._lcurrentMatrix?this._lcurrentMatrix.transMatrix=t=rs.mul([],this._iw.m,rs.invert([],this._lcurrentMatrix.m)):t=this._iw.m,this._4z(t);this._let("matrix"),this._2f()}},_4z:function(t){this.__lcssMatrix=t,ls.setStyle(this._ih,"transform",t?"matrix("+t.join(",")+")":"")},_63:function(){var t=this._lcurrentMatrix;if(this._lcurrentMatrix={tx:this._iw.m[4],ty:this._iw.m[5],m:this._iw.m.slice(),scale:this._iw._gn(),rotate:this._iw._dy()},this.__lcssMatrix&&this._4z(null),!this._lgc){if(this._2x(this._lcurrentMatrix,t),!t||t.scale!=this._lcurrentMatrix.scale)return this._71(this._lcurrentMatrix.scale,t?t.scale:null),void(this._lgc=!0);if(!t||t.rotate!=this._lcurrentMatrix.rotate)return this._5i(this._lcurrentMatrix.rotate,t?t.rotate:null),void(this._lgc=!0);var e=t.m[4]-this._lcurrentMatrix.m[4],i=t.m[5]-this._lcurrentMatrix.m[5],n=this.ratio;e*=n,i*=n;(Math.abs(e-Math.round(e))>1e-4||Math.abs(i-Math.round(i))>1e-4)&&(this._lgc=!0)}},_5x:function(){var t=this.bounds,e=t.clone();t.clear(),this._l0.forEach(function(e){!1!==e.__h0&&t.add(this._lg6(e))},this),t.equals(e)||this._30(t,e)},_30:function(){},_lg0:!1,_lck:function(){},_98:function(t){var e=t.ratio;t.scale(e,e),t.transform.apply(t,this._iw.m)},render:function(t,e){e&&e.length&&(t.save(),this._98(t),e.forEach(function(e){if(t.save(),!1!==e.visible)try{e.render(t)}catch(t){console.error(t)}t.restore()},this),t.restore())},setParent:function(t){R(t)&&(t=e.getElementById(t)),this._l4!=t&&(this._l4&&this._lge&&(x(this._l4,Qr),this._l4.removeChild(this._lge)),this._l4=t,this._l4&&(I(this._l4,Qr),this._l4.appendChild(this._72()),this._6x()))},_72:function(){return this._lge||this._lcl(),this._lge},_lcl:function(){var t=ft(!0);ie(t.g),t.className=Zr;var i=e.createElement("div");return i.addEventListener("mousedown",function(t){return e.activeElement==this?(t.preventDefault&&t.preventDefault(),!1):void 0}.bind(i),!1),i.className=Jr,i.appendChild(t),i.tabIndex=0,this._ih=t,this._lge=i,this._lctx=this._ih.getContext("2d"),t},toLogical:function(t,e){return t instanceof Object&&(Y(t)&&(t=this._7f(t)),Array.isArray(t)?(e=t[1]||0,t=t[0]||0):(e=t.y||0,t=t.x||0)),this._iw.reverseTransform([t,e])},toCanvas:function(t,e){return this._iw.transform([t,e])},_7f:function(t){return nt(t,this._lge)},_d2:function(t,e,i){if(t.hitTest instanceof Function)return t.hitTest(e,i);var n=this._lg6(t);return n?i?on.intersects(n.x,n.y,n.width,n.height,e[0]-i,e[1]-i,i+i,i+i):on.intersects(n.x,n.y,n.width,n.height,e[0],e[1]):t},hitTest:function(t,e){return this._7x(t,e)},_7x:function(t,e){e=this._97(e),t=this.toLogical(t);for(var i,n=this._lci.length;--n>=0;)if(i=this._lci[n],this._d2(i,t,e))return i},_97:function(t){return(t===i||null===t)&&(t=Ji.SELECTION_TOLERANCE),t?t/this.scale:0},getUIByMouseEvent:function(t,e){if(t.uiId)return this._l0.getById(t.uiId);var i=this._7x(t,e);return t.uiId=i?i.id:-1,i},_7w:null,invalidateUI:function(t){this._7w[t.id]=t,this.invalidate()},_9b:function(t){t.validate instanceof Function&&t.validate(this)},_lem:function(t,e){t.__ij&&this._fx(t.__ij);var i=t.__h0;if(t.__h0=this._du(t,e),!t.__h0)return i;var n=t.__ij;this._9b(t);var r=this._lg6(t);t.__ij={x:r.x,y:r.y,width:r.width,height:r.height};var s=t.__h0!==i||!on.equals(n,r);return s&&t.__ij&&this._fx(t.__ij),s},_du:function(t){return!1!==t.visible},_$s:function(t){this._l0.forEach(function(e){this._lem(e,t)},this),this._7w={},this._5x()},_lg4:function(t){var e=this.scale;if(t)return this._$s(e);var i=this._letBoundsFlag;for(var n in this._letBoundsFlag=!1,this._7w){var r=this._7w[n];i?this._lem(r,e):i=this._lem(r,e)}this._7w={},i&&this._5x()},_7s:null,_20:function(){if(!this._7s.length)return!1;var t=this._7s;this._7s=[],t.forEach(function(t){try{var e=t.call,i=t.scope,n=t.delay;i instanceof Object?e=e.bind(i):i&&!n&&(n=parseInt(i)),n?setTimeout(e,n):e()}catch(t){}},this),this._5z&&this._em()},_df:function(t,e,i){this._7s.push({call:t,scope:e,delay:i}),this._5z||this._20()},_42:function(t,e){for(var i=this._lci,n=0,r=i.length;r>n;n++)if(!1===t.call(e,i[n]))return!1},_dd:function(t,e){this._l0.forEach(t,e)},_$t:function(t,e){for(var i=this._lci,n=i.length-1;n>=0;n--)if(!1===t.call(e,i[n]))return!1},_3z:function(t,e){this._l0.forEachReverse(t,e)},_3y:function(){return this.bounds},_f7:function(t,e,i){t/=this.scale||1,this._iu(t,e,i)},_iu:function(t,e,n){if(this._lg0&&(e===i||null===e)){var r=this.toLogical(this.width/2,this.height/2);e=r[0]||0,n=r[1]||0}return this._iw.scale(t,[e||0,n||0])},_d0:function(t,e){this._iw.translate([t,e],!0)},_lgg:function(t,e,i,n){if(i==this.scale&&!1!==n){var r=this.ratio;r!=(0|r)&&(t=Math.round(t*r)/r,e=Math.round(e*r)/r)}this._iw.translateTo([t,e],i)},_iv:function(t,e){return this._iu(this._da,t,e)},_hv:function(t,e){return this._iu(1/this._da,t,e)},_1o:function(){var t=this._3y();if(!t.isEmpty()){var e=this.width/t.width,i=this.height/t.height,n=Math.min(e,i);return{scale:n=Math.max(this._fo,Math.min(this._fi,n)),cx:t.cx,cy:t.cy}}},_da:1.3,_fi:10,_fo:.1,_lgc:!1,_71:function(){},_5i:function(){},_2x:function(){},_dg:function(){this._leuffer=null,this._lg3._jw()},_dj:function(t){var e=this._iw,i=this._ih.ratio,n=this.scale;if(!e._dy()){var r=e.transform([t[0],t[1]]);return r[0]*=i,r[1]*=i,i*=n,r[2]=t[2]*i,r[3]=t[3]*i,r}var s=new on,o=e.transform([t[0],t[1]]);return s.add(o[0],o[1]),o=e.transform([t[0]+t[2],t[1]]),s.add(o[0],o[1]),o=e.transform([t[0],t[1]+t[3]]),s.add(o[0],o[1]),o=e.transform([t[0]+t[2],t[1]+t[3]]),s.add(o[0],o[1]),[s.x*i,s.y*i,s.width*i,s.height*i]},_g0:function(t,i){var n=i._33(t.x,t.y,t.width,t.height);if(n){var r=this._ih,s=this.scale*this.ratio,o=this._lg3,a={},h=1e-6;n.x>h&&(a.left=i._4g(0,0,n.x,i.height,s)),i.width-n.right>h&&(a.right=i._4g(n.right,0,i.width-n.right,i.height,s)),n.y>h&&(a.top=i._4g(n.x,0,n.width,n.y,s)),i.height-n.bottom>h&&(a.bottom=i._4g(n.x,n.bottom,n.width,i.height-n.bottom,s)),function(t){var e=!0;for(var i in t){e=!1;break}return e}(a)||o._3u(a);var l=i._gx(t.x,t.y),_=(l[0]-n.x)*s,u=(l[1]-n.y)*s,c=n.width*s,d=n.height*s;_=Math.round(_),u=Math.round(u),c=Math.round(c),d=Math.round(d);var f=this._leackCanvas;return f||((f=this._leackCanvas=e.createElement("canvas")).g=f.getContext("2d")),f.width=c,f.height=d,re(f.g),f.g.drawImage(r,_,u),{x:_=l[0]*s-_,y:u=l[1]*s-u,canvas:f}}},_kb:function(t,e,i,n){this._lg3._ky(t,e,i,n)},_fx:function(t){this._lg3._i2(t)}});Object.defineProperties(ts.prototype,{width:{get:function(){return this._lge.clientWidth}},height:{get:function(){return this._lge.clientHeight}},rotate:{get:function(){return this._iw._dy()}},tx:{get:function(){return this._iw._7o()[0]}},ty:{get:function(){return this._iw._7o()[1]}},ratio:{get:function(){return this._ih?this._ih.ratio:void 0}},scale:{get:function(){return this._iw._gn()},set:function(t){this._f7(t)}},renderScale:{get:function(){return this.scale*this.ratio}},uis:{get:function(){return this._l0}},length:{get:function(){return this._l0.length}},viewportBounds:{get:function(){return this._viewport.getGlobalBounds()}}});var es,is=b({constructor:function(){this._fe=[],this._ij=new on,this._fr=Gi?20:50},_fr:20,_fe:null,_ke:!1,_ij:null,_jw:function(){this._ke=!1,this._fe.length=0,this._viewportClips=null,this._ij.clear()},_i0:function(){return 0==this._fe.length&&!this._viewportClips},_ky:function(t,e,i,n){0>=i||0>=n||this._fe.push([t,e,i,n])},_i2:function(t){this._ky(t.x,t.y,t.width,t.height)},_3u:function(t){var e=this._ij;for(var i in t){var n=t[i].getGlobalBounds();e.add(n)}this._viewportClips=t},_lg7:function(t,e){for(var i=[],n=this._fe,r=0,s=n.length;s>r;r++){var o=n[r];t.intersects(o[0],o[1],o[2],o[3])&&(i.push(o),this._ij.addRect(o[0],o[1],o[2],o[3]))}this._fe=i,this._ke=e||i.length>=this._fr},_eg:function(t,e,i,n){if(!this._ij.intersectsRect(t,e,i,n))return!1;if(this._ke)return!0;if(this._viewportClips){var r=this._viewportClips;for(var s in r)if(r[s].intersects(t,e,i,n))return!0}for(var o,a=0,h=this._fe.length;h>a;a++)if(o=this._fe[a],on.intersects(t,e,i,n,o[0],o[1],o[2],o[3]))return!0;return!1},_j4:function(t,e){if(this._i0())return!1;if(t.beginPath(),this._ke)return se(t,(o=e([this._ij.x,this._ij.y,this._ij.width,this._ij.height]))[0],o[1],o[2],o[3]),void t.clip();if(this._viewportClips)for(var i in this._viewportClips){se(t,(o=this._viewportClips[i].canvasBounds)[0],o[1],o[2],o[3])}for(var n=this._fe,r=0,s=n.length;s>r;r++){var o;se(t,(o=e(n[r]))[0],o[1],o[2],o[3])}t.clip()}});is._toIntRect=function(t,e,i,n){return t instanceof Object&&(e=t.y,i=t.width,n=t.height,t=t.x),i=G(t+i)-(t=k(t)),n=G(e+n)-(e=k(e)),[t,e,i,n]},is._lc7=k,is._gs=G,sr.NAVIGATION_BUTTON="navigation.button",sr.NAVIGATION_SCROLLBAR="navigation.scrollbar",Ji.NAVIGATION_TYPE=sr.NAVIGATION_SCROLLBAR;var ns=b({_ix:function(){m(this,ns,"_ix",arguments),this._topCanvas._ix()},_8v:function(t,e){return(t=t.$data.zIndex||0)-(e=e.$data.zIndex||0)},super:ts,constructor:function(t,i){this._jc=t,R(i)&&(i=e.getElementById(i)),i&&i.tagName||(i=e.createElement("div")),O(this,ns,[i]),this._topCanvas=new li(this,this._lge),this._gc=[],this._jc._8.addListener(this._1f,this),this._jc._1e.addListener(this._8f,this),this._jc._13.addListener(this._6q,this),this._jc._$h.addListener(this._2i,this),this._jc._$m.addListener(this._3e,this),this._lg1={},this._3k(Ji.NAVIGATION_TYPE,!0)},_4z:function(t){m(this,ns,"_4z",arguments),this._topCanvas._4z(t)},_gk:function(t){return t.id||(t=this._l0.getById(t)),!!t&&(this._l0.remove(t),t.destroy(),t.__ij&&this._fx(t.__ij),void(this._letBoundsFlag=!0))},_gf:function(){this._l0.forEach(function(t){t.destroy()}),this._l0.clear()},_du:function(t,e){var i=t.data||t;return i._$p&&(i._$p=!1,i._h0=this._4n(i,e)),!1!==i._h0},_4n:function(t,e){return!!this._3a(t,e)&&(!this._jc._h0Filter||!1!==this._jc._h0Filter(t,e))},_9m:function(t){return this._jc._3b==ii(t)},_3a:function(t,e){if(!1===t.visible)return!1;if(!(t instanceof cs))return this._jc._3b==ii(t)&&!t._d4;var i=t.fromAgent,n=t.toAgent;if(!i||!n)return!1;if(i==n&&!t.isLooped())return!1;if(t.isBundleEnabled()){var r=t.getEdgeBundle(!0);if(r&&!r._du(t,e))return!1}var s=this._du(i,e),o=this._du(n,e);return!(!s||!o)},_lg6:function(t){return t._lg0?{x:t.$x+t.uiBounds.x,y:t.$y+t.uiBounds.y,width:t.uiBounds.width,height:t.uiBounds.height}:void 0},_2r:function(t){var e=this._jy(t);if(e){var i=this._lg6(e);if(i)return new on(i)}},_d2:function(t,e,i){return t.hitTest(e[0],e[1],i)},hitTest:function(t,e){var i=m(this,ns,"hitTest",arguments);if(i){t=this.toLogical(t),e=this._97(e);var n=i.hitTest(t[0],t[1],e,!0);if(n instanceof Es)return n}return i},_35:function(t){return this.getUIByMouseEvent(t)},_6d:function(){m(this,ns,"_6d",arguments),this._topCanvas._h9(this.width,this.height)},_k1:1,_lci:null,_86:null,_87:null,_l0:null,_l4:null,_ih:null,_lg3:null,_5z:!1,_lg0:!1,_iw:null,_42:function(t,e){for(var i=this._lci,n=0,r=i.length;r>n;n++)if(!1===t.call(e,i[n]))return!1},_dd:function(t,e){this._l0.forEach(t,e)},_$t:function(t,e){for(var i=this._lci,n=i.length-1;n>=0;n--)if(!1===t.call(e,i[n]))return!1},_3z:function(t,e){this._l0.forEachReverse(t,e)},_31:function(t){m(this,ns,"_31",arguments),this._viewportChanged={value:t}},_lck:function(){this._3x(!0),this._originAdjusted||(this._originAdjusted=!0,this._jc&&this._jc.originAtCenter&&this._iw.translateTo([this.width/2,this.height/2]))},_em:function(){if(!this._h8ed&&this._5z){if(this._ixingID=null,this._5z=!1,this._lg0&&this._jc&&this._jc._$p&&(this._jc._$p=!1,this._jc.forEach(function(t){t.invalidateVisibility(!0)})),m(this,ns,"_em",arguments),this._87Changed){this._6h&&this._6h._is();var t=this._87Changed.value,e=this._87Changed.old;this._87Changed=null,this._jc._4e(new pn(this._jc,"element.bounds",t,e))}this._viewportChanged&&(this._viewportChanged=!1,this._6h&&this._6h._31&&this._6h._31(this._viewport.width*this._viewport.scale,this._viewport.height*this._viewport.scale),this._jc._4e(new pn(this._jc,"viewport",this._viewport)))}},_gc:null,_lem:function(t){var e=t.$data;if(!t._1c&&!e._5z&&!e._$p)return!1;var i=t.$invalidateSize;return m(this,ns,"_lem",arguments)||i},_9b:function(t){var e=t.$data;e.__3n&&(e.__3n=!1,t._3n()),e.__5z&&e._gy()&&(t._4y(),e.__5z=!1),(t._1c||e._5z)&&(e._5z=!1,t.validate())},_fy:function(t,e){var i=t.ratio;t.scale(i,i),t.transform.apply(t,this._iw.m);for(var n=this.renderScale,r=[],s=0,o=e.length;o>s;s++){var a=e[s];a._ix(t,n),a._ie&&a._ie.length&&r.push(a)}if(r.length)for(s=0,o=r.length;o>s;s++)r[s]._8j(t,n)},render:function(t,e){if(e.length){if(t.save(),Gi)try{this._fy(t,e)}catch(t){}else this._fy(t,e);t.restore()}},_g7:function(t,e,i){t.save(),t.translate(-i.x*e,-i.y*e),t.scale(e,e);for(var n,r,s=this._l0._ig.slice(),o=[],a=0,h=(s=this._hy(s)).length;h>a;a++)(n=s[a]).__h0&&(r=this._lg6(n),i.intersectsRect(r.x,r.y,r.width,r.height)&&(n._ix(t,e),n._ie&&n._ie.length&&o.push(n)));if(o.length)for(a=0,h=o.length;h>a;a++)o[a]._8j(t,e);t.restore()},_10:function(){},_1p:function(){for(var t,e,i=this._l0._ig,n=new on,r=i.length-1;r>=0;r--)(t=i[r])._h0&&(e=t.uiBounds,n.addRect(t.$x+e.x,t.$y+e.y,e.width,e.height));var s=this._87;this._87=n,n.equals(s)||this._10(s,n)},_5o:function(){this._lci.length=0,this._86={}},_jz:function(){this._jw()},_h8:function(){this._jw(),this._h8ed=!0,this._5z=!1,this._topCanvas.clear(),this._7s.length=0,this._6h&&(this._6h._h8(),delete this._6h)},_jy:function(t){return this._l0.getById(t.id||t)},_$g:function(t){return this._ej(t)},_f5:function(t,e){var i=this.toCanvas(t,e);return{x:i[0],y:i[1]}},_ej:function(t,e){var i=this.toLogical(t,e);return{x:i[0],y:i[1]}},_$c:null,_3e:function(t){var e=t.source,i=t.data;if(i)if(this._lg0){if(D(i))for(var n=0,r=i.length;r>n;n++)o=i[n].id,(s=this._l0.getById(o))&&(s.selected=e.containsById(o),s.invalidateRender());else{if(o=i.id,!(s=this._l0.getById(o)))return;s.selected=e.containsById(o),s.invalidateRender()}this._let()}else{var s,o;if(this._$c||(this._$c={}),D(i))for(n=0,r=i.length;r>n;n++)o=i[n].id,this._$c[o]=!0;else o=i.id,this._$c[o]=!0}},_jc:null,_lcq:function(t){var e=t.uiClass;return e?new e(t,this._jc):void 0},_1f:function(t){if(!this._lg0)return!1;var e=t.source,i=t.kind;"enableSubNetwork"==i&&this._jc.invalidateVisibility(),"uiClass"==i?(this._gk(e.id),this._jm(e)):"expanded"==i&&e._gy()&&t.value&&this._5n(e);var n=this._l0.getById(e.id);n&&n._lg0&&n.onPropertyChange(t)&&this._let()},_38:function(t){var e=this._jy(t);e&&(e.invalidateData(),this._let())},_8f:function(t){if(!this._lg0)return!1;switch(t.kind){case An.KIND_ADD:this._jm(t.data);break;case An.KIND_REMOVE:this._f8(t.data);break;case An.KIND_CLEAR:this._i4(t.data)}},_jw:function(){this._lg1={},this._gf(),this.clear()},_lg1:null,_jm:function(t){var e=this._lcq(t);e&&(this._l0.add(e),this._lg0&&(this._lg1[t.id]=t),this._let())},_f8:function(t){if(Array.isArray(t)){for(var e,i=[],n=0,r=t.length;r>n;n++)e=t[n].id,i.push(e),delete this._lg1[e];t=i}else t=t.id,delete this._lg1[t],t=[t];t.forEach(function(t){this._gk(t)},this),this._let()},_i4:function(){this._jw()},_6q:function(t){return!!this._lg0&&void(t.source instanceof ds&&!this._lg1[t.source.id]&&(t.oldValue&&(this._38(t.oldValue),t.oldValue.__5z=!0),t.value&&(this._38(t.value),t.value.__5z=!0),this._5n(t.source)))},_2i:function(t){return!!this._lg0&&void(t.source instanceof ds&&!this._lg1[t.source.id]&&this._5n(t.source))},_2k:function(t){if(t._edgeBundleInvalidateFlag){var e=t.getEdgeBundle(!0);if(!e)return t._edgeBundleInvalidateFlag=!1,void t.validateEdgeBundle();e.validate(this._jc),e._lee(function(t){t.validateEdgeBundle()})}},_$s:function(t){var e=(this._jc,this._jc.graphModel),i=this._l0,n=[],r=1;if(e.forEachByDepthFirst(function(t){return t instanceof cs?(this._2k(t),void n.push(t)):void((d=this._lcq(t))&&(i.add(d),t.__k3=r++))},this),i.length){var s=i._ig;for(r=s.length-1;r>=0;r--)d=s[r],this._39(d,d.$data,t)}r=0;for(var o,a=n.length;a>r;r++)if(o=n[r],d=this._lcq(o)){this._39(d,o,t),i.add(d);var h=o.fromAgent,l=o.toAgent,_=h.__k3||0;h!=l&&(_=Math.max(_,l.__k3||0)),o.__k3=_}if(n.length&&i._ig.sort(function(t,e){return t.$data.__k3-e.$data.__k3}),this._$c){var u=e.selectionModel;for(var c in this._$c)if(u.containsById(c)){var d;(d=i.getById(c))&&(d.selected=!0)}this._$c=null}this._5x()},_lg4:function(t,e){if(t)return this._$s();var i=this._letBoundsFlag;for(var n in this._letBoundsFlag=!1,this._lg1){var r=this._lg1[n];r instanceof ds?this._5n(r):this._54(r)}this._lg1={};for(var s,o,a=this._l0._ig,h=[],l=a.length-1;l>=0;l--)(o=(s=a[l]).$data)instanceof cs?(this._2k(o),h.push(s)):this._39(s,o,e)&&!i&&(i=!0);if(h.length){l=0;for(var _=h.length;_>l;l++)s=h[l],this._39(s,s.$data,e)&&!i&&(i=!0)}i&&this._5x()},_39:function(t,e,i){if(e instanceof cs)return e.__3n&&(e.__3n=!1,t._3n()),this._lem(t,i);if(e.__5z&&e._gy()&&(t._4y(),e.__5z=!1),this._lem(t,i)){var n=this._3r(e);return n&&(n.__5z=!0),e.hasEdge()&&e.forEachEdge(function(t){t.__3n=!0},this),!0}},_2t:function(t,e){var i=t.fromAgent,n=t.toAgent,r=e.getIndexById(i.id);if(i==n)return r;var s=e.getIndexById(n.id);return Math.max(r,s)},_2v:function(t,e){var i=this.graphModel._gq(t);return i?e.getIndexById(i.id):0},_5n:function(t){var e=this._l0,i=e.getById(t.id);if(!i)throw new Error("UI '"+t.name+"' not found");var r=this._2v(t,e),s=[i];t.hasChildren()&&n(t,function(t){t instanceof ds&&((i=e.getById(t.id))&&s.push(i))},this),this._3v(e,r,s)},_54:function(t){var e=this._l0.getById(t.id);if(e){var i=this._2t(t,this._l0);this._l0.setIndexBefore(e,i)}},_3v:function(t,e,i){function n(t){r.add(t)}var r=new Qi;_(i,function(i){e=t.setIndexAfter(i,e),i.$data.forEachEdge(n)},this),0!=r.length&&r.forEach(this._54,this)},_83:function(t){return t.getEdgeBundle(!0)},_3r:function(t){var e=ve(t);return e&&e.expanded?e:null},_64:null,_6h:null,_3k:function(t,e){return!(!e&&t==this._64)&&(this._64=t,this._6h&&(this._6h._h8(),delete this._6h),t==sr.NAVIGATION_SCROLLBAR?void(this._6h=new ai(this,this._lge)):t==sr.NAVIGATION_BUTTON?void(this._6h=new oi(this,this._lge)):void 0)},_2x:function(t,e){this._6h&&this._6h._is(),this._jc._4e(new pn(this._jc,"transform",t,e))},_71:function(t,e){this._jc._4e(new pn(this._jc,"scale",t,e))},_30:function(t,e){this._87Changed={value:t,old:e}},_75:function(){this._6x()}});Object.defineProperties(ns.prototype,{_viewportBounds:{get:function(){return this.viewportBounds}},_scale:{get:function(){return this.scale},set:function(t){this._f7(t)}},_tx:{get:function(){return this.tx}},_ty:{get:function(){return this.ty}},graphModel:{get:function(){return this._jc._jcModel}}});var rs={create:function(){return[1,0,0,1,0,0]},invert:function(t,e){var i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],h=i*s-n*r;return h?(h=1/h,t[0]=s*h,t[1]=-n*h,t[2]=-r*h,t[3]=i*h,t[4]=(r*a-s*o)*h,t[5]=(n*o-i*a)*h,t):null},multiply:function(t,e,i){var n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=i[0],_=i[1],u=i[2],c=i[3],d=i[4],f=i[5];return t[0]=n*l+s*_,t[1]=r*l+o*_,t[2]=n*u+s*c,t[3]=r*u+o*c,t[4]=n*d+s*f+a,t[5]=r*d+o*f+h,t}};rs.mul=rs.multiply,rs.rotate=function(t,e,i){var n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=Math.sin(i),_=Math.cos(i);return t[0]=n*_+s*l,t[1]=r*_+o*l,t[2]=n*-l+s*_,t[3]=r*-l+o*_,t[4]=a,t[5]=h,t},rs.scale=function(t,e,i){var n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=i[0],_=i[1];return t[0]=n*l,t[1]=r*l,t[2]=s*_,t[3]=o*_,t[4]=a,t[5]=h,t},rs.translate=function(t,e,i){var n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=i[0],_=i[1];return t[0]=n,t[1]=r,t[2]=s,t[3]=o,t[4]=n*l+s*_+a,t[5]=r*l+o*_+h,t},rs.transform=function(t,e){var i=e[0],n=e[1];return[i*t[0]+n*t[2]+t[4],i*t[1]+n*t[3]+t[5]]},rs.reverseTransform=function(t,e){return rs.transform(rs.invert([],t),e)};var ss=Math.PI+Math.PI,os=C,as=b({equals:function(t){if(!t||!Array.isArray(t))return!1;for(var e=this.m,i=0;i<e.length;){if(e[i]!=t[i])return!1;++i}return!0},constructor:function(t){this.m=t||rs.create(),this.im=[]},listener:null,_5z:!0,invalidate:function(){return this._5z=!0,(!this._leackM||!this.equals(this._leackM))&&(this.listener&&this.listener({target:this,kind:"invalidate"}),this._leackM=this.m.slice(),this)},validate:function(){return this._5z=!1,rs.invert(this.im,this.m),this},translate:function(t,e){return os(t)&&(t=[arguments[0],arguments[1]],e=arguments[2]),!1!==e?(this.m[4]+=t[0],this.m[5]+=t[1],this.invalidate()):(rs.translate(this.m,this.m,t),this.invalidate())},translateTo:function(t,e){return os(t)&&(t=[arguments[0],arguments[1]],e=arguments[2]),e&&(e/=this._gn(),rs.scale(this.m,this.m,[e,e])),this.m[4]=t[0],this.m[5]=t[1],this.invalidate()},scale:function(t,e){return"number"==typeof t&&(t=[t,t]),e?(rs.translate(this.m,this.m,e),rs.scale(this.m,this.m,t),rs.translate(this.m,this.m,oe(e))):rs.scale(this.m,this.m,t),this.invalidate()},rotate:function(t,e){return e?(rs.translate(this.m,this.m,e),rs.rotate(this.m,this.m,t),rs.translate(this.m,this.m,oe(e))):rs.rotate(this.m,this.m,t),this.invalidate()},transform:function(t){return rs.transform(this.m,t)},reverseTransform:function(t){return rs.transform(this._4d(),t)},toString:function(){return"matrix("+this.m.join(",")+")"},_4d:function(){return this._5z&&this.validate(),this.im},_dw:function(){var t=this.m[0],e=this.m[1],i=this.m[2],n=this.m[3];return[Math.sqrt(t*t+i*i),Math.sqrt(e*e+n*n)]},_gn:function(){var t=this.m[0],e=this.m[2];return Math.sqrt(t*t+e*e)},_7o:function(){return[this.m[4],this.m[5]]},_lch:function(){var t=this.m[0],e=this.m[1],i=this.m[2],n=this.m[3];return[ae(Math.atan2(e,n)),ae(Math.atan2(-i,t))]},_dy:function(){return ae(Math.atan2(this.m[1],this.m[3]))}}),hs=b({constructor:function(){},x:0,y:0,width:0,height:0,rotate:0,set:function(t,e,i,n,r,s){return this.x=t,this.y=e,this.width=i,this.height=n,this.rotate=r,this._lcos=Math.cos(r),this._sin=Math.sin(r),this.scale=s,this._globalBounds=null,this},_gx:function(t,e){return t-=this.x,e-=this.y,this.rotate?le(t,e,this._sin,this._lcos):[t,e]},_7n:function(t){var e=new on;return e.add(this._gx(t.x,t.y)),e.add(this._gx(t.x+t.width,t.y)),e.add(this._gx(t.x,t.y+t.height)),e.add(this._gx(t.x+t.width,t.y+t.height)),e},_eq:function(t,e){if(this.rotate){var i=le(t,e,Math.sin(-this.rotate),Math.cos(-this.rotate));t=i[0],e=i[1]}return[this.x+t,this.y+e]},_5k:function(t,e){var i=this._gx(t,e);return t=i[0],e=i[1],t>=0&&e>=0&&t<=this.width&&e<=this.height},intersects:function(t,e,i,n){if(!this.rotate)return on.intersects(this.x,this.y,this.width,this.height,t,e,i,n);if(!i||!n)return this._5k(t,e);var r=this.getGlobalBounds();if(!r.intersects(t,e,i,n))return!1;for(var s=r.points,o=0;o<s.length;){var a=s[o];if(on.intersectsPoint(t,e,i,n,a[0],a[1]))return!0;o++}var h=[[t,e],[t+i,e],[t,e+n],[t+i,e+n]];for(o=0;o<h.length;){a=h[o];if(this._5k(a[0],a[1]))return!0;o++}return function(t,e){for(var i=0,n=t.length;n>i;){for(var r=t[i],s=t[(i+1)%n],o=0;4>o;){var a=e[o],h=e[(o+1)%n];if(he(r[0],r[1],s[0],s[1],a[0],a[1],h[0],h[1]))return!0;o++}i++}return!1}(s,h)},getGlobalBounds:function(){return this._globalBounds||(this._globalBounds=this._6y(0,0,this.width,this.height)),this._globalBounds},_6y:function(t,e,i,n){if(!this.rotate)return new on(this.x+t,this.y+e,i,n);var r=[],s=new on,o=this._eq(t,e);return r.push(o),s.add(o[0],o[1]),o=this._eq(t+i,e),r.push(o),s.add(o[0],o[1]),o=this._eq(t,e+n),r.push(o),s.add(o[0],o[1]),o=this._eq(t+i,e+n),r.push(o),s.add(o[0],o[1]),s.points=r,s},_4g:function(t,e,i,n,r){var s;if(this.rotate){var o=this._eq(t,e);s=(new hs).set(o[0],o[1],i,n,this.rotate,this.scale)}else s=(new hs).set(this.x+t,this.y+e,i,n,0,this.scale);return s.canvasBounds=[Math.round(r*t),Math.round(r*e),Math.round(r*i),Math.round(r*n)],s},_33:function(t,e,i,n){if(!this.rotate){var r=on.intersection(this.x,this.y,this.width,this.height,t,e,i,n);return r&&r.offset(-this.x,-this.y),r}var s=this._gx(t,e);return t=s[0],e=s[1],on.intersection(0,0,this.width,this.height,s[0],s[1],i,n)},equals:function(t){return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height&&this.rotate==t.rotate},toString:function(){return this.x+","+this.y+","+this.width+","+this.height+","+this.rotate},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,rotate:this.rotate,scale:this.scale}}}),ls={setStyle:et,setStyles:tt,addRule:it,pre:Pn},_s=function(t,e,i,n){this.source=t,this.kind=e,this.oldValue=n,this.value=i,this.propertyType=sr.PROPERTY_TYPE_STYLE};p(_s,pn);var us=function(t){this.id=++Mi,this._lei={},this._io={},t&&(this.$name=t)};us.prototype={_io:null,getStyle:function(t){return this._io[t]},setStyle:function(t,e){var i=this._io[t];return!(i===e||i&&e&&i.equals&&i.equals(e))&&this._lga(t,e,new _s(this,t,e,i),this._io)},putStyles:function(t,e){for(var i in t){var n=t[i];e?this._io[i]=n:this.setStyle(i,n)}},_$p:!0,invalidateVisibility:function(t){this._$p=!0,t||(this instanceof ds&&this.hasEdge()&&this.forEachEdge(function(t){t._$p=!0}),this._gy()&&this.hasChildren()&&this.forEachChild(function(t){t.invalidateVisibility()}))},onParentChanged:function(){this.invalidateVisibility()},_gy:function(){return!this._3o&&this instanceof vs},invalidate:function(){this.onEvent(new En(this,"ui","invalidate"))},_lek:null,addUI:function(t,e){if(this._lek||(this._lek=new Qi),t.id||(t.id=++Mi),this._lek.containsById(t.id))return!1;var i={id:t.id,ui:t,bindingProperties:e};this._lek.add(i);var n=new En(this,"ui","add",i);return this.onEvent(n)},removeUI:function(t){if(!this._lek)return!1;var e=this._lek.getById(t.id);return!!e&&(this._lek.remove(e),void this.onEvent(new En(this,"ui","remove",e)))},toString:function(){return this.$name||this.id},type:"Q.Element",_3o:!1,_h0:!0,inGroup:function(t){var e=ve(this);return e==t||e&&t instanceof vs&&e.isDescendantOf(t)}},p(us,Sn),A(us.prototype,["uiClass","name","zIndex","tooltip"]),j(us.prototype,{enableSubNetwork:{get:function(){return this._3o},set:function(t){if(this._3o!=t){var e=this._3o;this._3o=t,this instanceof ds&&this._$y(),this.onEvent(new pn(this,"enableSubNetwork",t,e))}}},bindingUIs:{get:function(){return this._lek}},styles:{get:function(){return this._io},set:function(t){if(this._io!=t){for(var e in this._io)e in t||(t[e]=i);this.putStyles(t),this._io=t}}}}),rr.findGroup=ve;var cs=function(t,e,i){this.id=++Mi,this._lei={},this._io={},i&&(this.$name=i),this.$from=t,this.$to=e,this.connect()};cs.prototype={$uiClass:Me,_j1:null,_ht:null,_j2:null,_hr:null,_eh:!1,type:"Q.Edge",otherNode:function(t){return t==this.from?this.to:t==this.to?this.from:void 0},connect:function(){if(this._eh)return!1;if(!this.$from||!this.$to)return!1;if(this._eh=!0,this.$from!=this.$to){(function(t,e){t._9w++,t._h1?(e._j1=t._id,t._id._j2=e,t._id=e):(t._h1=e,t._id=e)})(this.$to,this),function(t,e){t._8m++,t._fp?(e._ht=t._gw,t._gw._hr=e,t._gw=e):(t._fp=e,t._gw=e)}(this.$from,this),_e(this.$from,this,this.$to);var t,e=this.fromAgent,i=this.toAgent;if(e!=i)this.$from._d4&&(ce(e,this,i),t=!0),this.$to._d4&&(fe(i,this),t=!0),t&&_e(e,this,i)}else this.$from._h3(this)},disconnect:function(){if(!this._eh)return!1;if(this._eh=!1,this.$from!=this.$to){(function(t,e){t._8m--,t._gw==e&&(t._gw=e._ht),e._ht?e._ht._hr=e._hr:t._fp=e._hr,e._hr&&(e._hr._ht=e._ht),e._ht=null,e._hr=null,ue(t,e,e.$to)})(this.$from,this),function(t,e){t._9w--,t._id==e&&(t._id=e._j1),e._j1?e._j1._j2=e._j2:t._h1=e._j2,e._j2&&(e._j2._j1=e._j1),e._j1=null,e._j2=null}(this.$to,this),ue(this.$from,this,this.$to);var t,e=this.fromAgent,i=this.toAgent;if(e!=i)this.$from._d4&&(de(e,this,i),t=!0),this.$to._d4&&(ge(i,this),t=!0),t&&ue(e,this,i)}else this.$from._leo(this)},isConnected:function(){return this._eh},isInvalid:function(){return!this.$from||!this.$to},isLooped:function(){return this.$from==this.$to},getEdgeBundle:function(t){return t?this._2d():this.isLooped()?this.$from._3p:this.$from.getEdgeBundle(this.$to)},hasEdgeBundle:function(){var t=this.getEdgeBundle(!0);return t&&t.edges.length>1},_2d:function(){return this.fromAgent==this.toAgent?this.$from._d4||this.$to._d4?null:this.$from._3p:this.fromAgent.getEdgeBundle(this.toAgent)},_9c:null,hasPathSegments:function(){return this._9c&&!this._9c.isEmpty()},isBundleEnabled:function(){return this.bundleEnabled&&!this.hasPathSegments()},firePathChange:function(t){this.onEvent(new pn(this,"path.segment",t))},addPathSegment:function(t,e,i){var n=new kr(e||Dr,t);this._9c||(this._9c=new Qi),this._9c.add(n,i),this.firePathChange(n)},addPathSegement:function(){return rr.log('change "edge.addPathSegement(...)" to "edge.addPathSegment(...)"'),this.addPathSegment.apply(this,arguments)},removePathSegmentByIndex:function(t){if(!this._9c)return!1;var e=this._9c.getByIndex(t);e&&(this._9c.remove(e),this.firePathChange(e))},removePathSegment:function(t){return!!this._9c&&(this._9c.remove(t),void this.firePathChange(t))},movePathSegment:function(t,e,i){if(!this._9c)return!1;if(t=t||0,e=e||0,rr.isNumber(i)){var n=this._9c.getByIndex(i);return!!n&&(n.move(t,e),void this.firePathChange())}_(function(i){i.move(t,e)}),this.firePathChange()},move:function(t,e){return!!this._9c&&(this._9c.forEach(function(i){i.move(t,e)},this),void this.firePathChange())},validateEdgeBundle:function(){}},p(cs,us),j(cs.prototype,{pathSegments:{get:function(){return this._9c},set:function(t){rr.isArray(t)&&(t=new Qi(t)),this._9c=t,this.firePathChange()}},from:{get:function(){return this.$from},set:function(t){if(this.$from!=t){var e=new pn(this,"from",t,this.$from);!1!==this.beforeEvent(e)&&(this.disconnect(),this.$from=t,this.connect(),this.onEvent(e))}}},to:{get:function(){return this.$to},set:function(t){if(this.$to!=t){var e=new pn(this,"to",t,this.$to);!1!==this.beforeEvent(e)&&(this.disconnect(),this.$to=t,this.connect(),this.onEvent(e))}}},fromAgent:{get:function(){return this.$from?this.$from._d4||this.$from:null}},toAgent:{get:function(){return this.$to?this.$to._d4||this.$to:null}}}),A(cs.prototype,["edgeType",{name:"bundleEnabled",value:!0},"angle"]);var ds=function(t,e,i){2==arguments.length&&C(t)&&(i=e,e=t,t=null),this.id=++Mi,this._lei={},this._io={},t&&(this.$name=t),this.$image="Q-node",this.$anchorPosition=hn.CENTER_MIDDLE,this.$location={x:e||0,y:i||0},this._linkedNodes={}};ds.prototype={$uiClass:Be,_d4:null,forEachEdge:function(t,e,i){return!(!i&&this._je&&!1===this._je.forEach(t,e))&&function(t,e,i){return!1!==we(t,e,i)&&Oe(t,e,i)}(this,t,e)},forEachOutEdge:function(t,e){return Oe(this,t,e)},forEachInEdge:function(t,e){return we(this,t,e)},getEdges:function(){var t=[];return this.forEachEdge(function(e){t.push(e)}),t},_h1:null,_fp:null,_id:null,_gw:null,_9w:0,_8m:0,hasInEdge:function(){return null!=this._h1},hasOutEdge:function(){return null!=this._fp},hasEdge:function(){return null!=this._h1||null!=this._fp||this.hasLoops()},linkedWith:function(t){return t.from==this||t.to==this||t.fromAgent==this||t.toAgent==this},hasEdgeWith:function(t){var e=this.getEdgeBundle(t);return e&&e.edges.length>0},_je:null,_3p:null,hasLoops:function(){return this._je&&this._je.length>0},_h3:function(t){return this._je||(this._je=new Qi,this._3p=new Eo(this,this,this._je)),this._3p._hb(t)},_leo:function(t){return this._3p?this._3p._ler(t):void 0},getEdgeBundle:function(t){return t==this?this._3p:this._linkedNodes[t.id]||t._linkedNodes[this.id]},_66:function(){return this._99&&this._99.length},_52:function(){return this._7h&&this._7h.length},_93:function(){return this._66()||this._52()},_7h:null,_99:null,_len:function(){var t=this._d4,e=function(t){return t.parent?(t=t.parent)._d4?t._d4:t instanceof vs&&!1===t._gm?t:null:null}(this);if(t!=e){var i=me(this);this._91(e),i.forEach(function(t){var e=t.fromAgent,i=t.toAgent,n=(t=t.edge).$from._d4,r=t.$to._d4;e!=i&&(e&&de(e,t,i||t.$to),i&&ge(i,t,e||t.$from)),n!=r&&(n&&ce(n,t,r||t.$to),r&&fe(r,t,n||t.$from),_e(n||t.$from,t,r||t.$to))},this)}},onParentChanged:function(){rr.doSuper(this,ds,"onParentChanged",arguments),this._len()},_79:null,_$y:function(){var t;if(this._3o?t=null:(t=this._d4)||!1!==this._gm||(t=this),this._79==t)return!1;if(this._79=t,this._er&&this._er._ig.length)for(var e,i=this._er._ig,n=0,r=i.length;r>n;n++)(e=i[n])instanceof ds&&e._91(t)},setLocation:function(t,e){if(this.$location&&this.$location.x==t&&this.$location.y==e)return!1;var i;i=this.$location?{x:this.$location.x,y:this.$location.y}:this.$location;var n=new pn(this,"location",i,{x:t,y:e});return!1!==this.beforeEvent(n)&&(this.$location?(this.$location.x=t,this.$location.y=e):this.$location=new en(t,e),this.onEvent(n),!0)},_dt:null,addFollower:function(t){return null!=t&&(t.host=this)},removeFollower:function(t){return!(!this._dt||!this._dt.contains(t))&&(t.host=null)},hasFollowers:function(){return this._dt&&!this._dt.isEmpty()},toFollowers:function(){return this.hasFollowers()?this._dt.toDatas():null},clearFollowers:function(){this.hasFollowers()&&(this.toFollowers(),_(this.toFollowers(),function(t){t.host=null}))},getFollowerIndex:function(t){return this._dt&&this._dt.contains(t)?this._dt.indexOf(t):-1},setFollowerIndex:function(t,e){return this._dt&&this._dt.contains(t)?void this._dt.setIndex(t,e):-1},getFollowerCount:function(){return this._dt?this._dt.length:0},_90:function(){return this._dt?this._dt:(this._dt=new Qi,this._dt)},isFollow:function(t){if(!t||!this._host)return!1;for(var e=this._host;e;){if(e==t)return!0;e=e._host}return!1},_91:function(t){return t!=this._d4&&(this._d4=t,this.invalidateVisibility(),void this._$y())},type:"Q.Node"},p(ds,us),j(ds.prototype,{loops:{get:function(){return this._je}},edgeCount:{get:function(){return this._9w+this._8m}},agentNode:{get:function(){return this._d4||this}},host:{set:function(t){if(this==t||t==this._host)return!1;var e=new pn(this,"host",this._host,t);if(!1===this.beforeEvent(e))return!1;var i=null,n=null,r=this._host;if(null!=t&&(i=new pn(t,"follower.add",null,this),!1===t.beforeEvent(i)))return!1;if(null!=r&&(n=new pn(r,"follower.remove",null,this),!1===r.beforeEvent(n)))return!1;(this._host=t,null!=t)&&t._90().add(this);null!=r&&r._90().remove(this);return this.onEvent(e),null!=t&&t.onEvent(i),null!=r&&r.onEvent(n),!0},get:function(){return this._host}}}),A(ds.prototype,["location","size","image","rotate","anchorPosition"]),j(ds.prototype,{x:{get:function(){return this.location.x},set:function(t){t!=this.location.x&&(this.location=new en(t,this.location.y))}},y:{get:function(){return this.location.y},set:function(t){t!=this.location.y&&(this.location=new en(this.location.x,t))}}});var fs=function(t,e){t instanceof Fr&&(e=t,t=i),y(this,fs,[t]),this.path=e||new Fr,this.anchorPosition=null,this.uiClass=hi,Ji.SHAPENODE_STYLES||(Ji.SHAPENODE_STYLES={},Ji.SHAPENODE_STYLES[ys.ARROW_TO]=!1),this.putStyles(Ji.SHAPENODE_STYLES)};fs.prototype={$uiClass:hi,type:"Q.ShapeNode",moveTo:function(t,e){this.path.moveTo(t,e),this.firePathChange()},lineTo:function(t,e){this.path.lineTo(t,e),this.firePathChange()},quadTo:function(t,e,i,n){this.path.quadTo(t,e,i,n),this.firePathChange()},curveTo:function(t,e,i,n,r,s){this.path.curveTo(t,e,i,n,r,s),this.firePathChange()},arcTo:function(t,e,i,n,r){this.path.arcTo(t,e,i,n,r),this.firePathChange()},closePath:function(){this.path.closePath(),this.firePathChange()},clear:function(){this.path.clear(),this.firePathChange()},removePathSegmentByIndex:function(t){!1!==this.path.removePathSegment(t)&&this.firePathChange()},firePathChange:function(){this.path._5z=!0,this.onEvent(new pn(this,"path.segment"))},addPathSegment:function(t,e,i){this.path.add(new kr(e||Dr,t),i),this.firePathChange()}},p(fs,ds),j(fs.prototype,{path:{get:function(){return this.image},set:function(t){this.image=t}},pathSegments:{get:function(){return this.path.segments},set:function(t){this.path.segments=t||[],this.firePathChange()}},length:{get:function(){return this.path.length}}}),rr.ShapeNode=fs;var gs={_j5:{},register:function(t,e){gs._j5[t]=e},getShape:function(t,e,n,r,s,o){r===i&&(r=e,s=n,e=0,n=0),r||(r=50),s||(s=50);var a=gs._j5[t];return a?a.generator instanceof Function?a.generator(e,n,r,s,o):a:void 0},getRect:function(t,e,i,n,r,s,o){return t instanceof Object&&"width"in t&&(e=t.y,i=t.width,n=t.height,r=t.rx,s=t.ry,o=t.path,t=t.x),be(o||new Fr,t,e,i,n,r,s)},getAllShapes:function(t,e,i,n,r){var s={};for(var o in gs._j5){var a=gs.getShape(o,t,e,i,n,r);a&&(s[o]=a)}return s},createRegularShape:function(t,e,i,n,r){return Se(t,e,i,n,r)}};(function(){gs.register(sr.SHAPE_CIRCLE,Le(new Fr,0,0,100,100)),gs.register(sr.SHAPE_RECT,be(new Fr,0,0,100,100)),gs.register(sr.SHAPE_ROUNDRECT,be(new Fr,0,0,100,100,20,20)),gs.register(sr.SHAPE_STAR,function(t,e,i,n,r){var s=2*n,o=2*r,a=e+n/2,h=i+r/2;return t.moveTo(a-s/4,h-o/12),t.lineTo(e+.306*n,i+.579*r),t.lineTo(a-s/6,h+o/4),t.lineTo(e+n/2,i+.733*r),t.lineTo(a+s/6,h+o/4),t.lineTo(e+.693*n,i+.579*r),t.lineTo(a+s/4,h-o/12),t.lineTo(e+.611*n,i+.332*r),t.lineTo(a+0,h-o/4),t.lineTo(e+.388*n,i+.332*r),t.closePath(),t}(new Fr,0,0,100,100)),gs.register(sr.SHAPE_TRIANGLE,function(t,e,i,n,r){return t.moveTo(e,i),t.lineTo(e+n,i+r/2),t.lineTo(e,i+r),t.closePath(),t}(new Fr,0,0,100,100)),gs.register(sr.SHAPE_PENTAGON,Se(5)),gs.register(sr.SHAPE_HEXAGON,Se(6)),gs.register(sr.SHAPE_DIAMOND,function(t,e,i,n,r){return t.moveTo(e,i+r/2),t.lineTo(e+n/2,i),t.lineTo(e+n,i+r/2),t.lineTo(e+n/2,i+r),t.closePath(),t}(new Fr,0,0,100,100)),gs.register(sr.SHAPE_HEART,function(){var t=new Fr;return t.moveTo(75,40),t.curveTo(75,37,70,25,50,25),t.curveTo(20,25,20,62.5,20,62.5),t.curveTo(20,80,40,102,75,120),t.curveTo(110,102,130,80,130,62.5),t.curveTo(130,62.5,130,25,100,25),t.curveTo(85,25,75,37,75,40),t}()),gs.register(sr.SHAPE_TRAPEZIUM,function(){var t=new Fr;return t.moveTo(20,0),t.lineTo(80,0),t.lineTo(100,100),t.lineTo(0,100),t.closePath(),t}()),gs.register(sr.SHAPE_RHOMBUS,function(){var t=new Fr;return t.moveTo(100,0),t.lineTo(100,80),t.lineTo(0,100),t.lineTo(0,20),t.closePath(),t}()),gs.register(sr.SHAPE_PARALLELOGRAM,function(){var t=new Fr;return t.moveTo(20,0),t.lineTo(100,0),t.lineTo(80,100),t.lineTo(0,100),t.closePath(),t}());var t=new Fr;t.moveTo(20,0),t.lineTo(40,0),t.lineTo(40,20),t.lineTo(60,20),t.lineTo(60,40),t.lineTo(40,40),t.lineTo(40,60),t.lineTo(20,60),t.lineTo(20,40),t.lineTo(0,40),t.lineTo(0,20),t.lineTo(20,20),t.closePath(),gs.register(sr.SHAPE_CROSS,t),gs.register(sr.SHAPE_ARROW_STANDARD,Ae(new Fr,0,0,100,100)),gs.register(sr.SHAPE_ARROW_1,function(){var t=new Fr;return t.moveTo(43,23),t.lineTo(28,10),t.lineTo(37,2),t.lineTo(63,31),t.lineTo(37,59),t.lineTo(28,52),t.lineTo(44,38),t.lineTo(3,38),t.lineTo(3,23),t.closePath(),t}()),gs.register(sr.SHAPE_ARROW_2,function(){var t=new Fr;return t.moveTo(1,8),t.lineTo(7,2),t.lineTo(32,26),t.lineTo(7,50),t.lineTo(1,44),t.lineTo(18,26),t.closePath(),t.moveTo(27,8),t.lineTo(33,2),t.lineTo(57,26),t.lineTo(33,50),t.lineTo(27,44),t.lineTo(44,26),t.closePath(),t}()),gs.register(sr.SHAPE_ARROW_3,function(){var t=new Fr;return t.moveTo(0,15),t.lineTo(23,15),t.lineTo(23,1),t.lineTo(47,23),t.lineTo(23,43),t.lineTo(23,29),t.lineTo(0,29),t.closePath(),t}()),gs.register(sr.SHAPE_ARROW_4,function(){var t=new Fr;return t.moveTo(0,21),t.lineTo(30,21),t.lineTo(19,0),t.lineTo(25,0),t.lineTo(47,25),t.lineTo(25,48),t.lineTo(19,48),t.lineTo(30,28),t.lineTo(0,28),t.closePath(),t}()),gs.register(sr.SHAPE_ARROW_5,function(){var t=new Fr;return t.moveTo(0,0),t.lineTo(34,24),t.lineTo(0,48),t.lineTo(14,24),t.closePath(),t}()),gs.register(sr.SHAPE_ARROW_6,function(){var t=new Fr;return t.moveTo(20,0),t.lineTo(34,14),t.lineTo(20,28),t.lineTo(22,18),t.lineTo(1,25),t.lineTo(10,14),t.lineTo(1,3),t.lineTo(22,10),t.closePath(),t}()),gs.register(sr.SHAPE_ARROW_7,function(){var t=new Fr;return t.moveTo(4,18),t.lineTo(45,18),t.lineTo(37,4),t.lineTo(83,25),t.lineTo(37,46),t.lineTo(45,32),t.lineTo(4,32),t.closePath(),t}()),gs.register(sr.SHAPE_ARROW_8,function(){var t=new Fr;return t.moveTo(17,11),t.lineTo(27,11),t.lineTo(42,27),t.lineTo(27,42),t.lineTo(17,42),t.lineTo(28,30),t.lineTo(4,30),t.lineTo(4,23),t.lineTo(28,23),t.closePath(),t}()),gs.register(sr.SHAPE_ARROW_OPEN,Ae(new Fr,0,0,100,100,!0))})(),Ie.prototype={type:"Q.Bus"},p(Ie,fs),rr.Bus=Ie,xe.prototype={_gq:function(t){var e,i=t._in,n=(e=i?i._er:this.$roots).indexOf(t);if(0>n)throw new Error("data '"+t+"' not exist in the box");for(;n>=0;){if(0==n)return i instanceof ds?i:null;n-=1;var s=e.getByIndex(n);if(s=r(s))return s}return null},forEachNode:function(t,e){this.forEach(function(i){return!(i instanceof ds&&!1===t.call(e,i))&&void 0})},_3b:null},p(xe,xn),j(xe.prototype,{propertyChangeDispatcher:{get:function(){return this._$r}},currentSubNetwork:{get:function(){return this._3b},set:function(t){if(t&&!t.enableSubNetwork&&(t=null),this._3b!=t){var e=this._3b;this._3b=t,this._$r.onEvent(new pn(this,"currentSubNetwork",t,e))}}}}),Ji.GROUP_TYPE=sr.GROUP_TYPE_RECT,Ji.GROUP_PADDING=5,Ji.GROUP_EXPANDED=!0,Ji.GROUP_MIN_SIZE={width:60,height:60};var vs=function(t,e,n){y(this,vs,arguments),(e===i||n===i)&&(this.$location.invalidateFlag=!0),this.$groupType=Ji.GROUP_TYPE,this.$padding=Ji.GROUP_PADDING,this.$image=zr.group,this.$minSize=Ji.GROUP_MIN_SIZE,this.expanded=Ji.GROUP_EXPANDED};vs.prototype={type:"Q.Group",$uiClass:ni,_8w:function(){return!this._gm&&!this._d4},forEachOutEdge:function(t,e,i){return!1!==Oe(this,t,e)&&(!i&&this._8w()&&this._7h?this._7h.forEach(t,e):void 0)},forEachInEdge:function(t,e,i){return!1!==we(this,t,e)&&(!i&&this._8w()&&this._99?this._99.forEach(t,e):void 0)},forEachEdge:function(t,e,i){return!1!==T(this,vs,"forEachEdge",arguments)&&(i||i||!this._8w()?void 0:(!this._99||!1!==this._99.forEach(t,e))&&(this._7h?this._7h.forEach(t,e):void 0))},hasInEdge:function(t){return t?null!=this._h1:null!=this._h1||this._66()},hasOutEdge:function(t){return t?null!=this._fp:null!=this._fp||this._52()},hasEdge:function(t){return t?null!=this._h1||null!=this._fp:null!=this._h1||null!=this._fp||this._93()}},p(vs,ds),j(vs.prototype,{expanded:{get:function(){return this._gm},set:function(t){if(this._gm!=t){var e=new pn(this,"expanded",t,this._gm);!1!==this.beforeEvent(e)&&(this._gm=t,this._$y(),this.onEvent(e),this._d4||function t(){if(!0!==this._gm)me(this).forEach(function(t){var e=(t=t.edge).$from,i=t.$to,n=e.isDescendantOf(this),r=i.isDescendantOf(this);n&&!r?(ce(this,t),_e(this,t)):r&&!n&&(fe(this,t),_e(t.fromAgent,t,this))},this);else{var e=this._7h,i=this._99;if(e)for(e=e._ig;e.length;)de(this,n=e[0],n.toAgent);if(i)for(i=i._ig;i.length;){var n;ge(this,n=i[0],n.fromAgent)}this.forEachChild(function(e){e._gy()&&t.call(e)})}}.call(this))}}}}),A(vs.prototype,["minSize","groupType","padding","groupImage"]),rr.Group=vs,Ce.prototype.type="Q.Text",p(Ce,ds),rr.Text=Ce;var Es=function(t){this._ij=new on,this._7d=new on,this._f3=new on,this.id=++Mi,t&&(this.data=t)};Es.prototype={invalidate:function(){this.invalidateData()},_1c:!0,_ij:null,_7d:null,_f3:null,_lg0:!1,_ia:1,_ic:1,_h0:!0,_7b:0,_5u:0,_in:null,_9y:null,borderColor:"#444",borderLineDash:null,borderLineDashOffset:null,syncSelection:!0,syncSelectionStyles:!0,_16:function(){this.$anchorPoint=Z(this.anchorPosition,this._7b,this._5u)},setMeasuredBounds:function(t,e,i,n){return t instanceof Object&&(i=t.x,n=t.y,e=t.height,t=t.width),(this._ij.width!=t||this._ij.height!=e||this._ij.x!=i||this._ij.y!=n)&&void this._ij.set(i||0,n||0,t||0,e||0)},initialize:function(){},measure:function(){},draw:function(){},_7l:function(t,e,i){i.selectionType==sr.SELECTION_TYPE_SHADOW?(t.shadowColor=i.selectionColor,t.shadowBlur=i.selectionShadowBlur*e,t.shadowOffsetX=(i.selectionShadowOffsetX||0)*e,t.shadowOffsetY=(i.selectionShadowOffsetY||0)*e):this._1t(t,e,i)},_1t:function(t,e,i){var n=i.selectionBorder||0;i.selectionBackgroundColor&&(t.fillStyle=i.selectionBackgroundColor,t.fillRect(this._7d.x-n/2,this._7d.y-n/2,this._7d.width+n,this._7d.height+n)),t.strokeStyle=i.selectionColor,t.lineWidth=n,t.strokeRect(this._7d.x-n/2,this._7d.y-n/2,this._7d.width+n,this._7d.height+n)},_ix:function(t,e,i,n){if(!this._h0)return!1;if(this.syncSelection||(i=this.selected),(i&&!this.syncSelectionStyles||!n)&&(n=this),t.save(),1!=this.$alpha&&(t.globalAlpha=this.$alpha),t.translate(this.$x,this.$y),this.$rotatable&&this.$_hostRotate&&t.rotate(this.$_hostRotate),(this.offsetX||this.offsetY)&&t.translate(this.offsetX,this.offsetY),this.$rotate&&t.rotate(this.$rotate),this.$layoutByAnchorPoint&&this._9y&&t.translate(-this._9y.x,-this._9y.y),this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur*e,t.shadowOffsetX=this.shadowOffsetX*e,t.shadowOffsetY=this.shadowOffsetY*e),i&&n.selectionType==sr.SELECTION_TYPE_BORDER_RECT&&(this._1t(t,e,n),i=!1),this._$o()&&this._kbShape&&!this._kbShape._empty){this._kbShape.validate();var r={lineWidth:this.$border,strokeStyle:this.borderColor,lineDash:this.borderLineDash,lineDashOffset:this.borderLineDashOffset,fillColor:this.$backgroundColor,fillGradient:this._leackgroundGradient,lineCap:"butt",lineJoin:"round"};this._kbShape.draw(t,e,r,i,n),i=!1,t.shadowColor="rgba(0,0,0,0)"}t.beginPath(),this.draw(t,e,i,n),t.restore()},invalidateData:function(){this.$invalidateData=!0,this.$invalidateSize=!0,this._1c=!0},invalidateSize:function(){this.$invalidateSize=!0,this._1c=!0},invalidateRender:function(){this._1c=!0},_4n:function(){},_$o:function(){return this.$backgroundColor||this.$backgroundGradient||this.$border},_3m:function(){return this.$backgroundColor||this.$backgroundGradient},doValidate:function(){return this.$invalidateData&&(this.$invalidateData=!1,!1!==this.measure()&&(this.$invalidateSize=!0)),this.$invalidateSize&&this.validateSize&&this.validateSize(),Jt.call(this)?(this.$invalidateRotate=!0,this.onBoundsChanged&&this.onBoundsChanged(),!0):this.$invalidateLocation?(this.$invalidateRotate=!0,this.$invalidateLocation=!1,!0):void 0},validate:function(){var t=this._h0;return this.$invalidateVisibility&&(this.$invalidateVisibility=!1,this._h0=this.$visible,!this._h0||(this.$data||this.$showEmpty)&&!1!==this._4n()||(this._h0=!1)),this._h0?(this._1c=!1,this._lg0||(this.initialize(),this._lg0=!0),this.doValidate()):t!=this._h0},_gx:function(t,e){return t-=this.$x,e-=this.$y,Zt.call(this,{x:t,y:e})},hitTest:function(t,e,i,n){if(t-=this.$x,e-=this.$y,!this._f3.intersectsPoint(t,e,i))return!1;var r=Zt.call(this,{x:t,y:e});return t=r.x,e=r.y,!(n||!this._$o()||!this._kbShape||!this._kbShape.hitTest(t,e,i,!1,this.$border,this.$backgroundColor||this.$backgroundGradient))||this.doHitTest(t,e,i)},doHitTest:function(t,e,i){return this._ij.intersectsPoint(t,e,i)},hitTestByBounds:function(t,e,i,n){var r=this._gx(t,e);return!(n||!this._$o()||!this._kbShape||!this._kbShape.hitTest(t,e,i,!1,this.$border,this.$backgroundColor||this.$backgroundGradient))||this._ij.intersectsPoint(r.x,r.y,i)},onDataChanged:function(){this.$invalidateData=!0,this._1c=!0,this.$invalidateVisibility=!0},getBounds:function(){var t=this._f3.clone();return t.offset(this.x,this.y),this.parent&&(this.parent.rotate&&ut(t,this.parent.rotate,t),t.offset(this.parent.x||0,this.parent.y||0)),t},destroy:function(){this._h8ed=!0},_d1:!1},j(Es.prototype,{originalBounds:{get:function(){return this._ij}},data:{get:function(){return this.$data},set:function(t){if(this.$data!=t){var e=this.$data;this.$data=t,this.onDataChanged(t,e)}}},parent:{get:function(){return this._in}},showOnTop:{get:function(){return this._d1},set:function(t){t!=this._d1&&(this._d1=t,this._1c=!0,this._in&&this._in._lg8&&this._in._lg8(this))}}}),De(Es.prototype,{visible:{value:!0,validateFlags:["Visibility","Location"]},showEmpty:{validateFlags:["Visibility"]},anchorPosition:{value:hn.CENTER_MIDDLE,validateFlags:["AnchorPoint","Location"]},position:{value:hn.CENTER_MIDDLE,validateFlags:["Location"]},offsetX:{value:0,validateFlags:["Location"]},offsetY:{value:0,validateFlags:["Location"]},layoutByAnchorPoint:{value:!0,validateFlags:["Size","AnchorPoint","Location"]},padding:{value:0,validateFlags:["Size"]},border:{value:0,validateFlags:["Size"]},borderRadius:{value:Ji.BORDER_RADIUS},showPointer:{value:!1,validateFlags:["Size"]},pointerX:{value:0,validateFlags:["Size"]},pointerY:{value:0,validateFlags:["Size"]},pointerWidth:{value:Ji.POINTER_WIDTH},backgroundColor:{validateFlags:["Size"]},backgroundGradient:{validateFlags:["Size","BackgroundGradient"]},selected:{value:!1,validateFlags:["Size"]},selectionBorder:{value:Ji.SELECTION_BORDER,validateFlags:["Size"]},selectionShadowBlur:{value:Ji.SELECTION_SHADOW_BLUR,validateFlags:["Size"]},selectionColor:{value:Ji.SELECTION_COLOR,validateFlags:["Size"]},selectionType:{value:Ji.SELECTION_TYPE,validateFlags:["Size"]},selectionShadowOffsetX:{value:0,validateFlags:["Size"]},selectionShadowOffsetY:{value:0,validateFlags:["Size"]},shadowBlur:{value:0,validateFlags:["Size"]},shadowColor:{validateFlags:["Size"]},shadowOffsetX:{value:0,validateFlags:["Size"]},shadowOffsetY:{value:0,validateFlags:["Size"]},renderColorBlendMode:{},renderColor:{},x:{value:0,validateFlags:["Location"]},y:{value:0,validateFlags:["Location"]},rotatable:{value:!0,validateFlags:["Rotate","Size"]},rotate:{value:0,validateFlags:["Rotate","Size"]},_hostRotate:{validateFlags:["Rotate"]},lineWidth:{value:0,validateFlags:["Data"]},alpha:{value:1}});var ps=[sr.PROPERTY_TYPE_ACCESSOR,sr.PROPERTY_TYPE_STYLE,sr.PROPERTY_TYPE_CLIENT];Pe.prototype={removeBinding:function(t){for(var e=ps.length;--e>=0;){var i=this[ps[e]];for(var n in i){var r=i[n];Array.isArray(r)?(u(r,function(e){return e.target==t},this),r.length||delete i[n]):r.target==t&&delete i[n]}}},_1q:function(t,e,i){if(!i&&!(i=this[e.propertyType||sr.PROPERTY_TYPE_ACCESSOR]))return!1;var n=i[t];n?(Array.isArray(n)||(i[t]=n=[n]),n.push(e)):i[t]=e},_2c:function(t,e,i,n,r,s){var o=this[t=t||sr.PROPERTY_TYPE_ACCESSOR];if(!o)return!1;var a={property:e,propertyType:t,bindingProperty:n,target:i,callback:r,invalidateSize:s};this._1q(e,a,o)},onBindingPropertyChange:function(t,e,i,n){var r=this[i||sr.PROPERTY_TYPE_ACCESSOR];if(!r)return!1;var s=r[e];return!!s&&(t._1c=!0,function t(e,i,n,r){if(Array.isArray(i))for(var s=i.length;--s>=0;)t(e,i[s],n,r);else{var o=i.target;if(o){if(o instanceof Es||(o=e[o]),!o)return}else o=e;if(r||(r=e.getProperty(i.property,n)),i.bindingProperty&&(o[i.bindingProperty]=r),i.callback){var a=i.callback;a instanceof Function||(a=e[a]),a instanceof Function&&a.call(e,r,o)}}}(t,s,i,n),!0)},initBindingProperties:function(t,e){for(var n=ps.length;--n>=0;){var r=ps[n],s=this[r];for(var o in s){var a=s[o];if(a.bindingProperty){var h,l=a.target;if(l){if(!(l instanceof Es||(l=t[l])))continue}else l=t;(h=!1===e?t.getProperty(a.property,r):r==sr.PROPERTY_TYPE_STYLE?t.graph.getStyle(t.$data,a.property):t.$data[a.property])!==i&&(l[a.bindingProperty]=h)}}}}};var ys={SELECTION_COLOR:"selection.color",SELECTION_BORDER:"selection.border",SELECTION_SHADOW_BLUR:"selection.shadow.blur",SELECTION_SHADOW_OFFSET_X:"selection.shadow.offset.x",SELECTION_SHADOW_OFFSET_Y:"selection.shadow.offset.y",SELECTION_TYPE:"selection.type",RENDER_COLOR:"render.color",RENDER_COLOR_BLEND_MODE:"render.color.blend.mode",ALPHA:"alpha",SHADOW_BLUR:"shadow.blur",SHADOW_COLOR:"shadow.color",SHADOW_OFFSET_X:"shadow.offset.x",SHADOW_OFFSET_Y:"shadow.offset.y",SHAPE_STROKE:"shape.stroke",SHAPE_STROKE_STYLE:"shape.stroke.style",SHAPE_LINE_FILL_COLOR:"shape.stroke.fill.color",SHAPE_LINE_DASH:"shape.line.dash",SHAPE_LINE_DASH_OFFSET:"shape.line.dash.offset",SHAPE_FILL_COLOR:"shape.fill.color",SHAPE_FILL_GRADIENT:"shape.fill.gradient",SHAPE_OUTLINE:"shape.outline",SHAPE_OUTLINE_STYLE:"shape.outline.style",LAYOUT_BY_PATH:"layout.by.path",BACKGROUND_COLOR:"background.color",BACKGROUND_GRADIENT:"background.gradient",BORDER:"border.width",BORDER_COLOR:"border.color",BORDER_LINE_DASH:"border.line.dash",BORDER_LINE_DASH_OFFSET:"border.line.dash.offset",BORDER_RADIUS:"border.radius",PADDING:"padding",LINE_CAP:"line.cap",LINE_JOIN:"line.join",LINE_DASH_CAP:"line.dash.cap",LINE_DASH_JOIN:"line.dash.join",IMAGE_BACKGROUND_COLOR:"image.background.color",IMAGE_BACKGROUND_GRADIENT:"image.background.gradient",IMAGE_BORDER:"image.border.width"};ys.IMAGE_BORDER_STYLE=ys.IMAGE_BORDER_COLOR="image.border.style",ys.IMAGE_BORDER_LINE_DASH="image.border.line.dash",ys.IMAGE_BORDER_LINE_DASH_OFFSET="image.border.line.dash.offset",ys.IMAGE_RADIUS=ys.IMAGE_BORDER_RADIUS="image.radius",ys.IMAGE_PADDING="image.padding",ys.IMAGE_Z_INDEX="image.z.index",ys.IMAGE_ADJUST="image.adjust",ys.IMAGE_ALPHA="image.alpha",ys.LABEL_ROTATE="label.rotate",ys.LABEL_POSITION="label.position",ys.LABEL_VISIBLE="label.visible",ys.LABEL_ANCHOR_POSITION="label.anchor.position",ys.LABEL_COLOR="label.color",ys.LABEL_FONT_SIZE="label.font.size",ys.LABEL_FONT_FAMILY="label.font.family",ys.LABEL_FONT_STYLE="label.font.style",ys.LABEL_PADDING="label.padding",ys.LABEL_POINTER_WIDTH="label.pointer.width",ys.LABEL_POINTER="label.pointer",ys.LABEL_RADIUS="label.radius",ys.LABEL_OFFSET_X="label.offset.x",ys.LABEL_OFFSET_Y="label.offset.y",ys.LABEL_SIZE="label.size",ys.LABEL_ALIGN_POSITION="label.align.position",ys.LABEL_BORDER="label.border",ys.LABEL_BORDER_STYLE="label.border.style",ys.LABEL_BACKGROUND_COLOR="label.background.color",ys.LABEL_BACKGROUND_GRADIENT="label.background.gradient",ys.LABEL_ROTATABLE="label.rotatable",ys.LABEL_SHADOW_BLUR="label.shadow.blur",ys.LABEL_SHADOW_COLOR="label.shadow.color",ys.LABEL_SHADOW_OFFSET_X="label.shadow.offset.x",ys.LABEL_SHADOW_OFFSET_Y="label.shadow.offset.y",ys.LABEL_Z_INDEX="label.z.index",ys.LABEL_ON_TOP="label.on.top",ys.GROUP_BACKGROUND_COLOR="group.background.color",ys.GROUP_BACKGROUND_GRADIENT="group.background.gradient",ys.GROUP_STROKE="group.stroke",ys.GROUP_STROKE_STYLE="group.stroke.color",ys.GROUP_STROKE_LINE_DASH="group.stroke.line.dash",ys.GROUP_STROKE_LINE_DASH_OFFSET="group.stroke.line.dash.offset",ys.EDGE_BUNDLE_LABEL_ROTATE="edge.bundle.label.rotate",ys.EDGE_BUNDLE_LABEL_POSITION="edge.bundle.label.position",ys.EDGE_BUNDLE_LABEL_ANCHOR_POSITION="edge.bundle.label.anchor.position",ys.EDGE_BUNDLE_LABEL_COLOR="edge.bundle.label.color",ys.EDGE_BUNDLE_LABEL_FONT_SIZE="edge.bundle.label.font.size",ys.EDGE_BUNDLE_LABEL_FONT_FAMILY="edge.bundle.label.font.family",ys.EDGE_BUNDLE_LABEL_FONT_STYLE="edge.bundle.label.font.style",ys.EDGE_BUNDLE_LABEL_PADDING="edge.bundle.label.padding",ys.EDGE_BUNDLE_LABEL_POINTER_WIDTH="edge.bundle.label.pointer.width",ys.EDGE_BUNDLE_LABEL_POINTER="edge.bundle.label.pointer",ys.EDGE_BUNDLE_LABEL_RADIUS="edge.bundle.label.radius",ys.EDGE_BUNDLE_LABEL_OFFSET_X="edge.bundle.label.offset.x",ys.EDGE_BUNDLE_LABEL_OFFSET_Y="edge.bundle.label.offset.y",ys.EDGE_BUNDLE_LABEL_BORDER="edge.bundle.label.border",ys.EDGE_BUNDLE_LABEL_BORDER_STYLE="edge.bundle.label.border.color",ys.EDGE_BUNDLE_LABEL_BACKGROUND_COLOR="edge.bundle.label.background.color",ys.EDGE_BUNDLE_LABEL_BACKGROUND_GRADIENT="edge.bundle.label.background.gradient",ys.EDGE_BUNDLE_LABEL_ROTATABLE="edge.bundle.label.rotatable",ys.EDGE_WIDTH="edge.width",ys.EDGE_COLOR="edge.color",ys.EDGE_OUTLINE="edge.outline",ys.EDGE_OUTLINE_STYLE="edge.outline.style",ys.EDGE_LINE_DASH="edge.line.dash",ys.EDGE_LINE_DASH_OFFSET="edge.line.dash.offset",ys.EDGE_FROM_OFFSET="edge.from.offset",ys.EDGE_TO_OFFSET="edge.to.offset",ys.EDGE_FILL_COLOR="edge.fill.color",ys.EDGE_BUNDLE_GAP="edge.bundle.gap",ys.EDGE_LOOPED_EXTAND="edge.looped.extand",ys.EDGE_EXTEND="edge.extend",ys.EDGE_CONTROL_POINT="edge.control.point",ys.EDGE_SPLIT_BY_PERCENT="edge.split.by.percent",ys.EDGE_SPLIT_PERCENT="edge.split.percent",ys.EDGE_SPLIT_VALUE="edge.split.value",ys.EDGE_CORNER="edge.corner",ys.EDGE_CORNER_RADIUS="edge.corner.radius",ys.EDGE_FROM_AT_EDGE="edge.from.at.edge",ys.EDGE_TO_AT_EDGE="edge.to.at.edge",ys.ARROW_FROM="arrow.from",ys.ARROW_FROM_SIZE="arrow.from.size",ys.ARROW_FROM_OFFSET="arrow.from.offset",ys.ARROW_FROM_STROKE="arrow.from.stroke",ys.ARROW_FROM_STROKE_STYLE="arrow.from.stroke.style",ys.ARROW_FROM_OUTLINE="arrow.from.outline",ys.ARROW_FROM_OUTLINE_STYLE="arrow.from.outline.style",ys.ARROW_FROM_LINE_DASH="arrow.from.line.dash",ys.ARROW_FROM_LINE_DASH_OFFSET="arrow.from.line.dash.offset",ys.ARROW_FROM_FILL_COLOR="arrow.from.fill.color",ys.ARROW_FROM_FILL_GRADIENT="arrow.from.fill.gradient",ys.ARROW_FROM_LINE_CAP="arrow.from.line.cap",ys.ARROW_FROM_LINE_JOIN="arrow.from.line.join",ys.ARROW_TO="arrow.to",ys.ARROW_TO_SIZE="arrow.to.size",ys.ARROW_TO_OFFSET="arrow.to.offset",ys.ARROW_TO_STROKE="arrow.to.stroke",ys.ARROW_TO_STROKE_STYLE="arrow.to.stroke.style",ys.ARROW_TO_OUTLINE="arrow.to.outline",ys.ARROW_TO_OUTLINE_STYLE="arrow.to.outline.style",ys.ARROW_TO_LINE_DASH="arrow.to.line.dash",ys.ARROW_TO_LINE_DASH_OFFSET="arrow.to.line.dash.offset",ys.ARROW_TO_FILL_COLOR="arrow.to.fill.color",ys.ARROW_TO_FILL_GRADIENT="arrow.to.fill.gradient",ys.ARROW_TO_LINE_CAP="arrow.to.line.cap",ys.ARROW_TO_LINE_JOIN="arrow.to.line.join";var Ts=new Pe,ms=sr.PROPERTY_TYPE_ACCESSOR,Os=sr.PROPERTY_TYPE_STYLE;Ts._2c(Os,ys.SELECTION_TYPE,null,"selectionType"),Ts._2c(Os,ys.SELECTION_BORDER,null,"selectionBorder"),Ts._2c(Os,ys.SELECTION_SHADOW_BLUR,null,"selectionShadowBlur"),Ts._2c(Os,ys.SELECTION_COLOR,null,"selectionColor"),Ts._2c(Os,ys.SELECTION_SHADOW_OFFSET_X,null,"selectionShadowOffsetX"),Ts._2c(Os,ys.SELECTION_SHADOW_OFFSET_Y,null,"selectionShadowOffsetY"),Ts._2c(ms,"name","label","data"),Ts._2c(Os,ys.LABEL_VISIBLE,"label","visible"),Ts._2c(Os,ys.LABEL_POSITION,"label","position"),Ts._2c(Os,ys.LABEL_ANCHOR_POSITION,"label","anchorPosition"),Ts._2c(Os,ys.LABEL_COLOR,"label","color"),Ts._2c(Os,ys.LABEL_FONT_SIZE,"label","fontSize"),Ts._2c(Os,ys.LABEL_BORDER,"label","border"),Ts._2c(Os,ys.LABEL_BORDER_STYLE,"label","borderColor"),Ts._2c(Os,ys.LABEL_BACKGROUND_COLOR,"label","backgroundColor"),Ts._2c(Os,ys.LABEL_ON_TOP,"label","showOnTop"),Ts._2c(Os,ys.SHADOW_BLUR,null,"shadowBlur"),Ts._2c(Os,ys.SHADOW_COLOR,null,"shadowColor"),Ts._2c(Os,ys.SHADOW_OFFSET_X,null,"shadowOffsetX"),Ts._2c(Os,ys.SHADOW_OFFSET_Y,null,"shadowOffsetY"),Ts._2c(Os,ys.LABEL_FONT_FAMILY,"label","fontFamily"),Ts._2c(Os,ys.LABEL_FONT_STYLE,"label","fontStyle"),Ts._2c(Os,ys.LABEL_ALIGN_POSITION,"label","alignPosition"),Ts._2c(Os,ys.LABEL_ROTATE,"label","rotate"),Ts._2c(Os,ys.LABEL_PADDING,"label","padding"),Ts._2c(Os,ys.LABEL_POINTER_WIDTH,"label","pointerWidth"),Ts._2c(Os,ys.LABEL_POINTER,"label","showPointer"),Ts._2c(Os,ys.LABEL_RADIUS,"label","borderRadius"),Ts._2c(Os,ys.LABEL_OFFSET_X,"label","offsetX"),Ts._2c(Os,ys.LABEL_OFFSET_Y,"label","offsetY"),Ts._2c(Os,ys.LABEL_ROTATABLE,"label","rotatable"),Ts._2c(Os,ys.LABEL_BACKGROUND_GRADIENT,"label","backgroundGradient"),Ts._2c(Os,ys.LABEL_SIZE,"label","size"),Ts._2c(Os,ys.LABEL_SHADOW_BLUR,"label","shadowBlur"),Ts._2c(Os,ys.LABEL_SHADOW_COLOR,"label","shadowColor"),Ts._2c(Os,ys.LABEL_SHADOW_OFFSET_X,"label","shadowOffsetX"),Ts._2c(Os,ys.LABEL_SHADOW_OFFSET_Y,"label","shadowOffsetY"),Ts._2c(Os,ys.LABEL_Z_INDEX,"label","zIndex"),Ts._2c(Os,ys.RENDER_COLOR,null,"renderColor"),Ts._2c(Os,ys.RENDER_COLOR_BLEND_MODE,null,"renderColorBlendMode"),Ts._2c(Os,ys.ALPHA,null,"alpha");var ws=new Pe;ws._2c(ms,"location"),ws._2c(ms,"anchorPosition",null,"_2j"),ws._2c(ms,"rotate",null,"rotate"),ws._2c(Os,ys.BACKGROUND_COLOR,null,"backgroundColor"),ws._2c(Os,ys.BACKGROUND_GRADIENT,null,"backgroundGradient"),ws._2c(Os,ys.PADDING,null,"padding"),ws._2c(Os,ys.BORDER,null,"border"),ws._2c(Os,ys.BORDER_RADIUS,null,"borderRadius"),ws._2c(Os,ys.BORDER_COLOR,null,"borderColor"),ws._2c(Os,ys.BORDER_LINE_DASH,null,"borderLineDash"),ws._2c(Os,ys.BORDER_LINE_DASH_OFFSET,null,"borderLineDashOffset"),ws._2c(ms,"image","image","data","_lcd"),ws._2c(ms,"size","image","size"),ws._2c(Os,ys.SHAPE_STROKE,"image","lineWidth"),ws._2c(Os,ys.SHAPE_STROKE_STYLE,"image","strokeStyle"),ws._2c(Os,ys.SHAPE_FILL_COLOR,"image","fillColor"),ws._2c(Os,ys.LAYOUT_BY_PATH,"image","layoutByPath"),ws._2c(Os,ys.IMAGE_ADJUST,"image","adjustType"),ws._2c(Os,ys.SHAPE_OUTLINE,"image","outline"),ws._2c(Os,ys.SHAPE_OUTLINE_STYLE,"image","outlineStyle"),ws._2c(Os,ys.SHAPE_FILL_GRADIENT,"image","fillGradient"),ws._2c(Os,ys.SHAPE_LINE_DASH,"image","lineDash"),ws._2c(Os,ys.SHAPE_LINE_DASH_OFFSET,"image","lineDashOffset"),ws._2c(Os,ys.LINE_CAP,"image","lineCap"),ws._2c(Os,ys.LINE_JOIN,"image","lineJoin"),ws._2c(Os,ys.IMAGE_BACKGROUND_COLOR,"image","backgroundColor"),ws._2c(Os,ys.IMAGE_BACKGROUND_GRADIENT,"image","backgroundGradient"),ws._2c(Os,ys.IMAGE_PADDING,"image","padding"),ws._2c(Os,ys.IMAGE_BORDER,"image","border"),ws._2c(Os,ys.IMAGE_BORDER_RADIUS,"image","borderRadius"),ws._2c(Os,ys.IMAGE_BORDER_COLOR,"image","borderColor"),ws._2c(Os,ys.IMAGE_BORDER_LINE_DASH,"image","borderLineDash"),ws._2c(Os,ys.IMAGE_BORDER_LINE_DASH_OFFSET,"image","borderLineDashOffset"),ws._2c(Os,ys.IMAGE_Z_INDEX,"image","zIndex"),ws._2c(Os,ys.IMAGE_ALPHA,"image","alpha"),ws._2c(ms,"expanded",null,null,"checkBody"),ws._2c(ms,"enableSubNetwork",null,null,"checkBody");var bs=new Pe;bs._2c(ms,"groupType",null,null,"_4y"),bs._2c(ms,"groupImage",null,null,"_4y"),bs._2c(ms,"minSize",null,null,"_4y"),bs._2c(ms,"padding",null,null,"_4y"),bs._2c(Os,ys.GROUP_BACKGROUND_COLOR,"shape","fillColor"),bs._2c(Os,ys.GROUP_BACKGROUND_GRADIENT,"shape","fillGradient"),bs._2c(Os,ys.GROUP_STROKE,"shape","lineWidth"),bs._2c(Os,ys.GROUP_STROKE_STYLE,"shape","strokeStyle"),bs._2c(Os,ys.GROUP_STROKE_LINE_DASH,"shape","lineDash"),bs._2c(Os,ys.GROUP_STROKE_LINE_DASH_OFFSET,"shape","lineDashOffset");var Ls=new Pe;Ls._2c(ms,"from","shape",null,"_3n"),Ls._2c(ms,"to","shape",null,"_3n"),Ls._2c(ms,"edgeType","shape",null,"_3n"),Ls._2c(Os,ys.EDGE_EXTEND,"shape",null,"_3n"),Ls._2c(Os,ys.EDGE_WIDTH,"shape","lineWidth"),Ls._2c(Os,ys.EDGE_COLOR,"shape","strokeStyle"),Ls._2c(Os,ys.ARROW_FROM,"shape","fromArrow"),Ls._2c(Os,ys.ARROW_TO,"shape","toArrow"),Ls._2c(Os,ys.LINE_DASH_CAP,"shape","lineDashCap"),Ls._2c(Os,ys.LINE_DASH_JOIN,"shape","lineDashJoin"),Ls._2c(Os,ys.EDGE_FILL_COLOR,"shape","lineFillColor"),Ls._2c(Os,ys.EDGE_FROM_AT_EDGE,null,"fromAtEdge","_3n"),Ls._2c(Os,ys.EDGE_TO_AT_EDGE,null,"toAtEdge","_3n"),Ls._2c(Os,ys.EDGE_OUTLINE,"shape","outline"),Ls._2c(Os,ys.EDGE_OUTLINE_STYLE,"shape","outlineStyle"),Ls._2c(Os,ys.EDGE_LINE_DASH,"shape","lineDash"),Ls._2c(Os,ys.EDGE_LINE_DASH_OFFSET,"shape","lineDashOffset"),Ls._2c(Os,ys.EDGE_CONTROL_POINT,"shape",null,"_3n"),Ls._2c(Os,ys.EDGE_FROM_OFFSET,"shape",null,"_3n"),Ls._2c(Os,ys.EDGE_TO_OFFSET,"shape",null,"_3n"),Ls._2c(Os,ys.LINE_CAP,"shape","lineCap"),Ls._2c(Os,ys.LINE_JOIN,"shape","lineJoin"),Ls._2c(ms,"path.segment",null,null,"_3n",!0),Ls._2c(ms,"angle",null,null,"_3n",!0),Ls._2c(Os,ys.ARROW_FROM_SIZE,"shape","fromArrowSize"),Ls._2c(Os,ys.ARROW_FROM_OFFSET,"shape","fromArrowOffset"),Ls._2c(Os,ys.ARROW_FROM_STROKE,"shape","fromArrowStroke"),Ls._2c(Os,ys.ARROW_FROM_STROKE_STYLE,"shape","fromArrowStrokeStyle"),Ls._2c(Os,ys.ARROW_FROM_OUTLINE,"shape","fromArrowOutline"),Ls._2c(Os,ys.ARROW_FROM_OUTLINE_STYLE,"shape","fromArrowOutlineStyle"),Ls._2c(Os,ys.ARROW_FROM_FILL_COLOR,"shape","fromArrowFillColor"),Ls._2c(Os,ys.ARROW_FROM_FILL_GRADIENT,"shape","fromArrowFillGradient"),Ls._2c(Os,ys.ARROW_FROM_LINE_DASH,"shape","fromArrowLineDash"),Ls._2c(Os,ys.ARROW_FROM_LINE_DASH_OFFSET,"shape","fromArrowLineDashOffset"),Ls._2c(Os,ys.ARROW_FROM_LINE_JOIN,"shape","fromArrowLineJoin"),Ls._2c(Os,ys.ARROW_FROM_LINE_CAP,"shape","fromArrowLineCap"),Ls._2c(Os,ys.ARROW_TO_SIZE,"shape","toArrowSize"),Ls._2c(Os,ys.ARROW_TO_OFFSET,"shape","toArrowOffset"),Ls._2c(Os,ys.ARROW_TO_STROKE,"shape","toArrowStroke"),Ls._2c(Os,ys.ARROW_TO_STROKE_STYLE,"shape","toArrowStrokeStyle"),Ls._2c(Os,ys.ARROW_TO_OUTLINE,"shape","toArrowOutline"),Ls._2c(Os,ys.ARROW_TO_OUTLINE_STYLE,"shape","toArrowOutlineStyle"),Ls._2c(Os,ys.ARROW_TO_FILL_COLOR,"shape","toArrowFillColor"),Ls._2c(Os,ys.ARROW_TO_FILL_GRADIENT,"shape","toArrowFillGradient"),Ls._2c(Os,ys.ARROW_TO_LINE_DASH,"shape","toArrowLineDash"),Ls._2c(Os,ys.ARROW_TO_LINE_DASH_OFFSET,"shape","toArrowLineDashOffset"),Ls._2c(Os,ys.ARROW_TO_LINE_JOIN,"shape","toArrowLineJoin"),Ls._2c(Os,ys.ARROW_TO_LINE_CAP,"shape","toArrowLineCap");var As=new Pe;As._2c(Os,ys.EDGE_BUNDLE_LABEL_COLOR,"bundleLabel","color"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_POSITION,"bundleLabel","position"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_ANCHOR_POSITION,"bundleLabel","anchorPosition"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_FONT_SIZE,"bundleLabel","fontSize"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_ROTATABLE,"bundleLabel","rotatable"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_ROTATE,"bundleLabel","rotate"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_FONT_FAMILY,"bundleLabel","fontFamily"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_FONT_STYLE,"bundleLabel","fontStyle"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_PADDING,"bundleLabel","padding"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_POINTER_WIDTH,"bundleLabel","pointerWidth"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_POINTER,"bundleLabel","showPointer"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_RADIUS,"bundleLabel","borderRadius"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_OFFSET_X,"bundleLabel","offsetX"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_OFFSET_Y,"bundleLabel","offsetY"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_BORDER,"bundleLabel","border"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_BORDER_STYLE,"bundleLabel","borderColor"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_BACKGROUND_COLOR,"bundleLabel","backgroundColor"),As._2c(Os,ys.EDGE_BUNDLE_LABEL_BACKGROUND_GRADIENT,"bundleLabel","backgroundGradient");var Ss=new Pe;Ss._2c(ms,"location"),Ss._2c(Os,ys.BACKGROUND_COLOR,null,"backgroundColor"),Ss._2c(Os,ys.BACKGROUND_GRADIENT,null,"backgroundGradient"),Ss._2c(Os,ys.PADDING,null,"padding"),Ss._2c(Os,ys.BORDER,null,"border"),Ss._2c(Os,ys.BORDER_RADIUS,null,"borderRadius"),Ss._2c(Os,ys.BORDER_COLOR,null,"borderColor"),Ss._2c(Os,ys.BORDER_LINE_DASH,null,"borderLineDash"),Ss._2c(Os,ys.BORDER_LINE_DASH_OFFSET,null,"borderLineDashOffset"),Ss._2c(ms,"rotate",null,"rotate"),Ss._2c(ms,"path.segment",null,null,"invalidateShape"),Ss._2c(ms,"path","image","data"),Ss._2c(ms,"size","image","size"),Ss._2c(Os,ys.SHAPE_STROKE,"image","lineWidth"),Ss._2c(Os,ys.SHAPE_STROKE_STYLE,"image","strokeStyle"),Ss._2c(Os,ys.SHAPE_FILL_COLOR,"image","fillColor"),Ss._2c(Os,ys.SHAPE_FILL_GRADIENT,"image","fillGradient"),Ss._2c(Os,ys.LINE_DASH_CAP,"image","lineDashCap"),Ss._2c(Os,ys.LINE_DASH_JOIN,"image","lineDashJoin"),Ss._2c(Os,ys.SHAPE_LINE_FILL_COLOR,"image","lineFillColor"),Ss._2c(Os,ys.SHAPE_OUTLINE,"image","outline"),Ss._2c(Os,ys.SHAPE_OUTLINE_STYLE,"image","outlineStyle"),Ss._2c(Os,ys.SHAPE_LINE_DASH,"image","lineDash"),Ss._2c(Os,ys.SHAPE_LINE_DASH_OFFSET,"image","lineDashOffset"),Ss._2c(Os,ys.LINE_CAP,"image","lineCap"),Ss._2c(Os,ys.LINE_JOIN,"image","lineJoin"),Ss._2c(Os,ys.LAYOUT_BY_PATH,"image","layoutByPath"),Ss._2c(Os,ys.IMAGE_BACKGROUND_COLOR,"image","backgroundColor"),Ss._2c(Os,ys.IMAGE_BACKGROUND_GRADIENT,"image","backgroundGradient"),Ss._2c(Os,ys.IMAGE_PADDING,"image","padding"),Ss._2c(Os,ys.IMAGE_BORDER,"image","border"),Ss._2c(Os,ys.IMAGE_BORDER_RADIUS,"image","borderRadius"),Ss._2c(Os,ys.IMAGE_BORDER_COLOR,"image","borderColor"),Ss._2c(Os,ys.IMAGE_BORDER_LINE_DASH,"image","borderLineDash"),Ss._2c(Os,ys.IMAGE_BORDER_LINE_DASH_OFFSET,"image","borderLineDashOffset"),Ss._2c(Os,ys.ARROW_FROM,"image","fromArrow"),Ss._2c(Os,ys.ARROW_FROM_SIZE,"image","fromArrowSize"),Ss._2c(Os,ys.ARROW_FROM_OFFSET,"image","fromArrowOffset"),Ss._2c(Os,ys.ARROW_FROM_STROKE,"image","fromArrowStroke"),Ss._2c(Os,ys.ARROW_FROM_STROKE_STYLE,"image","fromArrowStrokeStyle"),Ss._2c(Os,ys.ARROW_FROM_FILL_COLOR,"image","fromArrowFillColor"),Ss._2c(Os,ys.ARROW_FROM_FILL_GRADIENT,"image","fromArrowFillGradient"),Ss._2c(Os,ys.ARROW_FROM_LINE_DASH,"image","fromArrowLineDash"),Ss._2c(Os,ys.ARROW_FROM_LINE_DASH_OFFSET,"image","fromArrowLineDashOffset"),Ss._2c(Os,ys.ARROW_FROM_LINE_JOIN,"image","fromArrowLineJoin"),Ss._2c(Os,ys.ARROW_FROM_LINE_CAP,"image","fromArrowLineCap"),Ss._2c(Os,ys.ARROW_TO_SIZE,"image","toArrowSize"),Ss._2c(Os,ys.ARROW_TO_OFFSET,"image","toArrowOffset"),Ss._2c(Os,ys.ARROW_TO,"image","toArrow"),Ss._2c(Os,ys.ARROW_TO_STROKE,"image","toArrowStroke"),Ss._2c(Os,ys.ARROW_TO_STROKE_STYLE,"image","toArrowStrokeStyle"),Ss._2c(Os,ys.ARROW_TO_FILL_COLOR,"image","toArrowFillColor"),Ss._2c(Os,ys.ARROW_TO_FILL_GRADIENT,"image","toArrowFillGradient"),Ss._2c(Os,ys.ARROW_TO_LINE_DASH,"image","toArrowLineDash"),Ss._2c(Os,ys.ARROW_TO_LINE_DASH_OFFSET,"image","toArrowLineDashOffset"),Ss._2c(Os,ys.ARROW_TO_LINE_JOIN,"image","toArrowLineJoin"),Ss._2c(Os,ys.ARROW_TO_LINE_CAP,"image","toArrowLineCap");var Is=function(t,e){return(t=t.zIndex)==(e=e.zIndex)?0:(t=t||0)>(e=e||0)?1:e>t?-1:void 0},xs=function(t,e){this.uiBounds=new on,y(this,xs,arguments),this.id=this.$data.id,this.graph=e,this._er=[],this._lc8=new Pe};xs.prototype={syncSelection:!1,graph:null,layoutByAnchorPoint:!1,_lc8:null,_er:null,addChild:function(t,e){t._in=this,e!==i?f(this._er,t,e):this._er.push(t),t._d1&&this._lg8(t),this.invalidateChildrenIndex(),this.invalidateSize(),this.$invalidateChild=!0},removeChild:function(t){this._lc8.removeBinding(t),t._in=null,g(this._er,t),this._ie&&this._ie.remove(t),this.invalidateSize(),this.$invalidateChild=!0},getProperty:function(t,e){return e==sr.PROPERTY_TYPE_STYLE?this.graph.getStyle(this.$data,t):e==sr.PROPERTY_TYPE_CLIENT?this.$data.get(t):this.$data[t]},getStyle:function(t){return this.graph.getStyle(this.$data,t)},_$u:function(t,e,i){var n=this._lc8.onBindingPropertyChange(this,t,e,i);return Ts.onBindingPropertyChange(this,t,e,i)||n},onPropertyChange:function(t){if("zIndex"==t.kind)return this.invalidateRender(),!0;if("ui"==t.type){if("invalidate"==t.kind)return this.invalidate(),!0;var e=t.value;return!(!e||!e.ui)&&("add"==t.kind?this._8y(e):"remove"==t.kind&&this.removeChild(e.ui),!0)}return this._$u(t.kind,t.propertyType||ms,t.value)},label:null,initLabel:function(){var t=new Rs;t.name="label",this.addChild(t),this.label=t},initialize:function(){this.initLabel(),this.$data._lek&&this.$data._lek.forEach(this._8y,this),Ts.initBindingProperties(this),this._lc8.initBindingProperties(this,!1)},addBinding:function(t,e){return!!e.property&&(e.target=t,void this._lc8._1q(e.property,e))},_fm:function(t,e){var i=this.$data;if(!i._lek)return!1;var n=i._lek.getById(t.id);if(!n||!n.bindingProperties)return!1;var r=n.bindingProperties;if(D(r)){var s=!1;return _(r,function(t){return"data"==t.bindingProperty?(s=Ne(i,e,t.property,t.propertyType),!1):void 0},this),s}return"data"==r.bindingProperty&&Ne(i,e,r.property,r.propertyType)},_8y:function(t){var e=t.ui;if(e){var i=t.bindingProperties;i&&(Array.isArray(i)?i.forEach(function(t){this.addBinding(e,t)},this):this.addBinding(e,i)),this.addChild(e)}},validate:function(){return this._lg0||(this.initialize(),this._lg0=!0),this.doValidate()},_$b:!0,invalidateChildrenIndex:function(){this._$b=!0},doValidate:function(){if(this._1c&&(this._1c=!1,this.validateChildren()&&(this.measure(),this.$invalidateSize=!0),this._$b&&(this._$b=!1,Hi?this._er=l(this._er,Is):this._er.sort(Is))),Jt.call(this)&&(this.$invalidateRotate=!0),this.$invalidateRotate){Hr.call(this),this.uiBounds.setByRect(this._f3);var t=this.$selectionBorder||0,e=Math.max(this.$selectionBorder||0,this.$shadowOffsetX||0,this.$selectionShadowOffsetX||0),i=Math.max(this.$shadowOffsetY||0,this.$selectionShadowOffsetY||0),n=Math.max(2*t,this.$shadowBlur,this.$selectionShadowBlur),r=(n+=Ji.UI_BOUNDS_GROW||0)-e,s=n+e,o=n-i,a=n+i;return 0>r&&(r=0),0>s&&(s=0),0>o&&(o=0),0>a&&(a=0),this.uiBounds.grow(o,r,a,s),this.onBoundsChanged&&this.onBoundsChanged(),this.$invalidateBounds=!0,!0}},validateChildren:function(){var t=this.$invalidateChild;this.$invalidateChild=!1;var e=this._leody,i=this.bodyChanged;e&&(e.$renderColor=this.$renderColor,e.$renderColorBlendMode=this.$renderColorBlendMode,e.$shadowColor=this.$shadowColor,e.$shadowBlur=this.$shadowBlur,e.$shadowOffsetX=this.$shadowOffsetX,e.$shadowOffsetY=this.$shadowOffsetY),this.bodyChanged=!1,e&&e._1c&&(i=e.validate()||i,e.$x=0,e.$y=0,e.$invalidateRotate&&Hr.call(e),t=!0);for(var n=0,r=this._er.length;r>n;n++){var s=this._er[n];if(s!=e){var o=s._1c&&s.validate();(o||i)&&s._h0&&ee(s,e),!t&&o&&(t=!0)}}return t},measure:function(){this._ij.clear();for(var t,e,i=0,n=this._er.length;n>i;i++)(t=this._er[i])._h0&&((e=t._f3).width<=0||e.height<=0||this._ij.addRect(t.$x+e.x,t.$y+e.y,e.width,e.height))},_ie:null,_lg8:function(t){if(!this._ie){if(!t.showOnTop)return;return this._ie=new Qi,this._ie.add(t)}return t.showOnTop?this._ie.add(t):this._ie.remove(t)},draw:function(t,e,i){for(var n,r=0,s=this._er.length;s>r;r++)(n=this._er[r])._h0&&!n.showOnTop&&n._ix(t,e,i,this)},_8j:function(t,e){if(!this._h0||!this._ie||!this._ie.length)return!1;t.save(),t.translate(this.$x,this.$y),this.$rotatable&&this.$_hostRotate&&t.rotate(this.$_hostRotate),(this.offsetX||this.offsetY)&&t.translate(this.offsetX,this.offsetY),this.$rotate&&t.rotate(this.$rotate),this.$layoutByAnchorPoint&&this._9y&&t.translate(-this._9y.x,-this._9y.y),this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur*e,t.shadowOffsetX=this.shadowOffsetX*e,t.shadowOffsetY=this.shadowOffsetY*e),t.beginPath();for(var i,n=0,r=this._er.length;r>n;n++)(i=this._er[n])._h0&&i.showOnTop&&i._ix(t,e,this.selected,this);t.restore()},doHitTest:function(t,e,i){if(i){if(!this._ij.intersectsRect(t-i,e-i,2*i,2*i))return!1}else if(!this._ij.intersectsPoint(t,e))return!1;return this.hitTestChildren(t,e,i)},hitTestChildren:function(t,e,i){for(var n,r=this._er.length-1;r>=0;r--)if((n=this._er[r])._h0&&n.hitTest(t,e,i))return n;return!1},destroy:function(){this._h8ed=!0;for(var t=this._er.length-1;t>=0;t--)this._er[t].destroy()}},p(xs,Es),j(xs.prototype,{renderColorBlendMode:{get:function(){return this.$renderColorBlendMode},set:function(t){this.$renderColorBlendMode=t,this._1c=!0,this.body&&(this.body.renderColorBlendMode=this.$renderColorBlendMode)}},renderColor:{get:function(){return this.$renderColor},set:function(t){this.$renderColor=t,this._1c=!0,this.body&&(this.body.renderColor=this.$renderColor)}},bodyBounds:{get:function(){if(this.$invalidateBounds){this.$invalidateBounds=!1;var t,e=this.body;t=e&&e._h0&&!this._$o()?e._f3.clone():this._f3.clone(),this.rotate&&ut(t,this.rotate,t),t.x+=this.$x,t.y+=this.$y,this._lez=t}return this._lez}},bounds:{get:function(){return new on((this.$x||0)+this.uiBounds.x,(this.$y||0)+this.uiBounds.y,this.uiBounds.width,this.uiBounds.height)}},body:{get:function(){return this._leody},set:function(t){t&&this._leody!=t&&(this._leody=t,this.bodyChanged=!0,this.invalidateSize())}}}),Ji.UI_BOUNDS_GROW=1;var Cs=function(){y(this,Cs,arguments)};Cs.prototype={strokeStyle:"#000",lineWidth:0,fillColor:null,fillGradient:null,_ia:1,_ic:1,outline:0,onDataChanged:function(t){T(this,Cs,"onDataChanged",arguments),this._jl&&this._7j&&this._jl._6e(this._7j,this),t&&this._lcd(t)},_lcd:function(t){this._jl=Ft(t),this._jl.validate(),(this._jl._k6==pr||this._jl._6t())&&(this._7j||(this._7j=function(){this.invalidateData(),this._in&&this._in.graph&&(this._in.invalidateSize(),this._in.graph.invalidate())}),this._jl._lgk(this._7j,this))},_jl:null,initialize:function(){this._lcd(this.$data)},_4n:function(){return this._jl&&this._jl.draw},_8l:function(t){if(!t||t.width<=0||t.height<=0||!this.$size||!(this.size instanceof Object))return this._ia=1,void(this._ic=1);var e=this.size.width,n=this.size.height;if((e===i||null===e)&&(e=-1),(n===i||null===n)&&(n=-1),0>e&&0>n)return this._ia=1,void(this._ic=1);var r,s,o=t.width,a=t.height;e>=0&&(r=e/o),n>=0&&(s=n/a),0>e?r=s:0>n&&(s=r),this._ia=r,this._ic=s},validateSize:function(){if(this.$invalidateScale){this.$invalidateScale=!1;var t=this._originalBounds;this._ia,this._ic,this._8l(t),this.setMeasuredBounds(t.width*this._ia,t.height*this._ic,t.x*this._ia,t.y*this._ic)}},measure:function(){var t=this._jl.getBounds(this.lineWidth+this.outline);return t?(this.$invalidateScale=!0,void(this._originalBounds=t.clone())):void this._ij.set(0,0,0,0)},onBoundsChanged:function(){this.$invalidateFillGradient=!0},_1h:function(){this.$invalidateFillGradient=!1,this._fillGradient=this.fillGradient?Or.prototype.generatorGradient.call(this.$fillGradient,this._7d):null},_j8:function(t){var e,i;if("flip"==this.$adjustType)e=1,i=-1;else{if("mirror"!=this.$adjustType)return;e=-1,i=1}var n=this._ij.cx,r=this._ij.cy;t.translate(n,r),t.scale(e,i),t.translate(-n,-r)},draw:function(t,e,i,n){if(this._ia&&this._ic){if(this.$invalidateFillGradient&&this._1h(),t.save(),this.$adjustType&&this._j8(t),this._jl._k6==Tr)return t.scale(this._ia,this._ic),this._jl._k7.draw(t,e,this,i,n||this),void t.restore();i&&this._7l(t,e,n),this._jl.draw(t,e,this,this._ia,this._ic),t.restore()}},doHitTest:function(t,e,i){if(this._jl.hitTest){if("flip"==this.$adjustType)e=2*this._ij.cy-e;else if("mirror"==this.$adjustType){t=2*this._ij.cx-t}t/=this._ia,e/=this._ic;var n=(this._ia+this._ic)/2;return n>1&&(i/=n,i|=0),this._jl._k7 instanceof Fr?this._jl._k7.hitTest(t,e,i,!0,this.$lineWidth,this.$fillColor||this.$fillGradient):this._jl.hitTest(t,e,i)}return!0},$invalidateScale:!0,$invalidateFillGradient:!0},p(Cs,Es),De(Cs.prototype,{adjustType:{},fillColor:{},size:{validateFlags:["Size","Scale"]},fillGradient:{validateFlags:["FillGradient"]}}),j(Cs.prototype,{originalBounds:{get:function(){return this._originalBounds}}}),Ji.ALIGN_POSITION=hn.CENTER_MIDDLE;var Rs=function(){y(this,Rs,arguments),this.color=Ji.LABEL_COLOR};Rs.prototype={color:Ji.LABEL_COLOR,showPointer:!0,fontSize:null,fontFamily:null,fontStyle:null,_fh:null,alignPosition:null,measure:function(){this.font;var t=function t(e,i,n,r,s,o){if(!e)return{width:0,height:0};if(i||(i=Ji.FONT_SIZE),hr&&lr>i){var a=i/lr,h=t(e,lr,n,r,s);return h.width*=a,h.height*=a,h}var l=gt();l.font=o||vt(n,i,r),s||(s=Ji.LINE_HEIGHT);for(var _=i*s,u=0,c=0,d=e.split("\n"),f=0,g=d.length;g>f;f++){var v=d[f];u=Math.max(l.measureText(v).width,u),c+=_}return{width:u,height:c}}(this.$data,this.$fontSize,this.$fontFamily,this.$fontStyle,Ji.LINE_HEIGHT,this.$font);if(this._fh=t,this.$size){var e=this.$size.width||0,i=this.$size.height||0;return this.setMeasuredBounds(e>t.width?e:t.width,i>t.height?i:t.height)}return this.setMeasuredBounds(t.width,t.height)},doHitTest:function(t,e,i){return!!this.$data&&Wt(t,e,i,this)},draw:function(t,e,i,n){if(i&&this._7l(t,e,n),this.$fontSize||Ji.FONT_SIZE,this.$rotatable&&this.$_hostRotate){var r=Nt(this.$_hostRotate);r>tn&&3*tn>r&&(t.translate(this._ij.width/2,this._ij.height/2),t.rotate(Math.PI),t.translate(-this._ij.width/2,-this._ij.height/2))}var s=this.alignPosition||Ji.ALIGN_POSITION,o=s.horizontalPosition,a=s.verticalPosition,h=0;o==_n?(o="center",h+=this._ij.width/2):o==un?(o="right",h+=this._ij.width):o="left";var l=0;a==dn?l=(this._ij.height-this._fh.height)/2:a==fn&&(l=this._ij.height-this._fh.height),t.fillStyle=this.color,function(t,e,i,n,r,s,o,a,h,l){if(t.save(),t.translate(i,n),hr&&lr>o){var _=o/lr;t.scale(_,_),o=lr,l=null}h||(h=Ji.LINE_HEIGHT),o||(o=Ji.FONT_SIZE),h*=o,t.font=l||vt(s,o,a),t.textAlign=r,t.textBaseline="middle";for(var u=h/2,c=e.split("\n"),d=0,f=c.length;f>d;d++){var g=c[d];t.fillText(g,0,u),u+=h}t.restore()}(t,this.$data,h,l,o,this.$fontFamily,this.$fontSize,this.$fontStyle,Ji.LINE_HEIGHT,this.$font)},_4n:function(){return null!=this.$data||this.$size},$invalidateFont:!0},p(Rs,Es),De(Rs.prototype,{size:{validateFlags:["Data"]},fontStyle:{validateFlags:["Data","Font"]},fontSize:{validateFlags:["Data","Font"]},fontFamily:{validateFlags:["Data","Font"]}}),j(Rs.prototype,{font:{get:function(){return this.$invalidateFont&&(this.$invalidateFont=!1,this.$font=(this.$fontStyle||Ji.FONT_STYLE)+" "+(this.$fontSize||Ji.FONT_SIZE)+"px "+(this.$fontFamily||Ji.FONT_FAMILY)),this.$font}}});var Ds=function(t){t=t||new Fr,this.pathBounds=new on,y(this,Ds,[t])};Ds.prototype={layoutByPath:!0,layoutByAnchorPoint:!1,measure:function(){this.$invalidateFromArrow=!0,this.$invalidateToArrow=!0,this.$data.getBounds(this.$lineWidth+this.$outline,this.pathBounds),this.setMeasuredBounds(this.pathBounds)},validateSize:function(){if(this.$invalidateFromArrow||this.$invalidateToArrow){var t,e=this.pathBounds.clone();if(this.$invalidateFromArrow)this.$invalidateFromArrow=!1,(t=this.validateFromArrow())&&e.add(t);if(this.$invalidateToArrow)this.$invalidateToArrow=!1,(t=this.validateToArrow())&&e.add(t);this.setMeasuredBounds(e)}},validateFromArrow:function(){if(this.$data._i8&&this.$fromArrow){var t=this.$data,e=0,i=0,n=this.$fromArrowOffset;n&&(isNaN(n)&&(n.x||n.y)?(e+=n.x||0,i+=n.y||0):e+=n||0,e>0&&1>e&&(e*=t._i8)),this.fromArrowLocation=t.getLocation(e,i),this.fromArrowLocation.rotate=Math.PI+this.fromArrowLocation.rotate||0,this.$fromArrowShape=Ye(this.$fromArrow,this.$fromArrowSize);var r=this.$fromArrowShape.getBounds(this.fromArrowStyles.lineWidth+this.fromArrowStyles.outline);return this.fromArrowFillGradient instanceof rr.Gradient?this.fromArrowStyles._fillGradient=Or.prototype.generatorGradient.call(this.fromArrowFillGradient,r):this.fromArrowStyles&&(this.fromArrowStyles._fillGradient=null),r.offset(this.fromArrowLocation.x,this.fromArrowLocation.y),ct(r,this.fromArrowLocation.rotate,r,this.fromArrowLocation.x,this.fromArrowLocation.y),r}this.$fromArrowShape=null},validateToArrow:function(){if(this.$data._i8&&this.$toArrow){var t=this.$data,e=0,i=0,n=this.$toArrowOffset;n&&(isNaN(n)&&(n.x||n.y)?(e+=n.x||0,i+=n.y||0):e+=n||0),0>e&&e>-1&&(e*=t._i8),e+=t._i8,this.toArrowLocation=t.getLocation(e,i),this.$toArrowShape=Ye(this.$toArrow,this.$toArrowSize);var r=this.$toArrowShape.getBounds(this.toArrowStyles.lineWidth+this.toArrowStyles.outline);return this.toArrowFillGradient instanceof rr.Gradient?this.toArrowStyles._fillGradient=Or.prototype.generatorGradient.call(this.toArrowFillGradient,r):this.toArrowStyles&&(this.toArrowStyles._fillGradient=null),r.offset(this.toArrowLocation.x,this.toArrowLocation.y),ct(r,this.toArrowLocation.rotate,r,this.toArrowLocation.x,this.toArrowLocation.y),r}this.$toArrowShape=null},_23:function(t){var e=t?"from":"to",n=this[e+"ArrowStroke"];n===i&&(n=this.$lineWidth);var r=this[e+"ArrowStrokeStyle"];r===i&&(r=this.strokeStyle);var s=this[e+"ArrowStyles"];s||(this[e+"ArrowStyles"]=s={}),s.lineWidth=n,s.strokeStyle=r,s.lineDash=this[e+"ArrowLineDash"],s.lineDashOffset=this[e+"ArrowLineDashOffset"],s.fillColor=this[e+"ArrowFillColor"],s.fillGradient=this[e+"ArrowFillGradient"],s.lineCap=this[e+"ArrowLineCap"],s.lineJoin=this[e+"ArrowLineJoin"],s.outline=this[e+"ArrowOutline"]||0,s.outlineStyle=this[e+"ArrowOutlineStyle"]},doValidate:function(){return this.$fromArrow&&this._23(!0),this.$toArrow&&this._23(!1),T(this,Ds,"doValidate")},drawArrow:function(t,e,i,n){if(this.$fromArrow&&this.$fromArrowShape){t.save();var r=(a=this.fromArrowLocation).x,s=a.y,o=a.rotate;t.translate(r,s),o&&t.rotate(o),this.$fromArrowShape.draw(t,e,this.fromArrowStyles,i,n),t.restore()}if(this.$toArrow&&this.$toArrowShape){t.save();var a;r=(a=this.toArrowLocation).x,s=a.y,o=a.rotate;t.translate(r,s),o&&t.rotate(o),this.$toArrowShape.draw(t,e,this.toArrowStyles,i,n),t.restore()}},outlineStyle:null,outline:0,onBoundsChanged:function(){this.$invalidateFillGradient=!0},_1h:function(){this.$invalidateFillGradient=!1,this._fillGradient=this.$fillGradient?Or.prototype.generatorGradient.call(this.$fillGradient,this._7d):null},draw:function(t,e,i,n){this.$invalidateFillGradient&&this._1h(),this.$data.draw(t,e,this,i,n),this.drawArrow(t,e,i,n)},doHitTest:function(t,e,i){if(this.$data.hitTest(t,e,i,!0,this.$lineWidth+this.$outline,this.$fillColor||this.$fillGradient))return!0;if(this.$toArrow&&this.$toArrowShape){var n=t-this.toArrowLocation.x,r=e-this.toArrowLocation.y;if(this.toArrowLocation.rotate)n=(o=ht(n,r,-this.toArrowLocation.rotate)).x,r=o.y;var s=this.toArrowStyles.fillColor||this.toArrowStyles.fillGradient;if(this.$toArrowShape.hitTest(n,r,i,!0,this.toArrowStyles.lineWidth,s))return!0}if(this.$fromArrow&&this.$fromArrowShape){var o;n=t-this.fromArrowLocation.x,r=e-this.fromArrowLocation.y;if(this.fromArrowLocation.rotate)n=(o=ht(n,r,-this.fromArrowLocation.rotate)).x,r=o.y;s=this.fromArrowStyles.fillColor||this.fromArrowStyles.fillGradient;if(this.$fromArrowShape.hitTest(n,r,i,!0,this.fromArrowStyles.lineWidth,s))return!0}return!1},$fromArrowOutline:0,$toArrowOutline:0,$invalidateFillGradient:!0,$invalidateFromArrow:!0,$invalidateToArrow:!0},p(Ds,Es),De(Ds.prototype,{strokeStyle:{validateFlags:["FromArrow","ToArrow"]},fillColor:{},fillGradient:{validateFlags:["FillGradient"]},fromArrowOffset:{validateFlags:["FromArrow","Size"]},fromArrowSize:{validateFlags:["FromArrow","Size"]},fromArrow:{validateFlags:["FromArrow","Size"]},fromArrowOutline:{validateFlags:["FromArrow","Size"]},fromArrowStroke:{validateFlags:["FromArrow","Size"]},fromArrowStrokeStyle:{validateFlags:["FromArrow"]},toArrowOffset:{validateFlags:["ToArrow","Size"]},toArrowSize:{validateFlags:["ToArrow","Size"]},toArrow:{validateFlags:["ToArrow","Size"]},toArrowOutline:{validateFlags:["ToArrow","Size"]},toArrowStroke:{validateFlags:["ToArrow","Size"]},toArrowStrokeStyle:{validateFlags:["ToArrow"]},outline:{value:0,validateFlags:["Data"]}}),j(Ds.prototype,{length:{get:function(){return this.data.length}}}),Me.prototype={shape:null,path:null,initialize:function(){T(this,Me,"initialize"),this.path=new Fr,this.path._lcw=!1,this.shape=new Ds(this.path),this.addChild(this.shape,0),this._leody=this.shape,Ls.initBindingProperties(this)},_1k:!0,_4s:null,_$o:function(){return!1},_3m:function(){return!1},validatePoints:function(){this.shape.invalidateData();var t=this.$data,e=this.path;e.clear();var i=t.fromAgent,n=t.toAgent;i&&n&&function(t,e,i,n,r){var s=n==r,o=t.graph.getUI(n),a=s?o:t.graph.getUI(r);if(o&&a){var h=e.edgeType,l=t.getEndPointBounds(o),_=s?l:t.getEndPointBounds(a),u=t.getStyle(ys.EDGE_FROM_OFFSET),c=t.getStyle(ys.EDGE_TO_OFFSET);u&&(l.x+=u.x||0,l.y+=u.y||0),c&&(_.x+=c.x||0,_.y+=c.y||0);var d=e.hasPathSegments();if(!s&&!h&&!d){var f=n.busLayout;if(f!=r.busLayout){var g,v,E,p,y=e.angle;f?(g=o,v=l,E=a,p=_):(g=a,v=_,E=o,p=l);var T=Je(v,g,f,E,p,y);if(T&&2==T.length){var m=T[0],O=T[1];return i.moveTo(m.x,m.y),O.x==m.x&&O.y==m.y&&(O.y+=.01),i.lineTo(O.x,O.y),void(i._5z=!0)}}}t._3l(e,i,o,a,h,l,_),(!s||d)&&Xe(t,0,i,o,a,0,l,_),i._5z=!0}}(this,t,e,i,n)},getEndPointBounds:function(t){return t.bodyBounds.clone()},_3l:function(t,e,i,n,r,s,o){return t.hasPathSegments()?void(e.segments=t.pathSegments.toDatas()):i==n?void this.drawLoopedEdge(e,i,r,s):void this.drawEdge(e,i,n,r,s,o)},drawLoopedEdge:function(t,e,i,n){Ze(this,n,t)},drawEdge:function(t,e,i,n,r,s){var o=r.center,a=s.center;if(n==sr.EDGE_TYPE_ZIGZAG){var h=(o.x+a.x)/2,l=(o.y+a.y)/2,_=o.x-a.x,u=o.y-a.y,c=Math.sqrt(_*_+u*u),d=Math.atan2(u,_);d+=Math.PI/6,(c*=.04)>30&&(c=30);var f=Math.cos(d)*c,g=Math.sin(d)*c;return t.lineTo(h-g,l+f),void t.lineTo(h+g,l-f)}var v=Ke(this,this.data,r,s,0,0,o,a);v&&(t._ep=v)},_25:function(){if(!this.$data.isBundleEnabled())return null;var t=this.graph._7p._83(this.$data);if(!t||!t.canBind(this.graph)||!t._gm)return null;var e=t.getYOffset(this);return t.isPositiveOrder(this.$data)||(e=-e),e},checkBundleLabel:function(){var t=this.getBundleLabel();return t?(this.bundleLabel||this.createBundleLabel(),this.bundleLabel._h0=!0,void(this.bundleLabel.data=t)):void(this.bundleLabel&&(this.bundleLabel._h0=!1,this.bundleLabel.data=null))},createBundleLabel:function(){var t=new Rs;t.editable=!1,this.bundleLabel=t,this.addChild(this.bundleLabel),As.initBindingProperties(this)},getBundleLabel:function(){return this.graph.getBundleLabel(this.data)},doValidate:function(){return this._1k&&(this._1k=!1,this.validatePoints()),this.checkBundleLabel(),T(this,Me,"doValidate")},_3n:function(){this._1k=!0,this.invalidateSize()},_$u:function(t,e,i){var n=this._lc8.onBindingPropertyChange(this,t,e,i);return n=Ts.onBindingPropertyChange(this,t,e,i)||n,this.bundleLabel&&this.bundleLabel.$data&&(n=As.onBindingPropertyChange(this,t,e,i)||n),Ls.onBindingPropertyChange(this,t,e,i)||n}},p(Me,xs),Me.drawReferenceLine=function(t,e,i,n){if(t.moveTo(e.x,e.y),n&&n!=sr.EDGE_TYPE_DEFAULT){if(n==sr.EDGE_TYPE_VERTICAL_HORIZONTAL)t.lineTo(e.x,i.y);else if(n==sr.EDGE_TYPE_HORIZONTAL_VERTICAL)t.lineTo(i.x,e.y);else if(0==n.indexOf(sr.EDGE_TYPE_ORTHOGONAL)){o=n==sr.EDGE_TYPE_ORTHOGONAL_HORIZONTAL||n!=sr.EDGE_TYPE_ORTHOGONAL_VERTICAL&&Math.abs(e.x-i.x)>Math.abs(e.y-i.y);var r=(e.x+i.x)/2,s=(e.y+i.y)/2;o?(t.lineTo(r,e.y),t.lineTo(r,i.y)):(t.lineTo(e.x,s),t.lineTo(i.x,s))}else if(0==n.indexOf(sr.EDGE_TYPE_ELBOW)){var o,a=Ps[ys.EDGE_EXTEND]||0;(o=n==sr.EDGE_TYPE_ELBOW_HORIZONTAL||n!=sr.EDGE_TYPE_ELBOW_VERTICAL&&Math.abs(e.x-i.x)>Math.abs(e.y-i.y))?(t.lineTo(e.x+a,e.y),t.lineTo(i.x-a,i.y)):(t.lineTo(e.x,e.y+a),t.lineTo(i.x,i.y-a))}else if(0==n.indexOf("extend.")){a=Ps[ys.EDGE_EXTEND]||0;if(n==sr.EDGE_TYPE_EXTEND_TOP){var h=Math.min(e.y,i.y)-a;t.lineTo(e.x,h),t.lineTo(i.x,h)}else if(n==sr.EDGE_TYPE_EXTEND_BOTTOM){h=Math.max(e.y,i.y)+a;t.lineTo(e.x,h),t.lineTo(i.x,h)}else if(n==sr.EDGE_TYPE_EXTEND_LEFT){var l=Math.min(e.x,i.x)-a;t.lineTo(l,e.y),t.lineTo(l,i.y)}else if(n==sr.EDGE_TYPE_EXTEND_RIGHT){l=Math.max(e.x,i.x)+a;t.lineTo(l,e.y),t.lineTo(l,i.y)}}else if(n==sr.EDGE_TYPE_ZIGZAG){r=(e.x+i.x)/2,s=(e.y+i.y)/2;var _=e.x-i.x,u=e.y-i.y,c=Math.sqrt(_*_+u*u),d=Math.atan2(u,_);d+=Math.PI/6,(c*=.04)>30&&(c=30);var f=Math.cos(d)*c,g=Math.sin(d)*c;t.lineTo(r-g,s+f),t.lineTo(r+g,s-f)}t.lineTo(i.x,i.y)}else t.lineTo(i.x,i.y)},j(Me.prototype,{length:{get:function(){return this.path?this.path.length:0}}}),Me.prototype.addPoint=function(t,e,i){var n=zt(this.path,t,e,i);if(n&&n.length>2){var r=this.data,s=n[n.length-1];r.pathSegments=s.type==Dr?n.splice(1,n.length-2):n.splice(1,n.length-1)}},Be.prototype={_2j:null,image:null,initialize:function(){T(this,Be,"initialize"),this._lgi(),ws.initBindingProperties(this)},_lcd:function(){this.data.image?this.image&&(this.body=this.image):this.label&&(this.body=this.label)},_lgi:function(){this.image=new Cs,this.addChild(this.image,0),this._lcd()},doValidate:function(){this.body&&(this instanceof ni&&!this.$data.groupImage&&this._4x()?this.body.$layoutByAnchorPoint=!1:(this.body.$layoutByAnchorPoint=null!=this._2j,this.body.anchorPosition=this._2j));var t=this.$data.$location,e=0,i=0;t&&(e=t.x,i=t.y);var n=this.$x!=e||this.$y!=i;return n&&(this.$invalidateBounds=!0),this.$x=e,this.$y=i,xs.prototype.doValidate.call(this)||n},_$u:function(t,e,i){var n=this._lc8.onBindingPropertyChange(this,t,e,i);return n=Ts.onBindingPropertyChange(this,t,e,i)||n,ws.onBindingPropertyChange(this,t,e,i)||n}},p(Be,xs);var Ps={};Ps[ys.SELECTION_COLOR]=Ji.SELECTION_COLOR,Ps[ys.SELECTION_BORDER]=Ji.SELECTION_BORDER,Ps[ys.SELECTION_SHADOW_BLUR]=Ji.SELECTION_SHADOW_BLUR,Ps[ys.SELECTION_TYPE]=sr.SELECTION_TYPE_SHADOW,Ps[ys.SELECTION_SHADOW_OFFSET_X]=2,Ps[ys.SELECTION_SHADOW_OFFSET_Y]=2,Ps[ys.LABEL_COLOR]=Ji.LABEL_COLOR,Ps[ys.LABEL_POSITION]=hn.CENTER_BOTTOM,Ps[ys.LABEL_ANCHOR_POSITION]=hn.CENTER_TOP,Ps[ys.LABEL_PADDING]=new an(0,2),Ps[ys.LABEL_POINTER_WIDTH]=8,Ps[ys.LABEL_RADIUS]=8,Ps[ys.LABEL_POINTER]=!0,Ps[ys.LABEL_BORDER]=0,Ps[ys.LABEL_BORDER_STYLE]="#000",Ps[ys.LABEL_ROTATABLE]=!0,Ps[ys.LABEL_BACKGROUND_COLOR]=null,Ps[ys.LABEL_BACKGROUND_GRADIENT]=null,Ps[ys.EDGE_COLOR]="#555555",Ps[ys.EDGE_WIDTH]=1.5,Ps[ys.EDGE_FROM_AT_EDGE]=!0,Ps[ys.EDGE_TO_AT_EDGE]=!0,Ps[ys.GROUP_BACKGROUND_COLOR]=F(3438210798),Ps[ys.GROUP_STROKE]=1,Ps[ys.GROUP_STROKE_STYLE]="#000",Ps[ys.ARROW_TO]=!0,Ps[ys.ARROW_FROM_SIZE]=Ji.ARROW_SIZE,Ps[ys.ARROW_TO_SIZE]=Ji.ARROW_SIZE,Ps[ys.EDGE_LOOPED_EXTAND]=10,Ps[ys.EDGE_CORNER_RADIUS]=8,Ps[ys.EDGE_CORNER]=sr.EDGE_CORNER_ROUND,Ps[ys.EDGE_SPLIT_BY_PERCENT]=!0,Ps[ys.EDGE_EXTEND]=20,Ps[ys.EDGE_SPLIT_PERCENT]=.5,Ps[ys.EDGE_SPLIT_VALUE]=20,Ps[ys.EDGE_BUNDLE_GAP]=20,Ps[ys.EDGE_BUNDLE_LABEL_ANCHOR_POSITION]=hn.CENTER_BOTTOM,Ps[ys.EDGE_BUNDLE_LABEL_POSITION]=hn.CENTER_TOP,Ps[ys.EDGE_BUNDLE_LABEL_COLOR]="#075bc5",Ps[ys.SHAPE_STROKE]=1,Ps[ys.SHAPE_STROKE_STYLE]="#2898E0",Ps[ys.RENDER_COLOR_BLEND_MODE]=Ji.BLEND_MODE,Ps[ys.ALPHA]=1,Ji.LOOKING_EDGE_ENDPOINT_TOLERANCE=2;var Ns=function(e,i){this._$r=new bn,this._$r.on(function(t){"currentSubNetwork"==t.kind&&this.invalidateVisibility()},this),this._1e=new bn,this._1e.addListener(function(t){!this.currentSubNetwork||t.kind!=An.KIND_CLEAR&&t.kind!=An.KIND_REMOVE||this.graphModel.contains(this.currentSubNetwork)||(this.currentSubNetwork=null)},this),this._8=new bn,this._13=new bn,this._$h=new bn,this._$m=new bn,this.graphModel=i||new xe,this._7p=new ns(this,e),this._2w=new Ci(this),this._18=new bn,this._onresize=Gn(t,"resize",function(){this.updateViewport()},!1,this),this._7p._lge.ondrop=function(t){this.ondrop(t)}.bind(this),this._7p._lge.ondragover=function(t){this.ondragover(t)}.bind(this)};j(Ns.prototype={originAtCenter:!0,editable:!1,ondragover:function(t){rr.stopEvent(t)},getDropInfo:function(t,e){var i=null;if(e)try{i=JSON.parse(e)}catch(t){}return i},ondrop:function(t){var e=t.dataTransfer;if(e){var i=e.getData("text"),n=this.getDropInfo(t,i);n||((n={}).image=e.getData("image"),n.type=e.getData("type"),n.label=e.getData("label"),n.groupImage=e.getData("groupImage"));var r=this.globalToLocal(t);if(r=this.toLogical(r.x,r.y),!(this.dropAction instanceof Function&&!1===this.dropAction.call(this,t,r,n))&&(n.image||n.label||n.type)){var s,o=n.image,a=n.type,h=n.label,l=n.groupImage;if(rr.stopEvent(t),a&&"Node"!=a?"Text"==a?s=this.createText(h,r.x,r.y):"ShapeNode"==a?s=this.createShapeNode(h,r.x,r.y):"Group"==a?(s=this.createGroup(h,r.x,r.y),l&&((l=ei(l))&&(s.groupImage=l))):(a=z(a))instanceof Function&&a.prototype instanceof ds&&((s=new a).name=h,s.location=new en(r.x,r.y),this._jcModel.add(s)):s=this.createNode(h,r.x,r.y),s){if(o&&((o=ei(o))&&(s.image=o)),t.shiftKey){var _=this.getElementByMouseEvent(t);_&&this._lgt(_)&&(s.parent=_)}if(n.properties)for(var u in n.properties)s[u]=n.properties[u];if(n.clientProperties)for(var u in n.clientProperties)s.set(u,n.clientProperties[u]);if(n.styles&&s.putStyles(n.styles),!1===this.onElementCreated(s,t,n))return!1;var c=new xi(this,xi.ELEMENT_CREATED,t,s);return this.onInteractionEvent(c),s}}}},_lgt:function(t){return t.enableSubNetwork||t instanceof vs||t.droppable},enableDoubleClickToOverview:!0,_7p:null,_$r:null,_1e:null,_8:null,_$m:null,_13:null,_$h:null,_1n:function(t){return this._$r.beforeEvent(t)},_4e:function(t){this._$r.onEvent(t),"viewport"==t.kind&&this.checkLimitedBounds()},isVisible:function(t){return this._7p._du(t)},isMovable:function(t){return(t instanceof ds||t instanceof cs&&t.hasPathSegments())&&!1!==t.movable},isSelectable:function(t){return!1!==t.selectable},isEditable:function(t){return!1!==t.editable},isRotatable:function(t){return!1!==t.rotatable},isResizable:function(t){return!1!==t.resizable},canLinkFrom:function(t){return!1!==t.linkable&&!1!==t.canLinkFrom},canLinkTo:function(t){return!1!==t.linkable&&!1!==t.canLinkTo},isEndPointEditable:function(t){return!1!==t.endPointEditable},createNode:function(t,e,i){var n=new ds(t,e,i);return this._jcModel.add(n),n},createText:function(t,e,i){var n=new Ce(t,e,i);return this._jcModel.add(n),n},createShapeNode:function(t,e,i,n){C(e)&&(n=i,i=e,e=null);var r=new fs(t,e);return r.$location=new en(i,n),this._jcModel.add(r),r},createGroup:function(t,e,i){var n=new vs(t,e,i);return this._jcModel.add(n),n},createEdge:function(t,e,i){if(t instanceof ds){var n=i;i=e,e=t,t=n}var r=new cs(e,i);return t&&(r.$name=t),this._jcModel.add(r),r},addElement:function(t,e){this._jcModel.add(t),e&&t.hasChildren()&&t.forEachChild(function(t){this.addElement(t,e)},this)},removeElement:function(t){this._jcModel.remove(t)},clear:function(){this._jcModel.clear()},getStyle:function(t,e){var n=t._io[e];return n!==i?n:this.getDefaultStyle(e)},getDefaultStyle:function(t){if(this._io){var e=this._io[t];if(e!==i)return e}return Ps[t]},_2g:function(t,e){if(!this.limitedBounds||this.limitedBounds.contains(this.viewportBounds))return e&&e(),!1;t=this._28(),this.stopAnimation();var i,n,r,s=this.viewportBounds,o=this.limitedBounds,a=s.width/this.limitedBounds.width,h=s.height/this.limitedBounds.height;if(1>=a&&1>=h)return i=o.left>s.left?o.left:o.right<s.right?s.left-(s.right-o.right):s.left,n=o.top>s.top?o.top:o.bottom<s.bottom?s.top-(s.bottom-o.bottom):s.top,void this.translateTo(-i*this.scale,-n*this.scale,this.scale,!1,e);var l=a>h;r=Math.max(a,h),l?(i=o.x,(n=o.y+(s.top-o.top)*(1-r)/r)>=o.y?n=o.y:n<o.bottom-s.height/r&&(n=o.bottom-s.height/r)):(n=o.y,(i=o.x+(s.left-o.left)*(1-r)/r)>=o.x?i=o.x:i<o.right-s.width/r&&(i=o.right-s.width/r)),i*=r*=this.scale,n*=r,this.translateTo(-i,-n,r,t,e)},checkLimitedBounds:function(t){return!(this._lcheckingBounds||!this.limitedBounds||this.limitedBounds.contains(this.viewportBounds))&&(this._lcheckingBounds=!0,void this.callLater(function(){this._2g(t,function(){this._lcheckingBounds=!1}.bind(this))},this))},zoomByMouseEvent:function(t,e,i,n){var r=this.globalToLocal(t);return C(e)?this.zoomAt(Math.pow(this.scaleStep,e),r.x,r.y,i,n):e?this.zoomIn(r.x,r.y,i,n):this.zoomOut(r.x,r.y,i,n)},resetScale:1,translate:function(t,e,i){return this.translateTo(this.tx+t,this.ty+e,this.scale,i)},translateTo:function(t,e,i,n,r){if(i&&(i=Math.min(this.maxScale,Math.max(this.minScale,i))),!n){var s=this._7p._lgg(t,e,i);return r&&r(),s}this._59()._jk(t,e,i,n,r)},centerTo:function(t,e,n,r,s){return(!n||0>=n)&&(n=this.scale),r===i&&(r=this._28()),this.translateTo(this.width/2-t*n,this.height/2-e*n,n,r,s)},moveToCenter:function(t,e){if(!1!==arguments[2]&&this._7p.isInvalidate())return this._7p._lg0||(e=!1),this.callLater(this.moveToCenter.bind(this,t,e,!1));var i=this.bounds;this.centerTo(i.cx,i.cy,t,e)},zoomToOverview:function(t,e){if(!1!==arguments[2]&&this._7p.isInvalidate())return this._7p._lg0||(t=!1),this.callLater(this.zoomToOverview.bind(this,t,e,!1));var i=this._7p._1o();i&&(e&&(i.scale=Math.min(i.scale,e)),this.centerTo(i.cx,i.cy,i.scale,t))},_28:function(){return!!this._7p._lg0&&(this.zoomAnimation===i||null===this.zoomAnimation?Ji.ZOOM_ANIMATE:this.zoomAnimation)},zoomAt:function(t,e,n,r,s){r===i&&(r=this._28()),e===i&&(e=this.width/2),e=e||0,n===i&&(n=this.height/2),n=n||0;var o=this.scale;return e=(t=Math.min(this.maxScale,Math.max(this.minScale,o*t)))*(this.tx-e)/o+e,n=t*(this.ty-n)/o+n,this.translateTo(e,n,t,r,s)},zoomOut:function(t,e,i,n){return this.zoomAt(1/this.scaleStep,t,e,i,n)},zoomIn:function(t,e,i,n){return this.zoomAt(this.scaleStep,t,e,i,n)},_59:function(){return this._panAnimation||(this._panAnimation=new Gs(this)),this._panAnimation},onAnimationStart:function(){},onAnimationEnd:function(){},isAnimating:function(){return this._panAnimation&&this._panAnimation._e2()},enableInertia:!0,_9h:function(t,e){return this._59()._gu(t||0,e||0)},stopAnimation:function(){this._panAnimation&&this._panAnimation._k9()},getUI:function(t){return Y(t)?this._7p._35(t):this._7p._jy(t)},getUIByMouseEvent:function(t){return this._7p._35(t)},hitTest:function(t){return this._7p.hitTest(t)},globalToLocal:function(t){return this._7p._7f(t)},toCanvas:function(t,e){return this._7p._f5(t,e)},toLogical:function(t,e){return Y(t)?this._7p._$g(t):this._7p._ej(t,e)},getElementByMouseEvent:function(t){var e=this._7p._35(t);return e?e.$data:void 0},getElement:function(t){if(Y(t)){var e=this._7p._35(t);return e?e.$data:null}return this._jcModel.getById(t)},invalidate:function(){this._7p._let()},invalidateUI:function(t){t.invalidate(),this.invalidate()},invalidateElement:function(t){this._7p._38(t)},getUIBounds:function(t){return this._7p._2r(t)},forEachVisibleUI:function(t,e){return this._7p._42(t,e)},forEachReverseVisibleUI:function(t,e){return this._7p._$t(t,e)},forEachUI:function(t,e){return this._7p._dd(t,e)},forEachReverseUI:function(t,e){return this._7p._3z(t,e)},forEach:function(t,e){return this._jcModel.forEach(t,e)},getElementByName:function(t){var e;return this.forEach(function(i){return i.name==t?(e=i,!1):void 0}),e},focus:function(e){if(e){var i=t.scrollX||t.pageXOffset,n=t.scrollY||t.pageYOffset;return this.canvasPanel.focus(),void t.scrollTo(i,n)}this.canvasPanel.focus()},callLater:function(t,e,i){this._7p._df(t,e,i)},exportImage:function(t,e){return function(t,e,i){var n=t.bounds;i=i||n,e=e||1;var r=ft();ie(r.g),r.width=i.width*e,r.height=i.height*e,t._7p._g7(r.g,e,i);var s=null;try{s=r.toDataURL("image/png")}catch(t){rr.error(t)}return{canvas:r,data:s,width:r.width,height:r.height}}(this,t,e)},setSelection:function(t){return this._jcModel._selectionModel.set(t)},select:function(t){return this._jcModel._selectionModel.select(t)},unselect:function(t){return this._jcModel._selectionModel.unselect(t)},reverseSelect:function(t){return this._jcModel._selectionModel.reverseSelect(t)},selectAll:function(){var t,e,i;e=(t=this).selectionModel,i=[],t.graphModel.forEach(function(e){t.isVisible(e)&&t.isSelectable(e)&&i.push(e)}),e.set(i)},unSelectAll:function(){this.selectionModel.clear()},unselectAll:function(){this.unSelectAll()},isSelected:function(t){return this._jcModel._selectionModel.contains(t)},sendToTop:function(t){ye(this._jcModel,t)},sendToBottom:function(t){Te(this._jcModel,t)},moveElements:function(t,e,i){var n=[],r=new Qi;return _(t,function(t){t instanceof ds?n.push(t):t instanceof cs&&r.add(t)}),this._e7(n,e,i,r)},_e7:function(t,e,i,n){if(0==e&&0==i||0==t.length&&0==n.length)return!1;if(0!=t.length){var r=this._41(t);n=this._44(r,n),_(r,function(t){var n=t.$location;n?t.setLocation(n.x+e,n.y+i):t.setLocation(e,i)})}return n&&n.length&&this._e0(n,e,i),!0},_e0:function(t,e,i){t.forEach(function(t){t.move(e,i)})},_44:function(t,e){return this.graphModel.forEach(function(i){i instanceof cs&&this.isMovable(i)&&t.contains(i.fromAgent)&&t.contains(i.toAgent)&&e.add(i)},this),e},_41:function(t){var e=new Qi;return _(t,function(t){this.isMovable(t),e.add(t),function t(e,i,n){e._gy()&&e.hasChildren()&&e.children.forEach(function(e){e instanceof ds&&i.add(e)&&t(e,i,n)},this),e.hasFollowers()&&e._dt.forEach(function(e){(null==n||n.accept(e))&&i.add(e)&&t(e,i,n)})}(t,e,this._movableFilter)},this),e},reverseExpanded:function(t){if(!t.isBundleEnabled())return!1;var e=t.getEdgeBundle(!0);return!!e&&(!1!==e.reverseExpanded()?(this.invalidate(),!0):void 0)},_2w:null,_18:null,beforeInteractionEvent:function(t){return this._18.beforeEvent(t)},onInteractionEvent:function(t){this._18.onEvent(t)},addCustomInteraction:function(t){this._2w.addCustomInteraction(t)},removeCustomInteraction:function(t){this._2w.removeCustomInteraction(t)},enableWheelZoom:!0,enableTooltip:!0,getTooltip:function(t){return t.tooltip||t.name},updateViewport:function(){this._7p._75()},destroy:function(){this._4e(new pn(this,"destroy",!0,this._h8ed)),this._h8ed=!0,function(t,e,i){t.removeEventListener(e,i)}(t,"resize",this._onresize),this._2w.destroy(),this.graphModel=new xe;var e=this.html;this._7p._h8(),e&&(e.innerHTML="")},onPropertyChange:function(t,e,i){this._$r.addListener(function(n){n.kind==t&&e.call(i,n)})},removeSelection:function(){var t=this.selectionModel._ig;return!(!t||0==t.length)&&(t=t.slice(),this._jcModel.remove(t),t)},removeSelectionByInteraction:function(t){var e=this.selectionModel.datas;return!(!e||0==e.length)&&void rr.confirm("Delete Elements - "+e.length,function(){var e=this.removeSelection();if(e){var i=new xi(this,xi.ELEMENT_REMOVED,t,e);this.onInteractionEvent(i)}},this)},createShapeByInteraction:function(t,e,i,n){var r=new Fr(e);e.length>2&&r.closePath();var s=this.createShapeNode("Shape",r,i,n);this.onElementCreated(s,t);var o=new xi(this,xi.ELEMENT_CREATED,t,s);return this.onInteractionEvent(o),s},createLineByInteraction:function(t,e,i,n){var r=new Fr(e),s=this.createShapeNode("Line",r,i,n);s.setStyle(rr.Styles.SHAPE_FILL_COLOR,null),s.setStyle(rr.Styles.SHAPE_FILL_GRADIENT,null),s.setStyle(rr.Styles.LAYOUT_BY_PATH,!0),this.onElementCreated(s,t);var o=new xi(this,xi.ELEMENT_CREATED,t,s);return this.onInteractionEvent(o),s},createEdgeByInteraction:function(t,e,i,n){var r=this.createEdge("Edge",t,e);if(n)r._9c=n;else{var s=this.edgeUIClass,o=this.edgeType;this.interactionProperties&&(s=this.interactionProperties.uiClass||s,o=this.interactionProperties.edgeType||o),s&&(r.uiClass=s),o&&(r.edgeType=o)}this.onElementCreated(r,i);var a=new xi(this,xi.ELEMENT_CREATED,i,r);return this.onInteractionEvent(a),r},onElementCreated:function(t){!t.parent&&this.currentSubNetwork&&(t.parent=this.currentSubNetwork)},allowEmptyLabel:!1,startLabelEdit:function(t,e,i,n){var r=this;i.startEdit(n.x,n.y,e.data,this.getStyle(t,ys.LABEL_FONT_SIZE),function(i){return r.onLabelEdit(t,e,i,e.parent)})},onLabelEdit:function(t,e,i,n){if(!i&&!this.allowEmptyLabel)return rr.alert("Label Can't Empty"),!1;if("label"==e.name){if(t.name==i)return!1;t.name=i}else!1===n._fm(e,i)&&(e.data=i,this.invalidateElement(t))},setInteractionMode:function(t,e){this.interactionMode=t,this.interactionProperties=e},upSubNetwork:function(){return!!this._3b&&(this.currentSubNetwork=ii(this._3b))},_$p:!1,invalidateVisibility:function(){this._$p=!0,this.invalidate()},getBundleLabel:function(t){var e=t.getEdgeBundle(!0);return e&&e.agentEdge==t?"+"+e.bindableEdges.length:null},zoomAnimation:null,pauseRendering:function(t,e){(this.delayedRendering||e)&&this._7p._6v(t)},_4b:i,enableRectangleSelectionByRightButton:!0},{center:{get:function(){return this.toLogical(this.html.clientWidth/2,this.html.clientHeight/2)}},visibleFilter:{get:function(){return this._h0Filter},set:function(t){this._h0Filter=t,this.invalidateVisibility()}},topCanvas:{get:function(){return this._7p._topCanvas}},propertyChangeDispatcher:{get:function(){return this._$r}},listChangeDispatcher:{get:function(){return this._1e}},dataPropertyChangeDispatcher:{get:function(){return this._8}},selectionChangeDispatcher:{get:function(){return this._$m}},parentChangeDispatcher:{get:function(){return this._13}},childIndexChangeDispatcher:{get:function(){return this._$h}},interactionDispatcher:{get:function(){return this._18}},cursor:{set:function(t){this.canvasPanel.style.cursor=t||this._2w.defaultCursor},get:function(){return this.canvasPanel.style.cursor}},interactionMode:{get:function(){return this._2w._lcurrentMode},set:function(t){var e=this.interactionMode;e!=t&&(this._2w.currentMode=t,this._4e(new pn(this,"interactionMode",t,e)))}},scaleStep:{get:function(){return this._7p._da},set:function(t){this._7p._da=t}},maxScale:{get:function(){return this._7p._fi},set:function(t){this._7p._fi=t}},minScale:{get:function(){return this._7p._fo},set:function(t){this._7p._fo=t}},scale:{get:function(){return this._7p._scale},set:function(t){return this._7p._scale=t}},tx:{get:function(){return this._7p._tx}},ty:{get:function(){return this._7p._ty}},styles:{get:function(){return this._io},set:function(t){this._io=t}},selectionModel:{get:function(){return this._jcModel._selectionModel}},graphModel:{get:function(){return this._jcModel},set:function(t){if(this._jcModel==t)return!1;var e=this._jcModel,i=new pn(this,"graphModel",e,t);return!1!==this._1n(i)&&(null!=e&&(e.propertyChangeDispatcher.removeListener(this._$r,this),e.listChangeDispatcher.removeListener(this._1e,this),e.dataChangeDispatcher.removeListener(this._8,this),e.parentChangeDispatcher.removeListener(this._13,this),e.childIndexChangeDispatcher.removeListener(this._$h,this),e.selectionChangeDispatcher.removeListener(this._$m,this)),this._jcModel=t,this._jcModel&&(this._jcModel.propertyChangeDispatcher.addListener(this._$r,this),this._jcModel.listChangeDispatcher.addListener(this._1e,this),this._jcModel.dataChangeDispatcher.addListener(this._8,this),this._jcModel.parentChangeDispatcher.addListener(this._13,this),this._jcModel.childIndexChangeDispatcher.addListener(this._$h,this),this._jcModel.selectionChangeDispatcher.addListener(this._$m,this)),this._7p&&this._7p._jz(),void this._4e(i))}},count:{get:function(){return this._jcModel.length}},width:{get:function(){return this.html.clientWidth}},height:{get:function(){return this.html.clientHeight}},viewportBounds:{get:function(){return this._7p._viewportBounds}},bounds:{get:function(){return this._7p._3y()}},canvasPanel:{get:function(){return this._7p._lge}},html:{get:function(){return this._7p._lge.parentNode}},navigationType:{get:function(){return this._7p._64},set:function(t){this._7p._3k(t)}},_3b:{get:function(){return this._jcModel._3b}},currentSubNetwork:{get:function(){return this._jcModel.currentSubNetwork},set:function(t){this._jcModel.currentSubNetwork=t}},limitedBounds:{get:function(){return this._limitedBounds},set:function(t){return!on.equals(t,this._limitedBounds)&&(t?void(this._limitedBounds=new on(t)):void(this._limitedBounds=null))}},ratio:{get:function(){return this._7p.ratio}},delayedRendering:{get:function(){return this._4b===i?Ji.DELAYED_RENDERING:this._4b},set:function(t){t!=this.delayedRendering&&(this._4b=t,this.pauseRendering(!1,!0))}},fullRefresh:{get:function(){return this._7p.fullRefresh},set:function(t){this._7p.fullRefresh=t}}}),Ji.DELAYED_RENDERING=!0,Ji.GROUP_MIN_WIDTH=60,Ji.GROUP_MIN_HEIGHT=60,ni.prototype={_lcd:function(){return this._4x()?void 0:T(this,ni,"_lcd",arguments)},initialize:function(){T(this,ni,"initialize"),this.checkBody()},_lgr:function(){this._kn=new Fr,this.shape=new Cs(this._kn),this.shape.layoutByPath=!1,this.addChild(this.shape,0),this.body=this.shape},checkBody:function(){return this._4x()?(this._29=!0,this.shape?(this.shape.visible=!0,this.body=this.shape):(this._lgr(),bs.initBindingProperties(this)),void(this.image&&(this.image.visible=!1))):(this.image?(this.image.visible=!0,this.body=this.image):this._lgi(),void(this.shape&&(this.shape.visible=!1)))},_4x:function(){return this.$data._gy()&&this.$data.expanded},_kn:null,_29:!0,_4y:function(){this._1c=!0,this._29=!0},doValidate:function(){if(this._29&&this._4x()){if(this._29=!1,this.shape.invalidateData(),this.$data.groupImage){this.shape.data=this.$data.groupImage;var t=this._1s();return this.shape.offsetX=t.x+t.width/2,this.shape.offsetY=t.y+t.height/2,this.shape.size={width:t.width,height:t.height},Be.prototype.doValidate.call(this)}this.shape.offsetX=0,this.shape.offsetY=0;var e=this._88(this.$data.groupType);this._kn.clear(),e instanceof on?be(this._kn,e.x,e.y,e.width,e.height,e.rx,e.ry):e instanceof It?function(t,e){var i=e.r||1,n=e.cx||0,r=e.cy||0,s=i*Math.tan(Math.PI/8),o=i*Math.sin(Math.PI/4);t.moveTo(n+i,r),t.quadTo(n+i,r+s,n+o,r+o),t.quadTo(n+s,r+i,n,r+i),t.quadTo(n-s,r+i,n-o,r+o),t.quadTo(n-i,r+s,n-i,r),t.quadTo(n-i,r-s,n-o,r-o),t.quadTo(n-s,r-i,n,r-i),t.quadTo(n+s,r-i,n+o,r-o),t.quadTo(n+i,r-s,n+i,r)}(this._kn,e):e instanceof xt&&Le(this._kn,e),this._kn._5z=!0,this.shape.invalidateData()}return Be.prototype.doValidate.call(this)},_6k:function(t,e,i,n,r){switch("number"!=typeof n&&(n=-e/2),"number"!=typeof r&&(r=-i/2),t){case sr.GROUP_TYPE_CIRCLE:return new It(n+e/2,r+i/2,Math.max(e,i)/2);case sr.GROUP_TYPE_ELLIPSE:return new xt(n+e/2,r+i/2,e,i);default:return new on(n,r,e,i)}},_1s:function(){return this._88(null)},_88:function(t){var e=this.data,n=e.padding,r=e.minSize,s=Ji.GROUP_MIN_WIDTH,o=Ji.GROUP_MIN_HEIGHT;if(r&&("number"==typeof r.width&&(s=r.width),"number"==typeof r.height&&(o=r.height),T=r.x,m=r.y),!e.hasChildren())return this._6k(t,s,o,T,m);var a,h=this.$data._er._ig;(t==sr.GROUP_TYPE_CIRCLE||t==sr.GROUP_TYPE_ELLIPSE)&&(a=[]);for(var l,_,u,c,d=new on,f=0,g=h.length;g>f;f++){var v=h[f];if(this.graph.isVisible(v)){var E=this.graph.getUI(v);E&&(l=E.$x+E._f3.x,_=E.$y+E._f3.y,u=E._f3.width,c=E._f3.height,d.addRect(l,_,u,c),a&&(a.push({x:l,y:_}),a.push({x:l+u,y:_}),a.push({x:l+u,y:_+c}),a.push({x:l,y:_+c})))}}if(d.isEmpty())return this._6k(t,s,o,T,m);var p=this.$data.$location;p?p.invalidateFlag&&(p.invalidateFlag=!1,T===i&&(p.x=d.cx),m===i&&(p.y=d.cy)):p=this.$data.$location={x:d.cx,y:d.cy},n&&d.grow(n),"number"==typeof T&&T+p.x<d.x&&(d.width+=d.x-(T+p.x),d.x=T+p.x,a&&a.push({x:d.x,y:d.cy})),"number"==typeof m&&m+p.y<d.y&&(d.height+=d.y-(d.y,m+p.y),d.y=m+p.y,a&&a.push({x:d.cx,y:d.y}));var y,T=p.x,m=p.y;if(t==sr.GROUP_TYPE_CIRCLE){(y=Ct(a)).cx-=T,y.cy-=m;var O=Math.max(s,o)/2;return y.r<O&&(y.cx+=O-y.r,y.cy+=O-y.r,y.r=O),y}return t==sr.GROUP_TYPE_ELLIPSE?((y=Rt(a,d)).cx-=T,y.cy-=m,y.width<s&&(y.cx+=(s-y.width)/2,y.width=s),y.height<o&&(y.cy+=(o-y.height)/2,y.height=o),y):(y=d,d.width<s&&(d.width=s),d.height<o&&(d.height=o),d.offset(-T,-m),y)},_$u:function(t,e,i){if(!this._4x())return T(this,ni,"_$u",arguments);var n=this._lc8.onBindingPropertyChange(this,t,e,i);return n=Ts.onBindingPropertyChange(this,t,e,i)||n,n=ws.onBindingPropertyChange(this,t,e,i)||n,bs.onBindingPropertyChange(this,t,e,i)||n}},p(ni,Be),rr.GroupUI=ni;Ji.NAVIGATION_IMAGE_LEFT=null,Ji.NAVIGATION_IMAGE_TOP=null;var Ms={position:"absolute","text-align":"center"},Bs={padding:"10px",transition:"opacity 0.2s ease-in"},ks={position:"relative",display:"block"};it(".Q-Graph-Nav img","opacity:0.7;vertical-align:middle;"),it(".Q-Graph-Nav img:hover,img.hover","opacity:1;background-color: rgba(0, 0, 0, 0.5)"),Ki||(it(".Q-Graph-Nav","opacity:0;"+Pn("transition")+":opacity 3s cubic-bezier(0.8, 0, 0.8, 1)"),it(".Q-Graph-Nav:hover","opacity:1;"+Pn("transition")+":opacity 0.3s linear")),oi.prototype={_lca:function(t,e){return t._h0!=e&&(t._h0=e,void(t.style.visibility=e?"visible":"hidden"))},_31:function(t,e){var i=e/2-this._left._img.clientHeight/2+"px";this._left._img.style.top=i,this._right._img.style.top=i,this._navPane.style.width=t+"px",this._navPane.style.height=e+"px"},_9i:function(t,e,i,n){this._lca(this._top,t),this._lca(this._left,e),this._lca(this._leottom,i),this._lca(this._right,n)},_h8:function(){var t=this._navPane.parentNode;t&&t.removeChild(this._navPane)},_is:function(){var t=this._leaseCanvas._jc;if(t){var e=t.bounds;if(e.isEmpty())return void this._9i(!1,!1,!1,!1);var i=t.viewportBounds,n=i.y>e.y+1,r=i.x>e.x+1,s=i.bottom<e.bottom-1,o=i.right<e.right-1;this._9i(n,r,s,o)}}};it(".Q-Graph-ScrollBar","margin: 2px; position: absolute;box-sizing: border-box;box-shadow: #FFF 0px 0px 1px; background-color: rgba(120,120,120,0.3);border-radius: 4px;margin: 1px;"),it(".Q-Graph-ScrollBar.hover, .Q-Graph-ScrollBar:hover","background-color: #7E7E7E;"+Pn("transition")+": background-color 0.2s linear;"),it(".Q-Graph-ScrollBar--V","width: 8px;right: 0px;"),it(".Q-Graph-ScrollBar--H","height: 8px;bottom: 0px;"),it(".Q-Graph-ScrollBar--V.Both","margin-bottom: 8px;"),it(".Q-Graph-ScrollBar--H.Both","margin-right: 8px;"),Ki||(it(".Q-Graph-ScrollPane","opacity:0;"+Pn("transition")+":opacity 3s cubic-bezier(0.8, 0, 0.8, 1);"),it(".Q-Graph:hover .Q-Graph-ScrollPane","opacity:1;"+Pn("transition")+":opacity 0.3s linear;")),ai.prototype={_h8:function(){this._verticalDragSupport._h8(),this._horizontalDragSupport._h8(),delete this._verticalDragSupport,delete this._horizontalDragSupport,this._ko.parentNode&&this._ko.parentNode.removeChild(this._ko)},_ko:null,_lgy:null,_8b:null,init:function(t){var i=e.createElement("div");i.className="Q-Graph-ScrollPane",tt(i,{width:"100%",height:"100%",position:"relative"});var n=e.createElement("div");n.className="Q-Graph-ScrollBar Q-Graph-ScrollBar--V";var r=e.createElement("div");r.className="Q-Graph-ScrollBar Q-Graph-ScrollBar--H",i.appendChild(n),i.appendChild(r),t.appendChild(i),this._ko=i,this._8b=r,this._lgy=n,r.isH=!0;var s=this,o={onstart:function(t,e){e.classList.add("hover")},onrelease:function(t,e){e.classList.remove("hover")},ondrag:function(t,e){var i=s._leaseCanvas._jc;if(i){var n=e.isH,r=n?t.dx:t.dy;if(r&&e.scale){var o=i.scale/e.scale;n?i.translate(-o*r,0):i.translate(0,-o*r),rr.stopEvent(t)}}},enddrag:function(t,e){var i=s._leaseCanvas._jc;if(i&&i.enableInertia){var n=e.isH,r=n?t.vx:t.vy;if(Math.abs(r)>.1)r*=i.scale/e.scale,n?i._9h(-r,0):i._9h(0,-r)}}};this._verticalDragSupport=new rt(n,o),this._horizontalDragSupport=new rt(r,o)},_31:function(){var t=this._leaseCanvas._jc;t&&t.callLater(this._is.bind(this))},_is:function(){var t=this._leaseCanvas._jc;if(t){var e=t.bounds;if(e.isEmpty())return this._4i(!1),void this._4j(!1);var i=t.viewportBounds,n=t.width,r=t.height,s=1/t.scale,o=i.x>e.x+s||i.right<e.right-s,a=i.y>e.y+s||i.bottom<e.bottom-s,h=o&&a;h?(I(this._lgy,"Both"),I(this._8b,"Both")):(x(this._lgy,"Both"),x(this._8b,"Both")),this._4i(o,i,e,h?n-10:n),this._4j(a,i,e,h?r-10:r)}},_4i:function(t,e,i,n){if(!t)return this._8b.style.display="none",void(this._8b.scale=0);var r=Math.min(e.x,i.x),s=Math.max(e.right,i.right),o=n/(s-r);this._8b.scale=o,this._8b.style.left=parseInt((e.x-r)*o)+"px",this._8b.style.right=parseInt((s-e.right)*o)+"px",this._8b.style.display=""},_4j:function(t,e,i,n){if(!t)return this._lgy.style.display="none",void(this._lgy.scale=0);var r=Math.min(e.y,i.y),s=Math.max(e.bottom,i.bottom),o=n/(s-r);this._lgy.scale=o,this._lgy.style.top=parseInt((e.y-r)*o)+"px",this._lgy.style.bottom=parseInt((s-e.bottom)*o)+"px",this._lgy.style.display=""}},hi.prototype={shape:null,initialize:function(){T(this,hi,"initialize"),this._lgi(),Ss.initBindingProperties(this)},_lgi:function(){this.image=new Ds(this.$data.path),this.addChild(this.image,0),this.body=this.image},invalidateShape:function(){this.image.invalidateData(),this.invalidateRender()},_$u:function(t,e,i){var n=this._lc8.onBindingPropertyChange(this,t,e,i);return n=Ts.onBindingPropertyChange(this,t,e,i)||n,Ss.onBindingPropertyChange(this,t,e,i)||n},doValidate:function(){this.body&&(this.image.data=this.data.path,this.body.$layoutByAnchorPoint=null!=this._2j,this.body.anchorPosition=this._2j);var t=this.$data.$location,e=0,i=0;t&&(e=t.x,i=t.y);var n=this.$x!=e||this.$y!=i;return n&&(this.$invalidateBounds=!0),this.$x=e,this.$y=i,xs.prototype.doValidate.call(this)||n}},p(hi,xs),j(hi.prototype,{path:{get:function(){return this.data.path}},length:{get:function(){return this.data.length}}}),hi.prototype.addPoint=function(t,e,i){var n=this._gx(t,e),r=this.data,s=zt(r.path,n.x,n.y,i);s&&(r.pathSegments=s)},li.prototype={_ku:function(){this._ih.style.visibility="visible"},_j3:function(){this._ih.style.visibility="hidden"},clear:function(){this._9o.clear(),this._let()},contains:function(t){return t instanceof Object&&t.id&&(t=t.id),this._9o.containsById(t)},_4z:function(t){ls.setStyle(this._ih,"transform",t?"matrix("+t.join(",")+")":"")},addDrawable:function(t,e){if(e){var i={id:++Mi,drawable:t,scope:e};return this._9o.add(i),i}return t.id||(t.id=++Mi),this._9o.add(t),t},removeDrawable:function(t){return t.id?void this._9o.remove(t):this._9o.removeById(t)},_9o:null,invalidate:function(){this._let()},_let:function(){this._leaseCanvas._5z||this._ix()},_h9:function(t,e){this._ih.setSize(t,e)},_ix:function(){var t=this._leaseCanvas._scale,e=this.g;e._jw(),e.save(),this._leaseCanvas._98(e);for(var i=this._9o._ig,n=0,r=i.length;r>n;n++)e.save(),e.beginPath(),this._ff(e,i[n],t),e.restore();e.restore()},_ff:function(t,e,i){return e instanceof Function?void e(t,i):void(e.drawable instanceof Function&&e.scope&&e.drawable.call(e.scope,t,i))}},Ji.ZOOM_ANIMATE=!0;var Gs=function(t){this._jc=t};Ji.ANIMATION_MAXTIME=600,Ji.ANIMATION_TYPE=tr.easeOut,Gs.prototype={_jc:null,_e1:null,_gu:function(t,e,i){this._k9();var n=Math.abs(t/2),r=Math.abs(e/2),s=Math.min(Ji.ANIMATION_MAXTIME,.6*Math.max(n,r)*1e3);if(10>s)return!1;var o=t*s/3,a=e*s/3;this._jk(this._jc.tx+o,this._jc.ty+a,0,{duration:s,animationType:function(t){return-(2*Math.pow(t,1.5)-3*t)}},i)},_77:function(t,e,i,n,r){this._e1&&this._e1._k9(),r&&(this.__delayRender=!0,this._jc.pauseRendering(!0)),this._46(),this._e1=new ir(t,this,e,i),this._e1._5v=this._5v.bind(this),this._e1._jo(n)},_46:function(){this._jc.onAnimationStart()},_5v:function(){this.__delayRender&&(this._jc.pauseRendering(!1),delete this.__delayRender),this._jc.onAnimationEnd()},_e2:function(){return this._e1&&this._e1._e2()},_k9:function(){this._e1&&this._e1._k9()},_he:function(t){var e=this._fromTX+(this._toTX-this._fromTX)*t,i=this._fromTY+(this._toTY-this._fromTY)*t,n=this._fromScale+(this._toScale-this._fromScale)*t;this._jc.translateTo(e,i,n,this.toInt)},_jk:function(t,e,i,n,r){this._k9();var s=this._jc,o=s.scale;if(0>=i&&(i=o),t!=s.tx||e!=s.ty||i!=o){var a,h,l;n instanceof Object&&(a=n.duration,h=n.maxTime,l=n.animationType);var _=s.tx,u=s.ty;if(!a)if(i!=o){var c=i>o?i/o:o/i;a=60*(c=Math.log(c)/Math.log(1.3))}else{a=nn(t,e,_,u)/2}h=h||Ji.ANIMATION_MAXTIME,l=l||Ji.ANIMATION_TYPE,a=Math.min(h,a),this._fromTX=_,this._fromTY=u,this._fromScale=o,this._toTX=t,this._toTY=e,this._toScale=i,this._77(this._he,a,l,r,i!=o)}}},Ji.INTERACTION_HANDLER_SIZE_TOUCH=8,Ji.INTERACTION_HANDLER_SIZE_DESKTOP=4,Ji.INTERACTION_ROTATE_HANDLER_SIZE_TOUCH=30,Ji.INTERACTION_ROTATE_HANDLER_SIZE_DESKTOP=20;var Fs=Math.PI/4;_i.prototype={onElementRemoved:function(t,e){this.element&&(t==this.element||D(t)&&v(t,this.element))&&this.destroy(e)},onClear:function(t){this.element&&this.destroy(t)},destroy:function(){delete this.element,this.removeDrawable()},invalidate:function(){this.topCanvas.invalidate()},removeDrawable:function(){this._f2Id&&(this.topCanvas.removeDrawable(this._f2Id),delete this._f2Id,this.invalidate())},addDrawable:function(){this._f2Id||(this._f2Id=this.topCanvas.addDrawable(this.doDraw,this).id,this.invalidate())},doDraw:function(){},escapable:!0,onkeydown:function(t,e){this.escapable&&27==t.keyCode&&(M(t),this.destroy(e))}},rr.DrawableInteraction=_i,ui.prototype={defaultCursor:"default",getInteractionInstances:function(t){if(!this.interactions)return null;for(var e=[],i=0,n=this.interactions.length;n>i;i++){var r=this.interactions[i];r instanceof Function?e.push(new r(t)):r instanceof Object&&e.push(r)}return e}},ci.prototype={_dp:null,_ib:null,destroy:function(){T(this,ci,"destroy",arguments),delete this._ib,delete this._9f,delete this._dp},doDraw:function(t){var e=this.points;e&&(e.forEach(function(e){this.drawPoint(t,e)},this),this.isClosePath&&t.closePath(),this.styleDraw(t))},styleDraw:function(t){var e=function(t,e){if(!t)return e;var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]===i&&(n[r]=e[r]);return n}(this.graph.interactionProperties,this.getDefaultDrawStyles(this.graph));e.lineWidth&&(t.lineWidth=e.lineWidth,e.lineCap&&(t.lineCap=e.lineCap),e.lineJoin&&(t.lineJoin=e.lineJoin),e.lineDash&&(t.lineDash=e.lineDash,t.lineDashOffset=e.lineDashOffset||0),t.strokeStyle=e.strokeStyle,t.stroke()),e.fillStyle&&(t.fillStyle=e.fillStyle,t.fill())},drawPoint:function(t,e,i){if(i)t.moveTo(e.x,e.y);else if(rr.isArray(e)){var n=e[0],r=e[1];t.quadraticCurveTo(n.x,n.y,r.x,r.y)}else t.lineTo(e.x,e.y)},setCurrentPoint:function(t){this.currentPoint=t},addPoint:function(t){this._ib||(this._ib=[],this.addDrawable()),this._ib.push(t),this.invalidate()}},p(ci,_i),j(ci.prototype,{currentPoint:{get:function(){return this._9f},set:function(t){this._9f=t,this.invalidate()}},prevPoint:{get:function(){return this._ib&&this._ib.length?this._ib[this._ib.length-1]:null}},points:{get:function(){return this._9f&&this._ib&&this._ib.length?this._ib.concat(this._9f):void 0}}}),rr.DrawPathInteraction=ci,di.prototype={destroy:function(){T(this,di,"destroy",arguments),delete this.start,this._jp&&(clearTimeout(this._jp),delete this._jp)},doDraw:function(t,e){return this._ib?this._ib.length<=1?vi.prototype.doDraw.call(this,t,e):void T(this,di,"doDraw",arguments):void 0},ondblclick:function(t,e){this.destroy(e)},finish:function(t,e,i){var n;this._ib&&this._ib.length>=2&&(this._ib.shift(),n=new Qi,_(this._ib,function(t){if(rr.isArray(t)){var e=t[0],i=t[1];n.add(new kr(sr.SEGMENT_QUAD_TO,[e.x,e.y,i.x,i.y]))}else n.add(new kr(sr.SEGMENT_LINE_TO,[t.x,t.y]))},this)),e.createEdgeByInteraction(this.start,i,t,n),this.destroy(e)},_le3:function(t,e){return t instanceof ds&&e.canLinkFrom(t)},_dr:function(t,e){return t instanceof ds&&e.canLinkTo(t,this.start)},_8d:function(t,e){var i=e.getUI(t);return i&&i.bodyBounds?i.bodyBounds.center:t.location},onstart:function(t,e){if(this.start){var i=t.getData();return this._dr(i,e)?void this.finish(t,e,i):void this.addPoint(this.toLogicalPoint(t))}},startdrag:function(t,e){if(!this.start&&!t.responded){var i=t.getData();i&&this._le3(i,e)&&(t.responded=!0,this.start=i,this.addPoint(this._8d(i,e)))}},_lc6:function(t){this._jp&&(clearTimeout(this._jp),delete this._jp),this._jp=setTimeout(function(t){if(delete this._jp,this.start&&this.currentPoint){var e=t.x-this.currentPoint.x,i=t.y-this.currentPoint.y;Math.sqrt(e*e+i*i)*this.graph.scale<=2&&this.addPoint(this.currentPoint)}}.bind(this,this.toLogicalPoint(t)),Ji.LONG_PRESS_INTERVAL)},ondrag:function(t,e){this.onmousemove(t,e)},enddrag:function(t,e){if(this.start){var i=t.getData();this._dr(i,e)&&this.finish(t,e,i)}},onrelease:function(t,e){Yn(t)&&this.destroy(e)},onmousemove:function(t,e){this.start&&(this.currentPoint=this.toLogicalPoint(t),Yn(t)&&this._lc6(t,e))},toLogicalPoint:function(t){return this.graph.toLogical(t)},getDefaultDrawStyles:function(){return{lineWidth:this.graph.getDefaultStyle(ys.EDGE_WIDTH),strokeStyle:this.graph.getDefaultStyle(ys.EDGE_COLOR),lineDash:this.graph.getDefaultStyle(ys.EDGE_LINE_DASH),lineDashOffset:this.graph.getDefaultStyle(ys.EDGE_LINE_DASH_OFFSET),lineCap:this.graph.getDefaultStyle(ys.LINE_CAP),lineJoin:this.graph.getDefaultStyle(ys.LINE_JOIN)}}},p(di,ci),rr.CreateEdgeInteraction=di,fi.prototype={getDefaultDrawStyles:function(){return{lineWidth:this.graph.getDefaultStyle(ys.SHAPE_STROKE),strokeStyle:this.graph.getDefaultStyle(ys.SHAPE_STROKE_STYLE),fillStyle:this.graph.getDefaultStyle(ys.SHAPE_FILL_COLOR)}},finish:function(t,e){if(this._ib&&this._ib.length){var i=this._ib,n=0,r=0,s=0;i.forEach(function(t){return rr.isArray(t)?void t.forEach(function(){n+=t.x,r+=t.y,s++}):(n+=t.x,r+=t.y,void s++)}),n/=s,r/=s;var o=[];i.forEach(function(t,e){if(0!=e)if(rr.isArray(t)){var i=t[0],s=t[1];o.push(new kr(sr.SEGMENT_QUAD_TO,[i.x-n,i.y-r,s.x-n,s.y-r]))}else o.push(new kr(sr.SEGMENT_LINE_TO,[t.x-n,t.y-r]));else o.push(new kr(sr.SEGMENT_MOVE_TO,[t.x-n,t.y-r]))}),this.createElement(t,o,n,r),this.destroy(e)}},startdrag:function(t){t.responded=!0},createElement:function(t,e,i,n){return this.graph.createShapeByInteraction(t,e,i,n)},onstart:function(t,e){var i=e.toLogical(t);this._dp=i,this.addPoint(i)},onmousemove:function(t,e){this._dp&&(this.currentPoint=e.toLogical(t))},ondblclick:function(t,e){if(this._dp){if(this._ib.length<3)return void this.destroy(e);delete this._ib[this._ib.length-1],this.finish(t,e)}},isClosePath:!0},p(fi,ci),rr.CreateShapeInteraction=fi,gi.prototype={isClosePath:!1,createElement:function(t,e,i,n){return this.graph.createLineByInteraction(t,e,i,n)},getDefaultDrawStyles:function(){return{lineWidth:Ps[ys.SHAPE_STROKE],strokeStyle:Ps[ys.SHAPE_STROKE_STYLE],lineDash:this.graph.getDefaultStyle(ys.SHAPE_LINE_DASH),lineDashOffset:this.graph.getDefaultStyle(ys.SHAPE_LINE_DASH_OFFSET),lineCap:this.graph.getDefaultStyle(ys.LINE_CAP),lineJoin:this.graph.getDefaultStyle(ys.LINE_JOIN)}}},p(gi,fi),rr.CreateLineInteraction=gi,vi.prototype={destroy:function(t){T(this,vi,"destroy",arguments),t.cursor="",this.start=null},doDraw:function(t){if(this.start&&this.currentPoint){var e,i;this.graph.interactionProperties&&(e=this.graph.interactionProperties.uiClass,i=this.graph.interactionProperties.edgeType),e=e||this.graph.edgeUIClass||rr.EdgeUI,i=i||this.graph.edgeType;var n=e.drawReferenceLine||rr.EdgeUI.drawReferenceLine,r=this.graph.getUI(this.start);r&&r.bodyBounds&&(n(t,r=r.bodyBounds.center,this.currentPoint,i),this.styleDraw(t))}},canLinkFrom:function(t,e){return t instanceof ds&&e.canLinkFrom(t)},canLinkTo:function(t,e){return t instanceof ds&&e.canLinkTo(t,this.start)},startdrag:function(t,e){var i=t.getData();this.canLinkFrom(i,e)&&(t.responded=!0,this.start=i,e.cursor="crosshair",this.addDrawable())},ondrag:function(t,e){this.start&&(rr.stopEvent(t),this.currentPoint=e.toLogical(t),this.invalidate())},enddrag:function(t,e){if(this.start){this.invalidate();var i=t.getData();this.canLinkTo(i,e)&&e.createEdgeByInteraction(this.start,i,t),this.destroy(e)}},getDefaultDrawStyles:function(){return{lineWidth:this.graph.getDefaultStyle(ys.EDGE_WIDTH),strokeStyle:this.graph.getDefaultStyle(ys.EDGE_COLOR),lineDash:this.graph.getDefaultStyle(ys.EDGE_LINE_DASH),lineDashOffset:this.graph.getDefaultStyle(ys.EDGE_LINE_DASH_OFFSET),lineCap:this.graph.getDefaultStyle(ys.LINE_CAP),lineJoin:this.graph.getDefaultStyle(ys.LINE_JOIN)}}},p(vi,ci),rr.CreateSimpleEdgeInteraction=vi,Ji.LABEL_EDITOR_SUBMIT_WHEN_LOST_FOCUS=!1,Oi.prototype={html:null,createHTML:function(){var t=e.createElement("textarea");t.className="Q-LabelEditor",t.style.position="absolute",t.style.textAlign="center",t.style.border="solid #08E 1px",t.style.padding="5px",t.style.boxShadow="0px 0px 10px rgba(40, 85, 184, 0.75)",t.style.display="none",t.style.overflow="hidden";var i=this;return t.oninput=function(t){i.onValueChange(t)},t.onkeydown=function(t){return 27==t.keyCode?void i.cancelEdit():void 0},t.onkeypress=function(e){if(13==e.keyCode||10==e.keyCode){if(e.preventDefault(),e.altKey||e.ctrlKey||e.shiftKey)return Ti(t,"\n"),void i.onValueChange(e);i.stopEdit()}},e.body.appendChild(t),t},setText:function(t,e){this.html.value=t||"",e&&(this.html.style.fontSize=e),mi(this.html),this.onSizeChange(this.html)},onSizeChange:function(t){var e=(t.offsetWidth,t.offsetHeight,yi(t));return t.style.width=e.width+30+"px",t.style.height=e.height+10+"px",e},onValueChange:function(t){var e=t.target;this.onSizeChange(e),e.style.left=e.x-e.offsetWidth/2+"px"},onClickOnWindow:function(t){t.target!=this.html&&(Ji.LABEL_EDITOR_SUBMIT_WHEN_LOST_FOCUS?this.stopEdit():this.cancelEdit())},startEdit:function(e,i,n,r,s){this.html||(this.html=this.createHTML()),this.stopEditWhenClickOnWindow||(this.stopEditWhenClickOnWindow=function(t){this.onClickOnWindow(t)}.bind(this)),t.addEventListener("mousedown",this.stopEditWhenClickOnWindow,!0),this.callback=s,this.html.x=e,this.html.y=i,this.html.style.display="block",pi(this.html,e,i),this.setText(n,r||10),pi(this.html,e,i)},isEditing:function(){return"none"!=this.html.style.display},cancelEdit:function(){this.stopEdit(!0)},stopEdit:function(e){if(this.isEditing()){t.removeEventListener("mousedown",this.stopEditWhenClickOnWindow);var i=this.html.value;if(!e&&this.callback&&!1===this.callback(i))return!1;this.html.style.display="none",this.html.value=null,this.callback=null}},destroy:function(){this.html&&e.body.removeChild(this.html)}},rr.LabelEditor=Oi;var $s=function(t){this.graph=t};$s.prototype={destroy:function(t){t.labelEditor&&(t.labelEditor.destroy(),delete t.labelEditor)},ondblclick:function(t,e){var i=t.getData();if(i){if(!1!==i.dblclickable){if(e.editable&&e.isEditable(i)){var n=e.hitTest(t);if(n instanceof Rs&&!1!==n.editable){var r=e.labelEditor;r||(e.labelEditor=r=new Oi);var s=n.getBounds();return s=Ei((s=e.toCanvas(s.x+s.width/2,s.y+s.height/2)).x,s.y,e.html),void e.startLabelEdit(i,n,r,s)}}var o=i instanceof vs,a=i instanceof cs&&i.hasEdgeBundle();return i._3o&&(st(t)||!o&&!a)?void(e.currentSubNetwork=i):o?(i.expanded=!i.expanded,void this.graph.onInteractionEvent(new xi(this.graph,xi.GROUP_EXPANDED,t,i))):void(a&&this.graph.reverseExpanded(i)&&this.graph.onInteractionEvent(new xi(this.graph,xi.EDGE_BUNDLE,t,i)))}}else{if(e.currentSubNetwork)return void e.upSubNetwork();if(e.enableDoubleClickToOverview){var h=e.resetScale||1;Math.abs(e.scale-h)<1e-4?e.zoomToOverview():e.moveToCenter(h)}}}};var js=function(t){this.graph=t};js.prototype={onkeydown:function(t,e){if(e.editable){var i=t.keyCode;if(8==i||46==i||127==i)return e.removeSelectionByInteraction(t),void P(t);if(st(t)){if(67==i);else if(86==i);else if(90==i);else if(89!=i)return;P(t)}}}},rr.EditInteraction=js;var zs=function(t){this.graph=t};zs.prototype={onkeydown:function(e,i){if(e.metaKey&&83==e.keyCode){var n=i.exportImage(i.scale,i.viewportBounds),r=t.open().document;r.title="export image - "+n.width+" x "+n.height;var s=r.createElement("img");s.src=n.data,r.body.appendChild(s),P(e)}}};var Ys=function(t){this.graph=t};Ys.prototype={destroy:function(){delete this.draggingElements,delete this.currentDraggingElement},_1v:function(t){var e=new Qi;return t.selectionModel.forEach(function(i){t.isMovable(i)&&t.isVisible(i)&&e.add(i)},this),e},onstart:function(t,e){this.currentDraggingElement&&this.destroy(e)},startdrag:function(t,e){if(!(t.responded||t.touches&&1!=t.touches.length)){var i=t.getData();if(!i||!e.isSelected(i)||!e.isMovable(i))return void this.destroy(e);t.responded=!0,this.currentDraggingElement=i,this.draggingElements=this._1v(e);var n=new xi(e,xi.ELEMENT_MOVE_START,t,this.currentDraggingElement,this.draggingElements.datas);return!1===e.beforeInteractionEvent(n)?void this.destroy(e):void e.onInteractionEvent(n)}},ondrag:function(t,e){if(this.currentDraggingElement){if(t.touches&&1!=t.touches.length)return void this.enddrag(t,e);M(t);var i=t.dx,n=t.dy,r=e.scale;i/=r,n/=r;var s=new xi(e,xi.ELEMENT_MOVING,t,this.currentDraggingElement,this.draggingElements.datas);e.moveElements(this.draggingElements.datas,i,n),e.onInteractionEvent(s)}},enddrag:function(t,e){if(this.currentDraggingElement){if(this.draggingElements&&this.draggingElements.length){if(t.shiftKey){var i,n=e.toLogical(t),r=n.x,s=n.y;e.forEachReverseVisibleUI(function(t){var e=t.data;if(!this.draggingElements.contains(e)&&t.uiBounds.intersectsPoint(r-t.x,s-t.y)&&t.hitTest(r,s,1)){if(e instanceof rr.Edge){if(!e.enableSubNetwork)return;for(var n=this.draggingElements.length;n-- >0;){var o=this.draggingElements.get(n);if(o instanceof rr.Node&&o.linkedWith(e))return}return i=e,!1}return(e.enableSubNetwork||e._gy()&&e.expanded)&&(i=e),!1}},this),i&&this.draggingElements.forEach(function(t){for(var e=t.parent;e;){if(this.draggingElements.contains(e))return;e=e.parent}t.parent=i},this)}var o=new xi(e,xi.ELEMENT_MOVE_END,t,this.currentDraggingElement,this.draggingElements.datas);e.onInteractionEvent(o)}this.destroy(e)}},onpinch:function(t,e){this.currentDraggingElement&&this.enddrag(t,e)},step:1,onkeydown:function(t,e){var i,n;if(st(t)&&(37==t.keyCode?i=-1:39==t.keyCode?i=1:38==t.keyCode?n=-1:40==t.keyCode&&(n=1),i||n)){var r=this._1v(e).datas;if(0!=r.length){P(t),i=i||0,n=n||0;var s=this.step/e.scale,o=new xi(e,xi.ELEMENT_MOVE_END,t,null,r);e.moveElements(r,i*s,n*s),e.onInteractionEvent(o)}}}};var Hs=function(t){this.graph=t};Hs.prototype={onkeydown:function(t,e){st(t)||(37==t.keyCode?(this._5e(e,1,0),P(t)):39==t.keyCode?(this._5e(e,-1,0),P(t)):38==t.keyCode?(this._5e(e,0,1),P(t)):40==t.keyCode&&(this._5e(e,0,-1),P(t)))},_5e:function(t,e,i){t._9h(e,i)},onstart:function(t,e){this._jo&&this.destroy(e)},_jo:!1,startdrag:function(t,e){if(!t.responded){t.responded=!0,this._jo=!0,e.cursor=kn;var i=new xi(e,xi.PAN_START,t);e.onInteractionEvent(i)}},ondrag:function(t,e){this._jo&&e.translate(t.dx||0,t.dy||0)},enddrag:function(t,e){if(this._jo){if(!1!==e.enableInertia){var i=t.vx,n=t.vy;(Math.abs(i)>.1||Math.abs(n)>.1)&&e._9h(i,n)}this.destroy(e);var r=new xi(e,xi.PAN_END,t);e.onInteractionEvent(r)}},startpinch:function(t,e){e.pauseRendering(!0)},onpinch:function(t,e){this._jo=!0;var i=t.dScale;if(i){var n=e.globalToLocal(t.center);e.zoomAt(i,n.x,n.y,!1)}},endpinch:function(t,e){e.pauseRendering(!1)},destroy:function(t){this._jo=!1,t.cursor=null}},wi.prototype={_1f:function(t){this.element&&t.source==this.element&&this.graph.callLater(function(){this._is()},this)},_4:function(){this._k7PropertyChangeListing||(this._k7PropertyChangeListing=!0,this.graph.dataPropertyChangeDispatcher.addListener(this._1f,this))},_3:function(){this._k7PropertyChangeListing=!1,this.graph.dataPropertyChangeDispatcher.removeListener(this._1f,this)},onElementRemoved:function(t,e){this.element&&(t==this.element||Array.isArray(t)&&v(t,this.element))&&this.destroy(e)},onClear:function(t){this.element&&this.destroy(t)},destroy:function(){this.graph.cursor=null,this.element&&delete this.element._editting,this._mousePressed=!1,delete this.element,delete this._9c,delete this._9f,delete this._lcanEdit,this._61(),this._3()},_61:function(){this.drawLineId&&(this.topCanvas.removeDrawable(this.drawLineId),delete this.drawLineId,this.topCanvas.invalidate())},_le4:function(){this.drawLineId&&this.topCanvas.contains(this.drawLineId)||(this.drawLineId=this.topCanvas.addDrawable(this.drawLine,this).id,this.topCanvas.invalidate())},_9c:null,_5d:function(t){this._9c=t,this.invalidate()},isEndPointEditable:function(t,e){return this.graph.isEndPointEditable(t,e)},drawPoint:function(t,e,i){(!e.isEndPoint||this.isEndPointEditable(this.element,e.isFrom))&&(t.beginPath(),e.isControlPoint?t.rect(e.x-this.handlerSize/i,e.y-this.handlerSize/i,this.handlerSize/i*2,this.handlerSize/i*2):t.arc(e.x,e.y,this.handlerSize/i,0,2*Math.PI,!1),t.lineWidth=1/i,t.lineDash=[],t.strokeStyle="#888",t.fillStyle="rgba(255, 255, 0, 0.8)",t.stroke(),t.fill())},_f2:function(t,e,i,n){n?t.moveTo(e,i):t.lineTo(e,i)},drawLine:function(t,e){if(this._9c&&this._9c.length){var i=this._9c;t.save(),this.element instanceof fs&&(t.translate(this.element.x,this.element.y),this.element.rotate&&t.rotate(this.element.rotate));var n,r=[];t.beginPath();var s=i.length;i.forEach(function(e,i){if(e.type!=sr.SEGMENT_CLOSE)for(var o=!i||i==s-1,a=0,h=e.points;a+1<h.length;){var l={x:h[a],y:h[a+1],isControlPoint:this._6r(e,a)};o&&(l.isEndPoint=!0,l.isFrom=0==i),r.push(l),this._f2(t,l.x,l.y,null==n),n=l,a+=2}},this),t.lineWidth=1/e,t.lineDash=[2/e,3/e],t.strokeStyle="#555",t.stroke(),r.forEach(function(i,n){this.drawPoint(t,i,e,n)},this),t.restore()}},invalidate:function(){this.topCanvas.invalidate()},_32:function(t){if(this.element!=t&&(this.element&&this.destroy(),t&&this.isEditable(t))){var e=this._5b(t,this.graph);e&&(this.element=t,t._editting=!0,this._lcanEdit=!0,this._5d(e),this._4(),this._le4())}},_is:function(){if(this.drawLineId&&this.element){var t=this._5b(this.element,this.graph);return t?void this._5d(t):void this.destroy(this.graph)}},_5b:function(t,e){if(e.isEditable(t)){var i=t.pathSegments||[];i instanceof Qi&&(i=i.toDatas());var n=e.getUI(t);if(n instanceof rr.EdgeUI){var r=n.getEndPointBounds(e.getUI(t.fromAgent)),s=n.getEndPointBounds(e.getUI(t.toAgent)),o=r.center,a=s.center,h=n.getStyle(ys.EDGE_FROM_OFFSET),l=n.getStyle(ys.EDGE_TO_OFFSET);h&&(o.x+=h.x||0,o.y+=h.y||0),l&&(a.x+=l.x||0,a.y+=l.y||0),i.splice(0,0,new rr.PathSegment(sr.SEGMENT_MOVE_TO,[o.x,o.y])),i.push(new rr.PathSegment(sr.SEGMENT_MOVE_TO,[a.x,a.y]))}return i}},_gx:function(t,e){var i={x:t-=this.element.x,y:e-=this.element.y};return this.element.rotate&&He(i,-this.element.rotate),i},onclick:function(t,e){if(e.editable&&t.altKey&&this.element){var i=this._ez(t,e);if(i&&i.isControlPoint)return void(i.index>=0&&this.element.removePathSegmentByIndex(i.index));if(this.element==t.getData()){var n=e.toLogical(t);e.getUI(this.element).addPoint(n.x,n.y,this.handlerSize||2)}}},isEditable:function(t){return this.graph.isEditable(t)&&(t instanceof fs||t instanceof cs&&(!t.isLooped()||t.hasPathSegments()))},ondblclick:function(t,e){if(e.editable){var i=t.getData();return!i||i==this.element||i._editting?void this.destroy(e):void this._32(i)}this.element&&this.destroy(e)},onstart:function(t,e){if(this._mousePressed=!0,e.editable){if(!t.responded){if(this.element&&this._ez(t,e))return void(t.responded=!0);var i=t.getData();return i&&e.isResizable(i)&&i instanceof fs?void(this.element&&i!=this.element&&this.destroy()):void this._32(i)}}else this.element&&this.destroy(e)},onrelease:function(){this._mousePressed=!1,this.element&&(this._lcanEdit=!0)},_9f:null,_ez:function(t,e){var i=e.toLogical(t);this.element instanceof fs&&(i=this._gx(i.x,i.y));var n,r=e.scale,s=this.handlerSize/r,o=this._9c,a=o.length,h=this.element instanceof rr.Edge;return o.forEach(function(t,r){for(var l=0,_=t.points;l+1<_.length;){var u=_[l],c=_[l+1],d=nn(i.x,i.y,u,c);if(s>d){if(n={oldPoints:_.slice(0),segment:t,index:r,pointIndex:l},h&&(n.index-=1),h&&!bi(t)&&(0==r||r==o.length-1)){n.isEndPoint=!0;var f=0==r;n.isFrom=f;var g=f?rr.Styles.EDGE_FROM_OFFSET:rr.Styles.EDGE_TO_OFFSET,v=e.getStyle(this.element,g)||{};n.oldPoints=[v.x||0,v.y||0]}return this._6r(t,l)&&(n.isControlPoint=!0,r>0&&(n.prevSegment=o instanceof Qi?o.getByIndex(r-1):o[r-1]),a>r+1&&(n.nextSegment=o instanceof Qi?o.getByIndex(r+1):o[r+1],n.nextSegment.points&&(n.oldNextPoints=n.nextSegment.points.slice(0)))),!1}l+=2}},this),n&&n.isEndPoint&&!this.isEndPointEditable(this.element,n.isFrom)?void 0:n},_6r:function(t,e){return e==t.points.length-2},startdrag:function(t,e){if(this.element&&this._lcanEdit&&(this._9f=this._ez(t,e),this._9f)){this._61(),t.responded=!0;var i=new xi(e,xi.POINT_MOVE_START,t,this.element);i.point=this._9f,e.onInteractionEvent(i)}},onkeyup:function(t,e){this._mousePressed&&16!=!t.keyCode&&this.element&&this._9f&&this._9f.delta&&this._lc2(this._9f.delta.x,this._9f.delta.y,e,t,!1)},onkeydown:function(t,e){this._mousePressed&&this.element&&this._9f&&t.shiftKey&&this._9f.delta&&this._lc2(this._9f.delta.x,this._9f.delta.y,e,t,!0)},_lc2:function(t,e,i,n,r){var s=this._9f,o=this.element,a=s.oldPoints,h=s.segment;if(s.isEndPoint){var l,_=s.isFrom?rr.Styles.EDGE_FROM_OFFSET:rr.Styles.EDGE_TO_OFFSET,u={x:a[0]+t,y:a[1]+e};return o.setStyle(_,u),(l=new xi(i,xi.POINT_MOVING,n,o)).point=s,void i.onInteractionEvent(l)}if(r&&s.isControlPoint){var c={x:a[a.length-2]+t,y:a[a.length-1]+e},d=s.prevSegment,f=s.nextSegment,g=20/i.scale,v=Number.MAX_VALUE,E=v,p=v,y=v;d&&(d=d.lastPoint,v=Math.abs(c.x-d.x),p=Math.abs(c.y-d.y)),f&&(f=f.lastPoint,E=Math.abs(c.x-f.x),y=Math.abs(c.y-f.y)),g>v&&E>v?t+=d.x-c.x:g>E&&v>E&&(t+=f.x-c.x),g>p&&y>p?e+=d.y-c.y:g>y&&p>y&&(e+=f.y-c.y)}if(s.isControlPoint&&bi(h)){for(var T=h.points.length-4;T<h.points.length;){var m=a[T]+t,O=a[T+1]+e;h.points[T]=m,h.points[T+1]=O,T+=2}if(s.nextSegment&&bi(s.nextSegment)){var w=s.oldNextPoints;m=w[0]+t,O=w[1]+e;s.nextSegment.points[0]=m,s.nextSegment.points[1]=O}}else{m=a[T=s.pointIndex]+t,O=a[T+1]+e;h.points[T]=m,h.points[T+1]=O}o.firePathChange(),(l=new xi(i,xi.POINT_MOVING,n,o)).point=s,i.onInteractionEvent(l)},ondrag:function(t,e){if(this.element&&this._9f){var i=this._9f,n=this.element,r=t.totalDeltaX,s=t.totalDeltaY,o=e.scale;if(r/=o,s/=o,n.rotate){var a={x:r,y:s};He(a,-n.rotate),r=a.x,s=a.y}i.delta={x:r,y:s},this._lc2(r,s,e,t,t.shiftKey)}},enddrag:function(t,e){if(this.element&&this._9f){this._le4(),this._is();var i=new xi(e,xi.POINT_MOVE_END,t,this.element);i.point=this._9f,e.onInteractionEvent(i)}},onmousemove:function(t,e){this.element&&(e.cursor=t.altKey&&(this._ez(t,e)||this.element==t.getData())?"crosshair":null)}},Ji.SELECTION_RECTANGLE_STROKE=1,Ji.SELECTION_RECTANGLE_STROKE_COLOR=F(3724541951),Ji.SELECTION_RECTANGLE_FILL_COLOR=F(1430753245),sr.RECTANGLE_SELECTION_MODE_INTERSECT="intersect",sr.RECTANGLE_SELECTION_MODE_CONTAIN="contain",Ji.RECTANGLE_SELECTION_MODE=sr.RECTANGLE_SELECTION_MODE_INTERSECT;var Us=function(t){this.graph=t,this.topCanvas=t.topCanvas};Us.prototype={onstart:function(t,e){this._jo&&this.destroy(e)},startdrag:function(t,e){t.responded||(t.responded=!0,this._jo=e.toLogical(t),e.cursor="crosshair",this._$wId=this.topCanvas.addDrawable(this._$w,this).id)},ondrag:function(t,e){if(this._jo){M(t),this._end=e.toLogical(t),this.invalidate();var i=new xi(e,xi.SELECT_START,t,e.selectionModel);e.onInteractionEvent(i)}},enddrag:function(t,e){if(this._jo){this._emTimer&&(clearTimeout(this._emTimer),this._emTimer=null),this._em(!0),this.destroy(e);var i=new xi(e,xi.SELECT_END,t,e.selectionModel);e.onInteractionEvent(i)}},onpinch:function(t,e){this._jo&&this.enddrag(t,e)},_$w:function(t,e){t.strokeStyle=Ji.SELECTION_RECTANGLE_STROKE_COLOR,t.fillStyle=Ji.SELECTION_RECTANGLE_FILL_COLOR,t.lineWidth=Ji.SELECTION_RECTANGLE_STROKE/e;var i=this._jo.x,n=this._jo.y;t.rect(i,n,this._end.x-i,this._end.y-n),t.fill(),t.stroke()},invalidate:function(){return this.invalidateFlag?void this.topCanvas.invalidate():(this.invalidateFlag=!0,void(this._emTimer=setTimeout(this._em.bind(this),100)))},_em:function(t){if(this.invalidateFlag=!1,this._emTimer=null,!this._jo||$i&&!t)this.topCanvas.invalidate();else{var e=Math.min(this._jo.x,this._end.x),i=Math.min(this._jo.y,this._end.y),n=Math.abs(this._jo.x-this._end.x),r=Math.abs(this._jo.y-this._end.y);if(n&&r){var s=[],o=this.graph.scale,a=this.graph.rectangleSelectionMode;if(this.graph.forEachVisibleUI(function(t){t._h0&&this.graph.isSelectable(t.$data)&&this.inRectangle(e,i,n,r,t,o,a)&&s.push(t.data)}.bind(this)),this.graph.selectionModel.set(s),this.topCanvas.invalidate(),!t){var h=new xi(this.graph,xi.SELECT_BETWEEN,null,this.graph.selectionModel);this.graph.onInteractionEvent(h)}}else this.graph.selectionModel.clear()}},inRectangle:function(t,e,i,n,r,s,o){var a=r.getBounds();return!!K(t,e,i,n,a.x,a.y,a.width,a.height)||(o=o||Ji.RECTANGLE_SELECTION_MODE)!=sr.RECTANGLE_SELECTION_MODE_CONTAIN&&function(t,e,i,n,r,s){t-=r.$x,e-=r.$y;var o=r._f3.intersection(t,e,i,n);if(!o)return!1;t=o.x*s,e=o.y*s,i=o.width*s,n=o.height*s,i=Math.round(i)||1,n=Math.round(n)||1;var a=gt(),h=a.canvas;h.width<i||h.height<n?(h.width=i,h.height=n):(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,i,n)),a.setTransform(1,0,0,1,-t-r.$x*s,-e-r.$y*s),a.scale(s,s),r._ix(a,1);var l=Et(a,0,0,i,n);if(!l)return!1;for(var _=(l=l.data).length/4;_-- >0;)if(l[4*_-1]>Gr)return!0;return!1}(t,e,i,n,r,s)},destroy:function(t){this._jo=null,t.cursor=null,this._$wId&&(this.topCanvas.removeDrawable(this._$wId),delete this._$wId,this.topCanvas.invalidate())}};var Ws=b({super:Us,onstart:null,startdrag:null,ondrag:null,enddrag:null,accept:function(t,e,i){return!1!==i.enableRectangleSelectionByRightButton},oncontextmenu:function(t,e){e.popupmenu||M(t)},onstart2:function(){Us.prototype.onstart.apply(this,arguments)},startdrag2:function(t,e){t.responded||(e.popupmenu&&e.popupmenu.hide instanceof Function&&e.popupmenu.hide(),Us.prototype.startdrag.apply(this,arguments))},ondrag2:function(){Us.prototype.ondrag.apply(this,arguments)},enddrag2:function(){Us.prototype.enddrag.apply(this,arguments)}});Fs=Math.PI/4;Li.prototype={_dn:!1,_dl:!1,_1f:function(t){this.element&&t.source==this.element&&this.graph.callLater(function(){this._9q()},this)},_4:function(){this._k7PropertyChangeListing||(this._k7PropertyChangeListing=!0,this.graph.dataPropertyChangeDispatcher.addListener(this._1f,this))},_3:function(){this._k7PropertyChangeListing=!1,this.graph.dataPropertyChangeDispatcher.removeListener(this._1f,this)},onElementRemoved:function(t,e){this.element&&(t==this.element||Array.isArray(t)&&v(t,this.element))&&this.destroy(e)},onClear:function(t){this.element&&this.destroy(t)},ondblclick:function(t,e){this.element&&this.destroy(e)},destroy:function(t){t.cursor=null,delete this.element,delete this._lez,delete this._leody,delete this._9f,delete this._lcanEdit,delete this._ib,delete this._rotatePoint,delete this._dl,delete this._dn,delete this._insets,this._61(),this._3()},_61:function(){this._f2Id&&(this.topCanvas.removeDrawable(this._f2Id),delete this._f2Id,this.topCanvas.invalidate())},_le4:function(){this._f2Id&&this.topCanvas.contains(this._f2Id)||(this._f2Id=this.topCanvas.addDrawable(this._f2,this).id,this.topCanvas.invalidate())},_lez:null,_ib:null,_8a:function(t){this._lez=t;var e=this._lez.x,i=this._lez.y,n=this._lez.width,r=this._lez.height;if(this.element instanceof vs&&this.element.expanded,this._dl){var s=[];s.push({x:e,y:i,p:hn.LEFT_TOP,cursor:"nwse-resize",rotate:5*Fs}),s.push({x:e+n/2,y:i,p:hn.CENTER_TOP,cursor:"ns-resize",rotate:6*Fs}),s.push({x:e+n,y:i,p:hn.RIGHT_TOP,cursor:"nesw-resize",rotate:7*Fs}),s.push({x:e,y:i+r/2,p:hn.LEFT_MIDDLE,cursor:"ew-resize",rotate:4*Fs}),s.push({x:e,y:i+r,p:hn.LEFT_BOTTOM,cursor:"nesw-resize",rotate:3*Fs}),s.push({x:e+n,y:i+r/2,p:hn.RIGHT_MIDDLE,cursor:"ew-resize",rotate:0}),s.push({x:e+n/2,y:i+r,p:hn.CENTER_BOTTOM,cursor:"ns-resize",rotate:2*Fs}),s.push({x:e+n,y:i+r,p:hn.RIGHT_BOTTOM,cursor:"nwse-resize",rotate:Fs}),this._ib=s}this._rotatePoint=this._dn?{x:e+n/2,y:i,cursor:"url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFVJREFUeNpi/P//PwMlgBGfAYyMIOn/jGQZANIMoskyAKYZGeAyiGgX4PIOSWGAzRBGUmMBw1CqGUBMlA1yA4gxhKhYwBnfpKQDqqREquRGYgBAgAEAD8h/4adTIzwAAAAASUVORK5CYII=) 8 8,crosshair"}:null,this._let()},_dh:function(t,e,i,n){t.beginPath();var r=(this.handlerSize-1)/n;t.rect(e-r,i-r,2*r,2*r),t.lineWidth=1/n,t.lineDash=[],t.strokeStyle="#888",t.fillStyle="rgba(255, 255, 255, 0.8)",t.stroke(),t.fill()},_50:function(t,e,i,n,r,s){r=r||this.handlerSize,s=s||"rgba(0, 255, 0, 1)",t.beginPath(),r/=n,t.arc(e,i,r,0,2*Math.PI,!1),t.lineWidth=1/n,t.lineDash=[],t.strokeStyle="#888",t.fillStyle=s,t.stroke(),t.fill()},_gx:function(t,e){var i={x:t-=this.element.x,y:e-=this.element.y};return this.element.rotate&&He(i,-this.element.rotate),i},_f2:function(t,e){if(this._lez){if(t.save(),t.translate(this.element.x,this.element.y),this.element.rotate&&t.rotate(this.element.rotate),this._rotatePoint){this._50(t,0,0,e,3,"#FF0");var i=this._rotatePoint.x,n=this._rotatePoint.y-this._rotateHandleLength/e;t.beginPath(),t.moveTo(i,this._rotatePoint.y),t.lineTo(i,n),t.lineWidth=1/e,t.strokeStyle="#555",t.stroke(),this._50(t,i,n,e)}if(this._ib){var r=this._lez.x,s=this._lez.y,o=this._lez.width,a=this._lez.height;t.beginPath(),t.rect(r,s,o,a),t.lineWidth=1/e,t.lineDash=[2/e,3/e],t.strokeStyle="#555",t.stroke(),_(this._ib,function(i){this._dh(t,i.x,i.y,e)},this)}t.restore()}},_let:function(){this.topCanvas.invalidate()},_32:function(t,e,i,n){this.element=t,this._le4(),this._dl=i,this._dn=n,this._9q(),this._4()},_9q:function(){if(this._f2Id&&this.element){var t=this.graph.getUI(this.element);this._leody=t.body;var e=Ai(this._leody,this._leody._ij),i=Ai(this._leody,this._leody._7d);this._insets=new an(e.y-i.y,e.x-i.x,i.bottom-e.bottom,i.right-e.right),this._8a(i)}},_lea:function(t,e){return e.isResizable(t)},_lec:function(t,e){return!(t instanceof vs&&t.expanded||!e.isRotatable(t))},_lev:function(t,e){return t instanceof ds&&e.isEditable(t)},onstart:function(t,e){if(e.editable){if(!t.responded){var i=e.getUI(t),n=t.getData();if(n!=this.element){if(this.element){if(this._ez(t,e))return void(t.responded=!0);this.destroy(e)}if(n&&!n._editting&&this._lev(n,e)){var r=this._lea(n,e,i),s=this._lec(n,e,i);(r||s)&&this._32(n,e,r,s)}}}}else this.element&&this.destroy(e)},onrelease:function(t,e){this.element&&(this._lcanEdit=!0,this._le4(),e.callLater(function(){this._9q()},this))},_9f:null,_ez:function(t,e){var i=e.toLogical(t);i=this._gx(i.x,i.y);var n,r=e.scale,s=this.handlerSize/r;if(this._rotatePoint){var o=this._rotatePoint.x,a=this._rotatePoint.y-this._rotateHandleLength/r;if(nn(i.x,i.y,o,a)<s)return this._rotatePoint}if(this._ib&&this._ib.length)return _(this._ib,function(t){return nn(i.x,i.y,t.x,t.y)<s?(n=t,!1):void 0},this),n},onmousemove:function(t,e){if(this.element){var i=this._ez(t,e);if(!i)return void(e.cursor=null);if(i!=this._rotatePoint&&this.element.rotate){var n=i.rotate+this.element.rotate;return void(e.cursor=function(t){t%=2*Math.PI;var e=Math.round(t/Fs);return 0==e||4==e?"ew-resize":1==e||5==e?"nwse-resize":2==e||6==e?"ns-resize":"nesw-resize"}(n))}e.cursor=i.cursor}},startdrag:function(t,e){if(this.element&&(this._61(),this._lcanEdit&&(this._9f=this._ez(t,e),this._9f))){if(t.responded=!0,this._9f==this._rotatePoint)return this._9f.start=e.toLogical(t),void(this._9f.rotate=this.element.rotate||0);var i=new xi(e,xi.RESIZE_START,t,this.element);i.point=this._9f,e.onInteractionEvent(i)}},_5t:function(t,e,i,n,r,s){var o=this._lez,a=o.x,h=o.y,l=o.width,_=o.height;s&&(n!=l?r=n*_/l:n=r*l/_);var u=t.path.segments,c=n/l,d=r/_,f=-a*c+e,g=-h*d+i;u.forEach(function(t){if(t.type!=sr.SEGMENT_CLOSE){var n=t.points;if(n&&n.length)for(var r=0,s=n.length;s>r;r+=2){var o=n[r],l=n[r+1];n[r]=(o-a)*c+e-f,n[r+1]=(l-h)*d+i-g}}}),this._lez.set(e-f,i-g,n,r),t.setLocation(t.x+f,t.y+g),t.firePathChange()},_9t:function(t,e,i,n,r){this._lez.set(e,i,n,r),t.minSize={x:e,y:i,width:n,height:r}},_49:function(t,e,i,n,r){if(this.element instanceof vs)return this._9t(this.element,t,e,i,n,r);if(this.element instanceof fs)return this._5t(this.element,t,e,i,n,r);var s=this._leody instanceof Rs;if(!s&&r){var o=this._lez,a=this._leody.originalBounds;i!=o.width?n=i*a.height/a.width:i=n*a.width/a.height}var h=this.element.anchorPosition,l=new sn(i-this._insets.left-this._insets.right,n-this._insets.top-this._insets.bottom);if(l.width<1&&(i=this._insets.left+this._insets.right+1,l.width=1),l.height<1&&(n=this._insets.top+this._insets.bottom+1,l.height=1),s?this.element.setStyle(ys.LABEL_SIZE,l):this.element.size=l,h){var _=(c=Z(h,i,n)).x+t-(this._leody.offsetX||0),u=c.y+e-(this._leody.offsetY||0);if(this._lez.set(t-_,e-u,i,n),this.element.rotate)_=(c=He({x:_,y:u},this.element.rotate)).x,u=c.y;this.element.x+=_,this.element.y+=u}else{var c;_=this._lez.x*i/this._lez.width-t,u=this._lez.y*n/this._lez.height-e;if(this._lez.set(t+_,e+u,i,n),this.element.rotate)_=(c=He({x:_,y:u},this.element.rotate)).x,u=c.y;this.element.x-=_,this.element.y-=u}},ondrag:function(t,e){if(this.element&&this._9f)if(this._9f!=this._rotatePoint){var i=t.dx,n=t.dy,r=e.scale;if(i/=r,n/=r,this.element.rotate)He(u={x:i,y:n},-this.element.rotate),i=u.x,n=u.y;var s=this._9f.p,o=this._lez,a=o.x,h=o.y,l=o.width,_=o.height;s.horizontalPosition==ln?i>=l?(a+=l,l=i-l||1):(a+=i,l-=i):s.horizontalPosition==un&&(-i>=l?a-=l=-i-l||1:l+=i),s.verticalPosition==cn?n>=_?(h+=_,_=n-_||1):(h+=n,_-=n):s.verticalPosition==fn&&(-n>=_?h-=_=-n-_||1:_+=n),this._49(a,h,l,_,t.shiftKey),(d=new xi(e,xi.RESIZING,t,this.element)).point=this._9f,e.onInteractionEvent(d)}else{var u,c=function(t,e,i,n,r,s,o){var a=Mt(i,n,t,e)-Mt(i,n,r,s);return o?a:(0>a&&(a=-a),a>Math.PI&&(a-=Math.PI),a)}((u=e.toLogical(t)).x,u.y,this.element.x,this.element.y,this._9f.start.x,this._9f.start.y,!0);c+=this._9f.rotate||0,t.shiftKey&&(c=Math.round(c/Math.PI*4)*Math.PI/4),this.element.rotate=c%(2*Math.PI);var d=new xi(e,xi.ROTATING,t,this.element)}},enddrag:function(t,e){if(this.element&&this._9f&&this._9f!=this._rotatePoint){var i=new xi(e,xi.RESIZE_END,t,this.element);i.point=this._9f,e.onInteractionEvent(i)}}},rr.ResizeInteraction=Li;var Vs=function(t){this.graph=t};Vs.prototype={onstart2:function(t,e){this.onstart(t,e)},onstart:function(t,e){if(!t.responded){var i=t.getData();if(i&&!e.isSelectable(i)&&(i=null),i&&st(t)){e.reverseSelect(i);var n=new xi(e,xi.SELECT,t,e.selectionModel);return void e.onInteractionEvent(n)}if(!i||!e.selectionModel.isSelected(i)){i?(e.setSelection(i),e.sendToTop(i)):e.setSelection(null);n=new xi(e,xi.SELECT,t,e.selectionModel);e.onInteractionEvent(n)}}},onkeydown:function(t,e){return 27==t.keyCode?void e.unSelectAll():void(st(t)&&65==t.keyCode&&(e.selectAll(),P(t)))}},Ji.TOOLTIP_DURATION=3e3,Ji.TOOLTIP_DELAY=1e3,Si.CLASS_NAME="Q-Tooltip",Si.CURSOR_OFFSET_X=0,Si.CURSOR_OFFSET_Y=15,it("."+Si.CLASS_NAME,{"user-select":"none","background-color":"#FFFFCA",overflow:"hidden","box-shadow":"0 5px 10px rgba(136, 136, 136, 0.5)",color:"#000","pointer-events":"none",border:"1px solid #D9D9D9",padding:"2px 4px",display:"block",position:"absolute"}),Si.getInstance=function(){var t=Si.instance;return t||(t=Si.instance=new Si),t},Si.show=function(t,e,i){Si.getInstance().show(t,e,i)},Si.hide=function(){Si.getInstance().hide()},Si.prototype={getTooltipElement:function(){var t=this._ko;return t||((t=e.createElement("div")).className=Si.CLASS_NAME,this._ko=t,e.body.appendChild(t)),t},update:function(t,e){if(this.isShowing()){var i="text"==e;t&&!i&&(t=t.replace(/\n/g,"<br>"));var n=this.getTooltipElement();i?n.textContent=t||"":n.innerHTML=t||"",Ii(n,this._info.x+Si.CURSOR_OFFSET_X,this._info.y+Si.CURSOR_OFFSET_Y)}},setTooltip:function(t,e){if(!t||!t.content)return this._info=null,this._ko&&(this._ko.style.display="none"),void(this._8c=Date.now());this._8c=null,this._info=t,this.getTooltipElement().style.display="",this.update(this._info.content,this._info.type),isNaN(e)&&(e=Ji.TOOLTIP_DURATION),e&&this.startTimer(this.setTooltip.bind(this,!1),e)},_8c:null,_jp:null,stopTimer:function(){this._jp&&(clearTimeout(this._jp),this._jp=null)},startTimer:function(t,e){this.stopTimer(),this._jp=setTimeout(function(t){this._jp=null,t()}.bind(this,t),e)},show:function(t,e,i){return this.isShowing()||this._8c&&Date.now()-this._8c<1e3?void this.setTooltip(t,i):(isNaN(e)&&(e=Ji.TOOLTIP_DELAY),void(e?this.startTimer(this.setTooltip.bind(this,t,i),e):this.setTooltip(t,i)))},isShowing:function(){return this._ko&&"none"!==this._ko.style.display},hide:function(){this.stopTimer(),this.isShowing()&&this.setTooltip(!1)}};var Xs=function(t){this.graph=t};Xs.prototype={onstart:function(t,e){this.destroy(e)},_hg:null,onmousemove:function(t,e){if(e.enableTooltip){var i=t.getData(),n=i?e.getTooltip(i):null;return n?void Si.show({target:i,content:n,type:i.tooltipType,x:t.pageX,y:t.pageY},e.tooltipDelay,e.tooltipDuration):void Si.hide()}},destroy:function(){Si.hide()}};var qs=function(t){this.graph=t};qs.prototype={_em:function(){delete this._jp},destroy:function(t){this._jp&&this._em(t)},onmousewheel:function(t,e){if(!1!==e.enableWheelZoom&&t.delta){var i=t.delta>0,n=e.scale;if(!(i&&e.maxScale-n<1e-4||!i&&n-e.minScale<1e-4)){M(t);var r=Math.sqrt(Math.abs(t.delta));i||(r=-r),this._jp&&clearTimeout(this._jp),this._jp=setTimeout(this._em.bind(this,e),100),e.zoomByMouseEvent(t,r)}}}};var Ks=function(t){this.graph=t};Ks.prototype={onclick:function(t,e){e.zoomByMouseEvent(t,!st(t))}};var Zs=function(t){this.graph=t};Zs.prototype={onclick:function(t,e){e.zoomByMouseEvent(t,st(t))}},p(xi,En),xi.ELEMENT_MOVE_START="element.move.start",xi.ELEMENT_MOVING="element.moving",xi.ELEMENT_MOVE_END="element.move.end",xi.ELEMENT_CREATED="element.created",xi.ELEMENT_REMOVED="element.removed",xi.POINT_MOVE_START="point.move.start",xi.POINT_MOVING="point.moving",xi.POINT_MOVE_END="point.move.end",xi.RESIZE_START="resize.start",xi.RESIZING="resizing",xi.RESIZE_END="resize.end",xi.ROTATING="rotating",xi.ROTATE_END="rotate.end",xi.PAN_START="pan.start",xi.PAN_END="pan.end",xi.GROUP_EXPANDED="group.expanded",xi.EDGE_BUNDLE="edge.bundle",xi.SELECT="select",xi.SELECT_START="select.start",xi.SELECT_BETWEEN="select.between",xi.SELECT_END="select.end",xi.LONG_CLICK="long.click",Ci.prototype={_8f:function(t){if(this._interactionSupport)switch(t.kind){case An.KIND_REMOVE:this._interactionSupport._onElementRemoved(t.data);break;case An.KIND_CLEAR:this._interactionSupport._onElementClear(t.data)}},destroy:function(){delete this._jc,delete this._48,this._interactionSupport&&(this._interactionSupport._h8(),delete this._interactionSupport)},_jc:null,_48:null,defaultMode:null,_ev:function(t,e,i){this._48[t]=new ui(e,i),t==this.currentMode&&this._interactionSupport._l2Interaction(e)},addCustomInteraction:function(t){this._interactionSupport._kyCustomInteractionListener(t)},removeCustomInteraction:function(t){this._interactionSupport._j0CustomInteractionListener(t)},_kw:function(t){var e=this._48[t];return e||Js[t]}},j(Ci.prototype,{defaultCursor:{get:function(){return this.currentInteractionMode?this.currentInteractionMode.defaultCursor:void 0}},currentMode:{get:function(){return this._lcurrentMode},set:function(t){this._lcurrentMode!=t&&(this._lcurrentMode,this._interactionSupport||(this._interactionSupport=new qn(this._jc)),this._lcurrentMode=t,this.currentInteractionMode=this._kw(this._lcurrentMode),this._jc.cursor=this.defaultCursor,this._interactionSupport._l2Interaction(this.currentInteractionMode?this.currentInteractionMode.getInteractionInstances(this._jc):[]))}}});var Js={};Ji.registerInteractions=function(t,e,i){var n=new ui(e,i);Js[t]=n},sr.INTERACTION_MODE_VIEW="view",sr.INTERACTION_MODE_DEFAULT="default",sr.INTERACTION_MODE_SELECTION="selection",sr.INTERACTION_MODE_ZOOMIN="zoomin",sr.INTERACTION_MODE_ZOOMOUT="zoomout",sr.INTERACTION_MODE_CREATE_SIMPLE_EDGE="create.simple.edge",sr.INTERACTION_MODE_CREATE_EDGE="create.edge",sr.INTERACTION_MODE_CREATE_SHAPE="create.shape",sr.INTERACTION_MODE_CREATE_LINE="create.line",Ji.registerInteractions(sr.INTERACTION_MODE_VIEW,[Vs,Hs,qs,zs,$s,Xs,Ws]),Ji.registerInteractions(sr.INTERACTION_MODE_CREATE_SIMPLE_EDGE,[js,vi,Vs,Hs,qs,zs,Xs]),Ji.registerInteractions(sr.INTERACTION_MODE_CREATE_EDGE,[js,wi,Vs,di,Hs,qs,zs,Xs]),Ji.registerInteractions(sr.INTERACTION_MODE_CREATE_SHAPE,[js,fi,Vs,Hs,qs,zs,Xs]),Ji.registerInteractions(sr.INTERACTION_MODE_CREATE_LINE,[gi,Vs,Hs,qs,zs,Xs]),Ji.registerInteractions(sr.INTERACTION_MODE_DEFAULT,[js,Li,wi,Vs,Ys,Hs,qs,zs,$s,Xs,Ws]),Ji.registerInteractions(sr.INTERACTION_MODE_SELECTION,[js,Li,wi,Vs,Ys,Us,Hs,qs,zs,$s,Xs]),Ji.registerInteractions(sr.INTERACTION_MODE_ZOOMIN,[qs,zs,Ks],Mn),Ji.registerInteractions(sr.INTERACTION_MODE_ZOOMOUT,[qs,zs,Zs],Bn),rr.PanInteraction=Hs,rr.SelectionInteraction=Vs,rr.MoveInteraction=Ys,rr.WheelZoomInteraction=qs,rr.DoubleClickInteraction=$s,rr.ExportInteraction=zs,rr.TooltipInteraction=Xs,rr.RectangleSelectionInteraction=Us,rr.RectangleSelectionInteractionByRightButton=Ws,rr.PointsInteraction=wi;var Qs=function(t){this.graph=t};rr.Layouter=Qs,Qs.prototype={getNodeBounds:function(t){return this.graph.getUIBounds(t)},isLayoutable:function(t){return this.graph.isVisible(t)&&!1!==t.layoutable},getLayoutResult:function(){},updateLocations:function(t,e,i,n,r){if(!0!==e){for(var s in t){var o=t[s];o.node.setLocation(o.x,o.y)}r&&r.call(this,t)}else{if(this.animate||(this.animate=new To),i&&(this.animate.duration=i),n&&(this.animate.animationType=n),this.animate.locations=t,r){var a=r,h=this;r=function(){a.call(h,t)}}this.animate.start(r)}},_eo:function(t){var e,i,n,r=null;t&&(e=t.byAnimate,r=t.callback,i=t.duration,n=t.animationType);var s=this.getLayoutResult(t);return!!s&&(this.updateLocations(s,e,i,n,r),s)},doLayout:function(t,e){return this.graph&&!0!==e?void this.graph.callLater(function(){this._eo(t)},this):this._eo(t)}};var to=120,eo=220,io=121,no=122,ro=221,so=222;sr.DIRECTION_RIGHT=110,sr.DIRECTION_LEFT=to,sr.DIRECTION_CENTER=130,sr.DIRECTION_BOTTOM=210,sr.DIRECTION_TOP=eo,sr.DIRECTION_MIDDLE=230,sr.DIRECTION_RIGHT_TOP=111,sr.DIRECTION_RIGHT_BOTTOM=112,sr.DIRECTION_LEFT_TOP=io,sr.DIRECTION_LEFT_BOTTOM=no,sr.DIRECTION_BOTTOM_LEFT=211,sr.DIRECTION_BOTTOM_RIGHT=212,sr.DIRECTION_TOP_LEFT=ro,sr.DIRECTION_TOP_RIGHT=so;var oo="even",ao="two.side";sr.LAYOUT_TYPE_EVEN=oo,sr.LAYOUT_TYPE_EVEN_HORIZONTAL="even.h",sr.LAYOUT_TYPE_EVEN_VERTICAL="even.v",sr.LAYOUT_TYPE_TWO_SIDE=ao,rr.isHorizontalDirection=Ri;var ho=function(t){this.graph=t};ho.prototype={hGap:50,vGap:50,parentChildrenDirection:210,layoutType:oo,defaultSize:{width:50,height:60},getNodeSize:function(t){if(this.graph._7p._lg0){var e=this.graph.getUI(t);if(e)return e._f3}return t.image&&t.image.bounds?{width:t.image.bounds.width,height:t.image.bounds.height}:this.defaultSize},_leu:function(t,e){if(this.isLayoutable(t)){var i,n=this.getNodeSize(t);i=n instanceof on?[-n.x,-n.y]:[n.width/2,n.height/2];var r=t.id,s=(t.parentChildrenDirection,e?this._8n[e.id]:this._lgz);this._8n[r]=new lo(this.getHGap(t),this.getVGap(t),this.getLayoutType(t),t.parentChildrenDirection,s,t,n.width,n.height,i)}},getHGap:function(t){return t&&C(t.hGap)?t.hGap:this.hGap},getVGap:function(t){return t&&C(t.vGap)?t.vGap:this.vGap},getLayoutType:function(t){return t&&t.layoutType?t.layoutType:this.layoutType},_8n:null,_lgz:null,_jw:function(){this._8n=null,this._lgz=null},getLayoutResult:function(t){var e,i,n,r,s=this.graph;t instanceof Object&&(e=t.x,i=t.y,s=t.root||this.graph,n=t.bounds,r=t.undirected),this._8n={},this._lgz=new lo,this._lgz._l2(this.hGap,this.vGap,this.parentChildrenDirection,this.layoutType);var o={};return Oo(s,this._leu,this,!1,r)&&(this._lgz._eo(e||0,i||0,o),n&&n.set(this._lgz.x,this._lgz.y,this._lgz.width,this._lgz.height)),this._jw(),o},doLayout:function(t,e){if(C(t)){var i=t,n=0;C(e)&&(n=e),t={x:i,y:n},e=!0}return T(this,ho,"doLayout",[t,e])}},p(ho,Qs);var lo=function(t,e,i,n,r,s,o,a,h){this._kc=t||0,this._kd=e||0,this.layoutType=i,this.parentChildrenDirection=n,this.parentBounds=r,r&&r._ge(this),this.node=s,this._de=o,this._lc5=a,this._lgnchorLocation=h};lo.prototype={_l2:function(t,e,i,n){this._kc=t,this._kd=e,this.parentChildrenDirection=i,this.layoutType=n},_7m:function(){this._er=[]},_kc:0,_kd:0,_er:null,_de:0,_lc5:0,layoutType:null,parentChildrenDirection:null,_ge:function(t){this._er||(this._er=[]),this._er.push(t)},_lc3:function(t,e,i,n){var r=new on;return i(this._er,function(i){i._3g(t,e),r.add(i),n?t+=i.width+this._kc:e+=i.height+this._kd},this),r},_7r:function(t,e,i,n,r){var s,o=n?this._kc:this._kd,a=n?this._kd:this._kc,h=n?"width":"height",l=n?"height":"width",u=n?"_de":"_lc5",c=n?"_lc5":"_de",d=n?"hostDX":"hostDY",f=n?"hostDY":"hostDX",g=new on,v=0,E=0,p=[],y=0,T=0;i(this._er,function(i){var r=T>=E;i._inheritedParentChildrenDirection=r?n?to:eo:n?110:210,i._3g(t,e),r?(p.push(i),v=Math.max(v,i[h]),E+=i[l]+a):(s||(s=[]),s.push(i),y=Math.max(y,i[h]),T+=i[l]+a)},this),E-=a,T-=a;var m=Math.max(E,T),O=o,w=0;this.node&&(r&&(O+=this[u]+o,m>this[c]?this[f]=(m-this[c])/2:w=(this[c]-m)/2),this[d]=v+O/2-this[u]/2);var b=0,L=w;return _(p,function(t){n?t.offset(v-t[h],L):t.offset(L,v-t[h]),L+=a+t[l],g.add(t)},this),s?(L=w,b=v+O,_(s,function(t){n?t.offset(b,L):t.offset(L,b),L+=a+t[l],g.add(t)},this),g):g},offset:function(t,e){this.x+=t,this.y+=e,this.nodeX+=t,this.nodeY+=e,this._6s(t,e)},_le6:function(t,e){return 2*this.cx-t-e-t},_le8:function(t,e){return 2*this.cy-t-e-t},_kg:function(t){if(this._er&&0!=this._er.length){if(t)return this.node&&(this.nodeX+=this._le6(this.nodeX,this._de)),void _(this._er,function(t){t.offset(this._le6(t.x,t.width),0)},this);this.node&&(this.nodeY+=this._le8(this.nodeY,this._lc5)),_(this._er,function(t){t.offset(0,this._le8(t.y,t.height))},this)}},_6s:function(t,e){this._er&&_(this._er,function(i){i.offset(t,e)},this)},_3g:function(t,e){return this.x=t||0,this.y=e||0,this._er&&0!=this._er.length?void this._1i(this.x,this.y,this.layoutType):void(this.node&&(this.width=this._de,this.height=this._lc5,this.nodeX=this.x,this.nodeY=this.y))},_6j:function(t){if(this.node){var e=this._lgnchorLocation,i=e[0],n=e[1];t[this.node.id]={node:this.node,x:this.nodeX+i,y:this.nodeY+n,left:this.nodeX,top:this.nodeY,width:this._de,height:this._lc5}}this._er&&_(this._er,function(e){e._6j(t)},this)},_eo:function(t,e,i){this._3g(t,e),this._6j(i)},_1i:function(t,e,n){var r,s=t,o=e;!this.parentChildrenDirection&&this.parentBounds&&(this.parentChildrenDirection=this._inheritedParentChildrenDirection||this.parentBounds.parentChildrenDirection);var a=this.parentChildrenDirection,h=Ri(a);if(this.node){r=130==a||230==a;var l=function(t){return t==to||t==no||t==io||t==eo||t==ro||t==so}(a);r||(h?t+=this._de+this._kc:e+=this._lc5+this._kd)}var u,d,f=this.node&&this.node.layoutReverse?c:_;n==ao?u=this._7r(t,e,f,!h,r):(d=n==oo?!h:"even.h"==n,u=this._lc3(t,e,f,d,r));var g=0,v=0;if(u&&!u.isEmpty()&&(g=u.width,v=u.height,this.add(u)),this.node){var E;if(this.nodeX=s,this.nodeY=o,this.hostDX!==i||this.hostDY!==i)this.nodeX+=this.hostDX||0,this.nodeY+=this.hostDY||0;else E=210==a||a==eo||a==to||110==a?1:212==a||a==so||a==no||112==a?0:2,h?1==E?this.nodeY+=v/2-this._lc5/2:2==E&&(this.nodeY+=v-this._lc5):1==E?this.nodeX+=g/2-this._de/2:2==E&&(this.nodeX+=g-this._de);this.addRect(this.nodeX,this.nodeY,this._de,this._lc5),l&&this._kg(h)}},node:null,uiBounds:null},p(lo,on),Di.prototype={layoutDatas:null,isMovable:function(t){return!this.currentMovingNodes[t.id]},_6n:!1,_3c:function(){this._6n=!0,this.graph._1e.addListener(this._95,this),this.graph._18.addListener(this._26,this)},_1a:function(){this._6n=!1,this.graph._1e.removeListener(this._95,this),this.graph._18.removeListener(this._26,this)},invalidateFlag:!0,invalidateLayoutDatas:function(){this.invalidateFlag=!0},resetLayoutDatas:function(){return this.invalidateFlag=!1,this.layoutDatas=function(){var t,e,i={},n=[],r=0,s={},o=0;this.graph.forEach(function(a){if(this.isLayoutable(a))if(a instanceof ds){var h={node:a,id:a.id,x:a.x,y:a.y};for(this.appendNodeInfo&&this.appendNodeInfo(a,h),i[a.id]=h,n.push(h),r++,e=a.parent;e instanceof vs;){t||(t={});var l=t[e.id];l||(l=t[e.id]={id:e.id,children:[]}),l.children.push(h),e=e.parent}}else a instanceof cs&&!a.isLooped()&&a.fromAgent&&a.toAgent&&(h={edge:a},s[a.id]=h,o++)},this);var a={};for(var h in s){var l=s[h],_=l.edge,u=_.fromAgent,c=_.toAgent,d=u.id+"-"+c.id,f=c.id+"-"+u.id;if(i[u.id]&&i[c.id]&&!a[d]&&!a[f]){var g=i[u.id],v=i[c.id];l.from=g,l.to=v,a[d]=l,this.appendEdgeInfo&&this.appendEdgeInfo(_,l)}else delete s[h],o--}return{groups:t,nodesArray:n,nodes:i,nodeCount:r,edges:s,edgeCount:o,minEnergy:this.minEnergyFunction(r,o)}}.call(this)},_26:function(t){xi.ELEMENT_MOVE_START==t.kind?(this.currentMovingNodes={},t.datas.forEach(function(t){this.currentMovingNodes[t.id]=t},this)):xi.ELEMENT_MOVE_END==t.kind&&(this.currentMovingNodes={})},_95:function(){this.invalidateLayoutDatas()},isRunning:function(){return this.timer&&this.timer._e2()},getLayoutResult:function(){this.stop(),this.resetLayoutDatas();for(var t=this.getMaxIterations(this.layoutDatas.nodeCount||0,this.layoutDatas.edgeCount||0),e=0;t>e&&!1!==this.step(!1);e++);var i=this.layoutDatas.nodes;return this.onstop(),i},_kr:function(){return!1},step:function(t){if(!1===t)return this._kr(this.timeStep);(this.invalidateFlag||!this.layoutDatas)&&this.resetLayoutDatas();var e=this._kr(t),i=this.layoutDatas.nodes;for(var n in i){var r=i[n],s=r.node;this.isMovable(s)?s.setLocation(r.x,r.y):(r.x=s.x,r.y=s.y,r.vx=0,r.vy=0)}return e},onstop:function(){delete this.layoutDatas},start:function(t){if(this.isRunning())return!1;this._6n||this._3c(),this._izr||(this._izr=function(t){return this.step(t)}.bind(this)),this.invalidateLayoutDatas(),this.timer=new er(this._izr);var e=this;return this.timer._jo(function(){e.onstop(),t&&t()}),!0},stop:function(){this.timer&&(this.timer._k9(),this.onstop())},getMaxIterations:function(t){return Math.min(1e3,3*t+10)},minEnergyFunction:function(t,e){return 10+Math.pow(t+e,1.4)},resetGraph:function(){this._6n||this._3c(),this.resetLayoutDatas()},destroy:function(){this.stop(),this._1a()}},p(Di,Qs);var _o=function(t,e,i,n){this.graph=t,C(e)&&(this.radius=e),C(i)&&(this.gap=i),C(n)&&(this.startAngle=n)};rr.BalloonLayouter=_o;var uo="proportional",co="regular",fo="variable";sr.ANGLE_SPACING_PROPORTIONAL=uo,sr.ANGLE_SPACING_REGULAR=co,sr.RADIUS_MODE_UNIFORM="uniform",sr.RADIUS_MODE_VARIABLE=fo,_o.prototype={angleSpacing:uo,radiusMode:fo,gap:4,radius:50,startAngle:0,_8n:null,_lgz:null,_jw:function(){this._8n=null,this._lgz=null},getLayoutResult:function(t){var e,i=0,n=0,r=this.graph;t instanceof Object&&(i=t.cx||0,n=t.cy||0,r=t.root||this.graph,e=t.bounds),this._8n={},this._lgz=new go(this);var s={};return wo(r,this._leu,this)&&(this._lgz._er&&1==this._lgz._er.length&&(this._lgz=this._lgz._er[0]),this._lgz._d3(!0),this._lgz._5l(i,n,this.startAngle,s,e)),this._jw(),s},_leu:function(t,e){if(this.isLayoutable(t)){var i=e?this._8n[e.id]:this._lgz;this._8n[t.id]=new go(this,t,i)}},defaultSize:40,getRadius:function(){return this.radius},getNodeSize:function(t){if(this.graph._7p._lg0){var e=this.graph.getUI(t);if(e)return(e._f3.width+e._f3.height)/2}return this.defaultSize},getGap:function(){return this.gap},_2z:function(t,e,i){return this.getNodeSize(t,e,i)+this.getGap(t,e,i)}};var go=function(t,e,i){this.layouter=t,e&&(this._km=e,this.id=e.id),i&&(i._ge(this),i._kj=!1,this._jt=i._jt+1)};ss=2*Math.PI;go.prototype={_jv:0,_ju:0,_j6:0,_ef:0,_lel:0,_jt:0,_kj:!0,_kl:0,_gh:0,_er:null,_km:null,_ge:function(t){this._er||(this._er=[]),this._er.push(t),t.parent=this},_gj:function(t){if(this._ju=(this._ju+t)%ss,this._er){if(1==this._er.length)return void this._er[0]._gj(this._ju);t=this._ju+Math.PI,_(this._er,function(e){e._gj(t)},this)}},_82:0,_76:function(t){return this._km&&(this._gh=this.layouter._2z(this._km,this._jt,this._kj)/2),this._er?(this._gh,this._82=this._er.length,this._82<=2||this.layouter.angleSpacing==co?function(t){var e=this._82,i=2*Math.PI/e,n=0,r=t?0:e>1?-i/2:0;return _(this._er,function(t){t._ju=r%ss,r+=i,t._jv=i;var e=t._d3();e>n&&(n=e)},this),[n,i]}.call(this,t):function(t){var e,i=this._er.length,n=0,r=0;if(_(this._er,function(t){var i=t._d3();1>i&&(i=1),r+=i,i>n&&(n=i,e=t)},this),i>1){var s=0,o={},a=r/i/3;r=0,_(this._er,function(t){var e=t._kl;a>e&&(e=a),o[t.id]=e,r+=e},this);var h=ss/r;_(this._er,function(e,i){var n=o[e.id]*h;0===i&&(s=t?-n/2:-n),e._ju=s+n/2,e._jv=n,s+=n},this)}return[n,e._jv]}.call(this,t)):null},_d3:function(t){var e=this._76(t);if(!e)return this._kl=this._gh;var i=e[0],n=e[1],r=this.layouter.getRadius(this._km,this._jt);if(r<this._gh&&(r=this._gh),this._ef=r,this._gh+i>r&&(r=this._gh+i),i&&this._82>1&&n<Math.PI){var s=i/Math.sin(n/2);s>r&&(r=s)}return this._j6=r,this._kl=r+i,this._km&&this._er&&this.layouter.radiusMode==fo&&_(this._er,function(t){var e=t._kl;1==t._82&&(e/=2);var i=this._gh+e,n=t._jv;if(n&&n<Math.PI){var r=e/Math.sin(n/2);r>e&&(e=r)}i>e&&(e=i),t._lel=e},this),(!this._km||t)&&this._gj(0),this._kl},_5l:function(t,e,i,n,r){if(this._km&&(n[this._km.id]={x:t,y:e,node:this._km},r&&r.addRect(t-this._gh/2,e-this._gh/2,this._gh,this._gh)),this._er){if(!this._km&&1==this._er.length)return void this._er[0]._5l(t,e,i,n,r);i=i||0;var s=this._j6,o=this._ef;_(this._er,function(a){var h=s;a._lel&&(h=Math.max(o,a._lel));var l=a._ju+i,_=t+h*Math.cos(l),u=e+h*Math.sin(l);a._5l(_,u,i,n,r)},this)}}},p(_o,Qs);var vo=function(){y(this,vo,arguments)};p(vo,Pi);var Eo=function(t,e){this.node1=t,this.node2=e,t==e?(this.isLooped=!0,this._jr=t._je):this._jr=new Qi,this._84=[],this._gm=Ji.EDGE_BUNDLE_EXPANDED};Ji.EDGE_BUNDLE_EXPANDED=!0,Eo.prototype={node1:null,node2:null,_jr:null,_gm:Ji.EDGE_BUNDLE_EXPANDED,_84:null,_gp:null,agentEdge:null,_lee:function(t,e,i){this._jr.forEach(function(n){return i&&n.$from!=i&&n.fromAgent!=i?void 0:t.call(e,n)})},_4r:0,_5j:0,_hb:function(t,e){return!1!==this._jr.add(t)&&(e==this.node1?this._4r++:this._5j++,this._lg0?void this._11(t):void(this._lg0=!0))},_ler:function(t,e){return!1!==this._jr.remove(t)&&(e==this.node1?this._4r--:this._5j--,this._11(t),void this._jr.forEach(function(t){t._edgeBundleInvalidateFlag=!0,t.__3n=!0},this))},_11:function(t){this._letBindableFlag=!0,this._5z=!0,t._edgeBundleInvalidateFlag=!0,t.__3n=!0},_let:function(){this._5z||(this._5z=!0,this._jr.forEach(function(t){t._edgeBundleInvalidateFlag=!0}))},isEmpty:function(){return this._jr.isEmpty()},isPositiveOrder:function(t){return this.node1==t.$from||this.node1==t.fromAgent},canBind:function(t){return t&&this._5z&&this.validate(t),this._jr.length>1&&this._84.length>1},_h5:function(t){return this._84.indexOf(t)},getYOffset:function(t){return this._gp[t.id]},_4f:function(t){if(this.canBind()){var e={},i=this._84.length;if(!(2>i)){var n=0,r=this._84[0];e[r.id]=0;for(var s=1;i>s;s++){r=this._84[s],n+=t.getStyle(r,ys.EDGE_BUNDLE_GAP)||Ps[ys.EDGE_BUNDLE_GAP],e[r.id]=n}if(!this.isLooped){var o=n/2;for(s=0;i>s;s++)e[(r=this._84[s]).id]-=o}this._gp=e}}else this._gp={}},_lgs:function(t){return this._gm!=t&&(this._gm=t,this._let(),!0)},reverseExpanded:function(){return this._lgs(!this._gm)},_19:function(){var t;this._letBindableFlag=!1,this._84.length=0,this._jr.forEach(function(e){if(e.isBundleEnabled()){if(!this.isPositiveOrder(e))return t||(t=[]),void t.push(e);this._84.push(e)}},this),t&&(this._84=t.concat(this._84))},_du:function(t){return t==this.agentEdge||!this.canBind()||this._gm},validate:function(t){this._5z=!1,this._jr.forEach(function(t){t._edgeBundleInvalidateFlag=!1}),this._letBindableFlag&&this._19();var e=this._gm,i=!this.canBind()||e;_(this._84,function(t){t._$p=!0,t._h0InBundle=i,i&&(t.__3n=!0)},this),i?this._9d(null,t):(this._9d(this._84[0],t),this.agentEdge._h0InBundle=!0,this.agentEdge.__3n=!0),i&&this._4f(t)},_9d:function(t,e){if(t!=this.agentEdge){var i=this.agentEdge;return this.agentEdge=t,e&&e._4e(new pn(this,"agentEdge",t,i)),!0}}},j(Eo.prototype,{bindableEdges:{get:function(){return this._84}},edges:{get:function(){return this._jr._ig}},length:{get:function(){return this._jr?this._jr.length:1}},expanded:{get:function(){return this._gm},set:function(t){return this._gm!=t&&(this._gm=t,void this._let())}}});var po=function(t){t.fx-=t.x*this.attractive,t.fy-=t.y*this.attractive},yo=function(t){if(0!=t.k){var e=this._lep,i=t.from,n=t.to,r=n.x-i.x,s=n.y-i.y,o=r*r+s*s,a=Math.sqrt(o)||.1,h=(a-e)*t.k*this.elastic,l=(h/=a)*r,_=h*s;n.fx-=l,n.fy-=_,i.fx+=l,i.fy+=_}};Pi.prototype={appendNodeInfo:function(t,e){e.mass=t.layoutMass||1,e.fx=0,e.fy=0,e.vx=0,e.vy=0},appendEdgeInfo:function(t,e){e.k=t.layoutElasticity||1},setMass:function(t,e){t.layoutMass=e,this.layoutDatas&&this.layoutDatas.nodes&&((t=this.layoutDatas.nodes[t.id])&&(t.mass=e))},setElasticity:function(t,e){t.layoutElasticity=e,this.layoutDatas&&this.layoutDatas.edges&&((t=this.layoutDatas.edges[t.id])&&(t.k=e))},_lep:50,_hc:.5,timeStep:.15,repulsion:50,attractive:.1,elastic:3,_kt:1e3,_iq:function(t){return this._kt+.3*(t-this._kt)},_kr:function(t,e){var i=(Date.now(),this.layoutDatas.nodes);for(var n in i){var r=i[n];e&&(r.x+=Math.random()-.5,r.y+=Math.random()-.5),po.call(this,r)}var s=this.layoutDatas.groups;if(s)for(var n in s){var o=s[n].children,a=0,h=0;o.forEach(function(t){a+=t.x,h+=t.y}),a/=o.length,h/=o.length;var l=10*this.attractive;o.forEach(function(t){t.fx-=(t.x-a)*l,t.fy-=(t.y-h)*l})}var _=this._nbodyForce;for(var n in _||(_=this._nbodyForce=function(){function t(){this.stack=[],this.popIdx=0}var e=-1e6;t.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var i=this.stack[this.popIdx];i?(i.node=t,i.body=e):this.stack[this.popIdx]=new function(t,e){this.node=t,this.body=e}(t,e),++this.popIdx},pop:function(){return this.popIdx>0?this.stack[--this.popIdx]:void 0},reset:function(){this.popIdx=0}};var i=[],n=new t,r=[],s=0,o=function(){var t;return r[s]?((t=r[s]).quads[0]=null,t.quads[1]=null,t.quads[2]=null,t.quads[3]=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0,t.isInternal=!1):(t=new function(){this.body=null,this.quads=[],this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0,this.isInternal=!1},r[s]=t),++s,t},a=o(),h=function(t,e){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return 1e-8>i&&1e-8>n},l=function(t){for(n.reset(),n.push(a,t);!n.isEmpty();){var e=n.pop(),i=e.node,r=e.body;if(i.isInternal){var s=r.x,l=r.y;i.mass=i.mass+r.mass,i.massX=i.massX+r.mass*s,i.massY=i.massY+r.mass*l;var _=0,u=i.left,c=(i.right+u)/2,d=i.top,f=(i.bottom+d)/2;if(s>c){_+=1;var g=u;u=c,c+=c-g}if(l>f){_+=2;var v=d;d=f,f+=f-v}var E=i.quads[_];E||((E=o()).left=u,E.top=d,E.right=c,E.bottom=f,i.quads[_]=E),n.push(E,r)}else if(i.body){var p=i.body;if(i.body=null,i.isInternal=!0,h(p,r)){if(i.right-i.left<1e-8)return;do{var y=Math.random(),T=(i.right-i.left)*y,m=(i.bottom-i.top)*y;p.x=i.left+T,p.y=i.top+m}while(h(p,r))}n.push(i,p),n.push(i,r)}else i.body=r}};return{init:function(t,i){e=i;var n,r=Number.MAX_VALUE,h=Number.MAX_VALUE,_=Number.MIN_VALUE,u=Number.MIN_VALUE,c=t,d=c.length;for(n=d;n--;){var f=c[n].x,g=c[n].y;r>f&&(r=f),f>_&&(_=f),h>g&&(h=g),g>u&&(u=g)}var v=_-r,E=u-h;for(v>E?u=h+v:_=r+E,s=0,(a=o()).left=r,a.right=_,a.top=h,a.bottom=u,n=d;n--;)l(c[n])},update:function(t){var n,r,s,o,h=i,l=1,_=0,u=1;for(h[0]=a;l;){var c=h[_],d=c.body;l-=1,_+=1,d&&d!==t?(r=d.x-t.x,s=d.y-t.y,0===(o=Math.sqrt(r*r+s*s))&&(r=(Math.random()-.5)/50,s=(Math.random()-.5)/50,o=Math.sqrt(r*r+s*s)),-1e3>(n=e*d.mass*t.mass/(o*o))&&(n=-1e3),n/=o,t.fx=t.fx+n*r,t.fy=t.fy+n*s):(r=c.massX/c.mass-t.x,s=c.massY/c.mass-t.y,0===(o=Math.sqrt(r*r+s*s))&&(r=(Math.random()-.5)/50,s=(Math.random()-.5)/50,o=Math.sqrt(r*r+s*s)),(c.right-c.left)/o<.8?(-1e3>(n=e*c.mass*t.mass/(o*o))&&(n=-1e3),n/=o,t.fx=t.fx+n*r,t.fy=t.fy+n*s):(c.quads[0]&&(h[u]=c.quads[0],l+=1,u+=1),c.quads[1]&&(h[u]=c.quads[1],l+=1,u+=1),c.quads[2]&&(h[u]=c.quads[2],l+=1,u+=1),c.quads[3]&&(h[u]=c.quads[3],l+=1,u+=1)))}}}}()),_.init(this.layoutDatas.nodesArray,-this.repulsion*this.repulsion*this.repulsion),i)_.update(i[n]);if(this.elastic){var u=this.layoutDatas.edges;for(var n in u)yo.call(this,u[n])}return this._kp(t)},_kp:function(t){var e=this.layoutDatas.minEnergy,i=(this.layoutDatas.currentEnergy,this.layoutDatas.nodes),n=(t=this.timeStep,0),r=this._hc;for(var s in i){var o=i[s],a=o.fx/o.mass,h=o.fy/o.mass,l=o.vx+=a*t,_=o.vy+=h*t;o.x+=l*t,o.y+=_*t,e>n&&(n+=2*(l*l+_*_)),o.fx=0,o.fy=0,o.vx*=r,o.vy*=r}return this.layoutDatas.currentEnergy=n,n>=e}},p(Pi,Di),rr.SpringLayouter=Pi;var To=function(t){this.locations=t};To.prototype={oldLocations:null,_ed:null,duration:700,animationType:tr.easeOutStrong,_74:function(t){if(this._ed=t,this.oldLocations={},t)for(var e in t){var i=t[e].node;this.oldLocations[e]={x:i.x,y:i.y}}},setLocation:function(t,e,i){t.setLocation(e,i)},forEach:function(t,e){for(var i in this.locations){var n=this.oldLocations[i],r=this.locations[i];t.call(e,n,r)}},_iy:function(t){this.forEach(function(e,i){var n=i.node,r=e.x+(i.x-e.x)*t,s=e.y+(i.y-e.y)*t;this.setLocation(n,r,s)},this)},stop:function(){this._lgnimate&&this._lgnimate._k9()},start:function(t){this._lgnimate?(this._lgnimate._k9(),this._lgnimate._hf=this.duration,this._lgnimate._e1Type=this.animationType,this._lgnimate._onfinish=this._onfinish):this._lgnimate=new ir(this._iy,this,this.duration,this.animationType),this._lgnimate._jo(t)}},j(To.prototype,{locations:{get:function(){return this._ed},set:function(t){this._ed!=t&&this._74(t)}}});var mo=function(t,e,i,n,r,s){if(e instanceof Sn)return t(e,i,n,r,s),e;if(e instanceof Ns){var o=new Qi;e._jcModel.forEach(function(t){return e.isVisible(t)?t._gy()&&t._gm&&t.hasChildren()?void(t.$location&&(t.$location.invalidateFlag=!1)):void o.add(t):void 0}),e=o}return _(e=function(t){var e,i=new Qi;return t.forEach(function(t){t instanceof ds&&(t.hasInEdge()?!e&&t.hasOutEdge()&&(e=t):i.add(t))}),i.isEmpty()&&e&&i.add(e),i}(e),function(e){t(e,i,n,r,s)}),e},Oo=function(t,e,i,n,r){return mo(bo,t,e,i,n,r)},wo=function(t,e,i,n,r){return mo(Lo,t,e,i,n,r)};xe.prototype.forEachByTopoDepthFirstSearch=function(t,e,i,n){Oo(this,t,e,i,n)},xe.prototype.forEachByTopoBreadthFirstSearch=function(t,e,i,n){t instanceof Object&&1==arguments.length&&(e=t.scope),wo(this,t,e,i,n)},rr.forEachByTopoDepthFirstSearch=Oo,rr.forEachByTopoBreadthFirstSearch=wo;var bo=function(t,e,i,n,r){!function t(e,i,n,r,s,o,a,h){e._marker=o,r||i.call(n,e,h,a),Ni(e,function(h){t(h,i,n,r,s,o,a+1,e)},h,s,o),r&&i.call(n,e,h,a)}(t,e,i,n,r,{},0)},Lo=function(t,e,i,n,r){!function t(e,i,n,r,s,o,a){var h,l=e.length;e.forEach(function(t,e){var _=t.v;_._marker=o,r||i.call(n,_,t._from,a,e,l),Ni(_,function(t){h||(h=[]),t._marker=o,h.push({v:t,_from:_})},_,s,o)}),h&&t(h,i,n,r,s,o,a+1),r&&e.forEach(function(t,e){i.call(n,t.v,t._from,a,e,l)})}([{v:t}],e,i,n,r,{},0)};return rr.toColor=F,rr.log=H,rr.error=U,rr.trace=function(e){t.console&&console.trace(e)},rr.isIE=Gi,rr.isOpera=ki,rr.isWebkit=ji,rr.isGecko=zi,rr.isFirefox=Yi,rr.isSafari=Ui,rr.isChrome=Hi,rr.isMac=Wi,rr.DefaultStyles=Ps,rr.Defaults=Ji,rr.Styles=ys,rr.Consts=sr,rr.Graphs=zr,rr.Graph=Ns,rr.BaseUI=Es,rr.ElementUI=xs,rr.NodeUI=Be,rr.EdgeUI=Me,rr.LabelUI=Rs,rr.ImageUI=Cs,rr.Shapes=gs,rr.Path=Fr,rr.Gradient=Or,rr.InteractionEvent=xi,rr.Element=us,rr.Node=ds,rr.Edge=cs,rr.GraphModel=xe,rr.EdgeBundle=Eo,rr.TreeLayouter=ho,rr.name="Qunee for HTML5",rr.version="2.6.1.15",rr.about="Qunee - Diagramming Components for HTML5/Canvas",rr.copyright="Copyright © 2018 Qunee.com",rr.css=tt,rr.IDrawable={draw:function(){}},H=function(){},rr.publishDate="13/4/2018",rr}(window,document)},"mvd+":function(t,e){},t9kj:function(t,e){}});
//# sourceMappingURL=1.8cecbe3ac7d775776589.js.map